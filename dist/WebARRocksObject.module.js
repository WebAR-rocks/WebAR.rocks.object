/**
 * WebAR.rocks.object
 *
 * Copyright (c) 2020 WebAR.rocks ( https://webar.rocks )
 * This code is released under dual licensing:
 *   - GPLv3 
 *   - Nominative commercial license
 * Please read https://github.com/WebAR-rocks/WebAR.rocks.object/blob/master/LICENSE
 * 
*//* eslint-enable */
/* prettier-ignore */
function ab(){this.Ga=!1;this.ha=null;this.qd=void 0;this.da=1;this.Hc=this.zd=0;this.za=null}function kb(N){if(N.Ga)throw new TypeError("Generator is already running");N.Ga=!0}ab.prototype.Ia=function(N){this.qd=N};ab.prototype.Ma=function(N){this.za={Nd:N,ge:!0};this.da=this.zd||this.Hc};ab.prototype.return=function(N){this.za={return:N};this.da=this.Hc};function lb(N){this.s=new ab;this.ve=N}
lb.prototype.Ia=function(N){kb(this.s);if(this.s.ha)return tb(this,this.s.ha.next,N,this.s.Ia);this.s.Ia(N);return ub(this)};function Fb(N,ea){kb(N.s);var sa=N.s.ha;if(sa)return tb(N,"return"in sa?sa["return"]:function(ya){return{value:ya,done:!0}},ea,N.s.return);N.s.return(ea);return ub(N)}lb.prototype.Ma=function(N){kb(this.s);if(this.s.ha)return tb(this,this.s.ha["throw"],N,this.s.Ia);this.s.Ma(N);return ub(this)};
function tb(N,ea,sa,ya){try{var Da=ea.call(N.s.ha,sa);if(!(Da instanceof Object))throw new TypeError("Iterator result "+Da+" is not an object");if(!Da.done)return N.s.Ga=!1,Da;var Ma=Da.value}catch(ta){return N.s.ha=null,N.s.Ma(ta),ub(N)}N.s.ha=null;ya.call(N.s,Ma);return ub(N)}
function ub(N){for(;N.s.da;)try{var ea=N.ve(N.s);if(ea)return N.s.Ga=!1,{value:ea.value,done:!1}}catch(sa){N.s.qd=void 0,N.s.Ma(sa)}N.s.Ga=!1;if(N.s.za){ea=N.s.za;N.s.za=null;if(ea.ge)throw ea.Nd;return{value:ea.return,done:!0}}return{value:void 0,done:!0}}function Gb(N){this.next=function(ea){return N.Ia(ea)};this.throw=function(ea){return N.Ma(ea)};this.return=function(ea){return Fb(N,ea)};this[Symbol.iterator]=function(){return this}}
function Zb(N){function ea(ya){return N.next(ya)}function sa(ya){return N.throw(ya)}return new Promise(function(ya,Da){function Ma(ta){ta.done?ya(ta.value):Promise.resolve(ta.value).then(ea,sa).then(Ma,Da)}Ma(N.next())})}
const WEBARROCKSOBJECT=function(){function N(a){var c=null,d=null,e=null,m=0;this.B=function(l){this.Ee(l.gb);e.Dd({Yb:l.Yb,Vb:l.Vb})};this.Yd=function(l){return c[l]};this.Ee=function(l){var t=null;m=l.length;c=l.map(function(q,k){q=Object.assign({},q,{index:k,parent:this,ob:t,je:k===m-1});return t=k=0===k?$b.instance(q):ac.instance(q)});d=c[0];e=c[m-1];c.forEach(function(q,k){0!==k&&q.ue()})};this.O=function(l){l.i(0);var t=l;c.forEach(function(q){t=q.O(t,!1)});return t};this.te=function(l){var t,
q,k;return Zb(new Gb(new lb(function(p){l.i(0);t=l;for(q=0;q<m-1;++q)k=c[q],t=k.O(t,!1);var v=c[m-1].O(t,!0);p.da=0;return{value:v}})))};this.Xd=function(){return d.G()};this.ae=function(){return e.G()};this.Ib=function(){return e.$d()};this.Jc=function(){return e.Jc()};this.u=function(){c&&(c.forEach(function(l){l.u()}),e=d=c=null,m=0)};"undefined"!==typeof a&&this.B(a)}var ea;function sa(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}function ya(a){var c=JSON.parse(a);a=c.ne;var d=c.nf,e=c.n;var m="undefined"===
typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data);var l=m.length;c=new Uint8Array(l);for(var t=0;t<l;++t)c[t]=m.charCodeAt(t);m=new Float32Array(e);l=new Float32Array(d);t=a+d+1;for(var q=0;q<e;++q){for(var k=t*q,p=0===sa(c,k)?1:-1,v=k+1,E=1,F=0,u=v+a-1;u>=v;--u)F+=E*sa(c,u),E*=2;v=F;k=k+1+a;E=l.length;F=0;for(u=k;u<k+E;++u)l[F]=sa(c,u,!0),++F;for(E=k=0;E<d;++E)k+=l[E]*Math.pow(2,-E-1);m[q]=0===k&&0===v?0:p*(1+k)*Math.pow(2,1+v-Math.pow(2,a-1))}return m}function Da(a){if(a){var c=
a.w,d=a.h;H.J.Ba[0]=-1+2*(a.x+c/2)/H.ga;H.J.Ba[1]=-1+2*(a.y+d/2)/H.fa;H.J.scale[0]=c/H.ga;H.J.scale[1]=d/H.fa}else H.J.Ba[0]=0,H.J.Ba[1]=0,H.J.scale[0]=1,H.J.scale[1]=1;H.I=H.ga*H.J.scale[0];H.S=H.fa*H.J.scale[1]}function Ma(){var a=[{type:"2f",name:"u38",value:H.J.Ba},{type:"2f",name:"u39",value:H.J.scale}],c=a.concat([{type:"1f",name:"u40",value:H.ga/H.fa}]);A.M("s53",c);A.M("s54",c.concat([{name:"u8",type:"2f",value:[1/H.ga,1/H.fa]}]));A.M("s55",a)}function ta(a,c,d){var e=Na(a,c,"dx")*H.sa[0],
m=Na(a,c,"dy")*H.sa[1];a=d[2]*Na(a,c,"ds");if(Ua){c=Math.cos(Ha);var l=Math.sin(Ha),t=-l*e+c*m;e=c*e+l*m;m=t}e*=d[0];m*=d[1];d=V.o[2];c=V.o[3];V.o[0]-=e*d*U.F[0];V.o[1]-=m*c*U.F[1];V.o[2]-=a*d*U.F[2];V.o[2]=ra.Ca(V.o[2],Ea.scaleXRange[0]*H.sa[0],Ea.scaleXRange[1]*H.sa[0]);V.o[0]=ra.Ca(V.o[0],0,1);V.o[3]=V.o[2]*H.aspectRatio/H.Mb;V.o[1]=ra.Ca(V.o[1],0,1)}function vb(a){var c=V.o[2],d=V.o[3],e=(2*Math.random()-1)*a,m=.5*(2*Math.random()-1)*a;V.o[0]+=(2*Math.random()-1)*a*c;V.o[1]+=e*d;V.o[2]+=m*c;V.o[3]=
V.o[2]*H.aspectRatio/H.Mb}function Na(a,c,d){c=Ia[c].Uc[d];return(a[c][0]+a[c][1]+a[c][2]+a[c][3])/4}function Hb(a,c){if(U.Ob){if(U.dc){var d=Na(a,c,"yaw");a=-Na(a,c,"notHere");return Math.atan2(ra.Ca(a,-1,1),ra.Ca(d,-1,1))}return Math.PI*Na(a,c,"yaw")}return 0}function Ib(a,c,d,e){c=Ia[c].Uc[d];return(a[c][0]+a[c][1]+a[c][2]+a[c][3])/4*(1-e)+e*Math.min(a[c][0],a[c][1],a[c][2],a[c][3])}function mb(a,c,d){var e=Ib(a,c,"here",d),m=0;0<wb&&!U.dc&&(m=wb*Ib(a,c,"notHere",d));return(e-m)/Ia[c].jc}function Va(){Ha=
0;Ua&&null!==bb&&(Ha=bb[0]+Math.random()*(bb[1]-bb[0]));qa=ha.ya;var a=Jb.get(0);a&&(V.o[0]=a[0],V.o[1]=a[1],V.o[2]=a[2],V.o[3]=a[2]*H.aspectRatio)}function bc(a,c){var d=.5+(V.o[0]-.5)/H.J.scale[0],e=.5+(V.o[1]-.5)/H.J.scale[1],m=V.o[2],l=V.o[3],t=ia.positionScale[0],q=ia.positionScale[1],k=ia.positionScale[2],p=1;!ua.Tb&&Ea.lockStabilizeEnabled&&(p=Ea.lockStabilizeDxysRanges,p=Math.max(xb.cc(p[0][0],p[0][1],Math.abs(t-d)/m*cb*U.F[0]),xb.cc(p[1][0],p[1][1],Math.abs(q-e)/l*cb*U.F[1]),xb.cc(p[2][0],
p[2][1],Math.abs(k-m)/m*cb*U.F[2])));U.Fa&&(ua.$b=ra.ma(ua.$b,Ua?Ha:yb,p),ia.roll=ua.$b);U.cb&&(ua.pitch=ra.ma(ua.pitch,Kb,p),ia.pitch=ua.pitch);U.Ob&&(ua.mc=ra.ma(ua.mc,a,p),ia.yaw=ua.mc);ia.label=Ia[Y.H].label;ia.distance=Ia[Y.H].Id;ia.positionScale[0]=ra.ma(t,d,p);ia.positionScale[1]=ra.ma(q,e,p);ia.positionScale[2]=ra.ma(k,m,p);ia.positionScale[3]=ra.ma(ia.positionScale[3],l,p);ia.detectScore=c}function cc(a){var c=-1,d=-1E12;-1!==[ha.ya,ha.wb].indexOf(qa)&&Ia.forEach(function(k,p){k=mb(a,p,0);
k>d&&(d=k,c=p)});ua.Tb=!0;switch(qa){case ha.ya:qa=ha.wb;ta(a,c,[1,1,1]);ea=0;break;case ha.wb:++ea;d>W.ub?(W.Ha?(qa=ha.Oa,db=c,Y.H=c,Y.Sb=0):(qa=ha.nc,Lb=0,db=c),ta(a,db,[1,1,1])):ea>fa.pe?Va():ta(a,c,[1,1,1]);break;case ha.nc:++Lb>W.lb&&(qa=ha.Oa,Y.n=0,Y.Xc=0,Y.H=db,Y.W[0]=0,Y.W[1]=0);ta(a,db,[1,1,1]);vb(W.hb);break;case ha.Oa:if(ua.Tb=!1,W.Ha||++Y.n>W.na){var e=mb(a,Y.H,1);if(W.Ha||e>W.ub+W.tb||W.bb){U.Fa&&(yb=U.cd*Na(a,Y.H,"roll"),Ua&&(Ha+=yb));if(zb){var m=-1;m=W.Ha||W.bb?Hb(a,Y.H):Math.atan2(Y.W[1],
Y.W[0]);if(U.cb){var l=.5+.5*Na(a,Y.H,"pitch");Kb=U.pitchRange[0]+(U.pitchRange[1]-U.pitchRange[0])*l}bc(m,e)}W.bb?(ta(a,Y.H,W.ld),e>W.jd?(Y.Sb=0,ia.label||(ia.label=Ia[Y.H].label)):++Y.Sb>W.jb&&Va()):zb?Va():ta(a,Y.H,[.5,.5,.5])}else Va()}else{var t=1-(W.na-Y.n)/(W.na-1);e=1.5-1*t;ta(a,Y.H,[e,e,e]);vb(W.Ra*(1-t));var q=mb(a,Y.H,t);q<W.ub*t*W.Sa?Va():++Y.Xc>10*W.na?Va():Ia.some(function(k,p){return Y.H===p?!1:mb(a,p,t)>q*(W.La*t+(1-t))?!0:!1})?(vb(W.Na[0]),Ha+=(2*Math.random()-1)*W.Na[1]*Math.PI/
180,Y.n=0,Y.W[0]=0,Y.W[1]=0):(e=Hb(a,Y.H),Y.W[0]+=Math.cos(e),Y.W[1]+=Math.sin(e))}}}function dc(){A.qc([{id:"s54",name:"_",wa:"attribute vec2 a0;uniform vec4 u41;uniform vec2 u38,u39;uniform float u37,u40;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.);float a=u40*(u41.z/u41.w);a*=u39.x/u39.y;float b=cos(u37),c=sin(u37);vec2 f=mat2(b,-c*a,c/a,b)*a0,g=u38+f*u39,d=u41.xy+.5*u41.zw*g;vv0=vec2(d.x,1.-d.y);}",g:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;const vec3 g=vec3(1.,1.,1.);vec3 c[9];void main(){vec2 d=vv0+.5*u8;c[0]=texture2D(u1,d-u8*vec2(-1.,-1.)).rgb,c[1]=texture2D(u1,d-u8*vec2(-1.,0.)).rgb,c[2]=texture2D(u1,d-u8*vec2(-1.,1.)).rgb,c[3]=texture2D(u1,d-u8*vec2(0.,-1.)).rgb,c[4]=texture2D(u1,d-u8).rgb,c[5]=texture2D(u1,d-u8*vec2(0.,1.)).rgb,c[6]=texture2D(u1,d-u8*vec2(1.,-1.)).rgb,c[7]=texture2D(u1,d-u8*vec2(1.,0.)).rgb,c[8]=texture2D(u1,d-u8*vec2(1.,1.)).rgb;vec3 a,b;a=min(c[0],c[1]),b=max(c[0],c[1]),c[0]=a,c[1]=b,a=min(c[0],c[2]),b=max(c[0],c[2]),c[0]=a,c[2]=b,a=min(c[0],c[3]),b=max(c[0],c[3]),c[0]=a,c[3]=b,a=min(c[0],c[4]),b=max(c[0],c[4]),c[0]=a,c[4]=b,a=min(c[0],c[5]),b=max(c[0],c[5]),c[0]=a,c[5]=b,a=min(c[0],c[6]),b=max(c[0],c[6]),c[0]=a,c[6]=b,a=min(c[0],c[7]),b=max(c[0],c[7]),c[0]=a,c[7]=b,a=min(c[0],c[8]),b=max(c[0],c[8]),c[0]=a,c[8]=b,a=min(c[1],c[2]),b=max(c[1],c[2]),c[1]=a,c[2]=b,a=min(c[1],c[3]),b=max(c[1],c[3]),c[1]=a,c[3]=b,a=min(c[1],c[4]),b=max(c[1],c[4]),c[1]=a,c[4]=b,a=min(c[1],c[5]),b=max(c[1],c[5]),c[1]=a,c[5]=b,a=min(c[1],c[6]),b=max(c[1],c[6]),c[1]=a,c[6]=b,a=min(c[1],c[7]),b=max(c[1],c[7]),c[1]=a,c[7]=b,a=min(c[1],c[8]),b=max(c[1],c[8]),c[1]=a,c[8]=b,a=min(c[2],c[3]),b=max(c[2],c[3]),c[2]=a,c[3]=b,a=min(c[2],c[4]),b=max(c[2],c[4]),c[2]=a,c[4]=b,a=min(c[2],c[5]),b=max(c[2],c[5]),c[2]=a,c[5]=b,a=min(c[2],c[6]),b=max(c[2],c[6]),c[2]=a,c[6]=b,a=min(c[2],c[7]),b=max(c[2],c[7]),c[2]=a,c[7]=b,a=min(c[2],c[8]),b=max(c[2],c[8]),c[2]=a,c[8]=b,a=min(c[3],c[4]),b=max(c[3],c[4]),c[3]=a,c[4]=b,a=min(c[3],c[5]),b=max(c[3],c[5]),c[3]=a,c[5]=b,a=min(c[3],c[6]),b=max(c[3],c[6]),c[3]=a,c[6]=b,a=min(c[3],c[7]),b=max(c[3],c[7]),c[3]=a,c[7]=b,a=min(c[3],c[8]),b=max(c[3],c[8]),c[3]=a,c[8]=b,a=min(c[4],c[5]),b=max(c[4],c[5]),c[4]=a,c[5]=b,a=min(c[4],c[6]),b=max(c[4],c[6]),c[4]=a,c[6]=b,a=min(c[4],c[7]),b=max(c[4],c[7]),c[4]=a,c[7]=b,a=min(c[4],c[8]),b=max(c[4],c[8]),c[4]=a,c[8]=b,gl_FragColor=vec4(c[4]*g,1.);}",
j:"u1 u41 u39 u38 u37 u40 u8".split(" "),precision:"lowp"},{id:"s53",name:"_",wa:"attribute vec2 a0;uniform vec4 u41;uniform vec2 u38,u39;uniform float u37,u40;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.);float a=u40*(u41.z/u41.w);a*=u39.x/u39.y;float b=cos(u37),c=sin(u37);vec2 f=mat2(b,-c*a,c/a,b)*a0,g=u38+f*u39,d=u41.xy+.5*u41.zw*g;vv0=vec2(d.x,1.-d.y);}",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",j:"u1 u41 u39 u38 u37 u40".split(" "),precision:"lowp"},
{id:"s56",name:"_",wa:"attribute vec2 a0;uniform vec4 u41;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.);vec2 a=u41.xy+.5*u41.zw*a0;vv0=vec2(a.x,1.-a.y);}",g:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;const vec3 g=vec3(1.,1.,1.);float c[5];void main(){c[0]=texture2D(u1,vv0-u8*vec2(-1.,0.)).r,c[1]=texture2D(u1,vv0-u8*vec2(0.,-1.)).r,c[2]=texture2D(u1,vv0-u8).r,c[3]=texture2D(u1,vv0-u8*vec2(0.,1.)).r,c[4]=texture2D(u1,vv0-u8*vec2(1.,0.)).r;float a,b;a=min(c[0],c[1]),b=max(c[0],c[1]),c[0]=a,c[1]=b,a=min(c[0],c[2]),b=max(c[0],c[2]),c[0]=a,c[2]=b,a=min(c[0],c[3]),b=max(c[0],c[3]),c[0]=a,c[3]=b,a=min(c[0],c[4]),b=max(c[0],c[4]),c[0]=a,c[4]=b,a=min(c[1],c[2]),b=max(c[1],c[2]),c[1]=a,c[2]=b,a=min(c[1],c[3]),b=max(c[1],c[3]),c[1]=a,c[3]=b,a=min(c[1],c[4]),b=max(c[1],c[4]),c[1]=a,c[4]=b,a=min(c[2],c[3]),b=max(c[2],c[3]),c[2]=a,c[3]=b,a=min(c[2],c[4]),b=max(c[2],c[4]),c[2]=a,c[4]=b,gl_FragColor=vec4(c[2]*g,1.);}",
j:["u1","u41","u8"],precision:"lowp"},{id:"s55",name:"_",wa:"attribute vec2 a0;uniform vec2 u38,u39;varying vec2 vv0;const vec2 f=vec2(1.,1.);void main(){gl_Position=vec4(a0,0.,1.);vec2 a=u38+a0*u39,b=(a+f)/2.;vv0=b;}",g:"uniform sampler2D u1;uniform vec4 u41;varying vec2 vv0;void main(){vec2 b=u41.xy-.5*u41.zw,c=u41.xy+.5*u41.zw,a=step(b,vv0)*step(vv0,c);vec4 d=texture2D(u1,vec2(vv0.x,1.-vv0.y));gl_FragColor=mix(d,vec4(0.,1.,0.,1.),a.x*a.y*.5);}",j:["u1","u41","u39","u38"],precision:"lowp"}]);var a=
[{type:"1i",name:"u1",value:0}];A.M("s54",a);A.M("s53",a);A.M("s56",a);A.M("s55",a);Mb()}function Mb(){Ha=0;A.M("s53",Nb);A.M("s54",Nb);ia.roll=0}function Wa(){H.aspectRatio=H.I/H.S;Jb.B({nb:Ea.overlapFactors,Wc:Ea.nScaleLevels,I:H.I,S:H.S,dd:Ea.scale0Factor,F:U.F,ed:Ea.scanCenterFirst})}function Ob(a){R.qa={isFlipY:!1,isLinear:!0,width:H.I,height:H.S,isPot:!1,isFloat:!1};R.type===Oa.Db?Object.assign(R.qa,{isKeepArray:!0,array:a.arrayBuffer}):Object.assign(R.qa,{D:a});R.N=Z.instance(R.qa);R.ta=!0}
function Pb(a,c,d){if(!a.exportData||!a.exportData.labels)return c("INVALID_NN");var e=a.exportData;"undefined"===typeof e.paramsPerLabel&&(e.paramsPerLabel={});"undefined"!==typeof d&&d.paramsPerLabel&&(e.paramsPerLabel=Object.assign(e.paramsPerLabel,d.paramsPerLabel));nb.reset_state();Ra=new N({gb:a.layers,Yb:"cpuRGBA2Float",Vb:cc});cb=Ra.Xd();V.N=Z.instance({isFloat:!1,isPot:!1,width:cb});U.F=e.translationScalingFactors?e.translationScalingFactors:fa.F;e.rollMax?(U.cd=e.rollMax,U.Fa=!0):U.Fa=!1;
e.pitchRange?(U.pitchRange=e.pitchRange,U.cb=!0):U.cb=!1;e.splitYawComponents&&(U.dc=!0);"undefined"!==typeof e.isYaw&&(U.Ob=e.isYaw);U.width=Ra.ae();a="undefined"===typeof d?{}:d;wb="undefined"===typeof a.notHereFactor?1:a.notHereFactor;a=e.labels;d="undefined"===typeof e.paramsPerLabel?!1:e.paramsPerLabel;var m="undefined"===typeof e.inputAspectRatio?1:e.inputAspectRatio,l=Math.sqrt(m);H.sa[0]=l;H.sa[1]=1/l;H.Mb=m;Wa();m=Array(a.length);for(l=0;l<U.width/8;++l)for(var t=0;t<U.width;++t){var q=t+
l*U.width;if(q>=a.length)break;var k=t,p=8*l,v=a[q];m[q]={jc:d&&d[v]&&d[v].thresholdDetect?d[v].thresholdDetect:fa.jc,label:v,Id:e.distances&&e.distances[q]?e.distances[q]:3,Uc:{here:k+p*U.width,notHere:k+(p+1)*U.width,yaw:k+(p+2)*U.width,dx:k+(p+3)*U.width,dy:k+(p+4)*U.width,ds:k+(p+5)*U.width,roll:k+(p+6)*U.width,pitch:k+(p+7)*U.width}}}Ia=m;c(!1)}function Qb(a,c,d){if(qa===ha.LOADING||eb!==Xa.IDLE)return-1;Object.assign(na,ec,d?d:{});W.ub=na.thresholdDetectFactor;W.jd=na.thresholdDetectFactorUnstitch;
W.Ha=na.isSkipConfirmation;W.bb=na.isKeepTracking;W.ld=na.trackingFactors;W.La=na.secondNeighborFactor;W.lb=na.nLocateAutomoves;W.hb=na.locateMoveNoiseAmplitude;W.na=na.nConfirmAutoMoves;W.tb=na.thresholdConfirmOffset;W.Ra=na.confirmMoveNoiseAmplitude;W.jb=na.nConfirmUnstitchMoves;W.Na=na.tiltPosAngleIfAmbiguousDetection;W.Sa=na.confirmScoreMinFactorDuringAutoMove;Fa.V();ia.label=!1;switch(R.current){case Ya.video:R.type===Oa.video&&R.time!==R.element.currentTime?(R.N.refresh(),R.time=R.element.currentTime):
R.type===Oa.Db&&R.element.needsUpdate&&(R.N.nd(R.element.arrayBuffer),R.element.needsUpdate=!1);switch(na.cutShader){case "median":H.Ea="s54";break;default:H.Ea="s53"}break;case Ya.pd:if(!R.ta){H.I=c.size.width;H.S=c.size.height;switch(na.cutShader){case "IOS":H.Ea="s56";A.M("s56",[{name:"u8",type:"2f",value:[1/H.I,1/H.S]}]);break;default:H.Ea="s53"}Ob(null);Wa()}R.N.nd(c.buffer)}a||(a=Ab.Zd()+fa.kb[0],Ab.kd());return a}function Rb(a,c){V.N.ea();A.set(H.Ea);Ua&&U.Fa&&A.T("u37",qa===ha.Oa?Ha:0);R.N.i(0);
A.qb("u41",V.o);aa.m(!1,!1);zb=a===c-1}function Sb(){Fa.Ne();Za&&(b.viewport(0,0,va.width,va.height),A.set("s55"),R.N.i(0),A.qb("u41",V.o),aa.m(!1,!1),Tb&&b.commit?b.commit():b.flush());return ia}var ra={Lf:function(a){return Math.ceil(Math.log2(a))},gg:function(a){return Math.log2(a)},cg:function(a){return 0===Math.log2(a)%1},Xe:function(a){var c=[0,0,0,0];a.forEach(function(d){c[0]+=d[0];c[1]+=d[1];c[2]+=d[2];c[3]+=d[3]});return c},Ca:function(a,c,d){return Math.min(Math.max(a,c),d)},$e:function(a){return a*
Math.PI/180},mg:function(a,c){c=Math.pow(10,c);return Math.round(a*c)/c},ng:function(a){return Math.round(1E6*a)/1E6},Mf:function(a,c){return(100*a/c).toFixed(3)},ma:function(a,c,d){return a*(1-d)+c*d},hg:function(a,c){return a[0]*(1-c)+a[1]*c},Hd:function(a,c){return ra.Ad(a-c)},Ad:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},ef:function(a,c){return Math.abs(ra.Hd(a,c))},Qe:function(a,c){return Math.atan2(Math.sin(a)+Math.sin(c),Math.cos(a)+Math.cos(c))}},ob=
{get:function(a,c,d){var e=new XMLHttpRequest;e.open("GET",a,!0);e.withCredentials=!1;e.onreadystatechange=function(){4===e.readyState&&(200===e.status||0===e.status?c(e.responseText):"undefined"!==typeof d&&d(e.status))};e.send()},Nf:function(a){return new Promise(function(c,d){ob.get(a,c,d)})},Jf:function(a,c,d){a+=d?"?"+ob.Md(d):"";ob.get(a,function(e){c(JSON.parse(e))})},jg:function(a,c,d){var e=new XMLHttpRequest;e.open("POST",a,!0);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");
e.onreadystatechange=function(){4!==e.readyState||200!==e.status&&0!==e.status||d(e.responseText)};e.send(c)},Md:function(a){return"string"===typeof a?a:Object.keys(a).map(function(c){return encodeURIComponent(c)+"="+encodeURIComponent(a[c])}).join("&")},xf:function(a,c){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){c(d.response)};d.send()}},fc={create:function(a,c){for(var d=Array(c),e=0;e<c;++e)d[e]=a;return d},af:function(a,c){for(var d=0;d<a.length;++d)c[d]=
a[d]},clone:function(a){for(var c=Array(a.length),d=0;d<a.length;++d)c[d]=a[d];return c},qg:function(a,c,d){a.forEach(function(e,m){c[m]=e*d})},Bg:function(a){for(var c=a.length-1;0<c;--c){var d=Math.floor(Math.random()*(c+1)),e=a[c];a[c]=a[d];a[d]=e}},Cg:function(a){return a.sort(function(c,d){return c-d})},Le:function(a){return Array.isArray(a)||a.constructor===Float32Array||a.constructor===Uint8Array}},Bb={Bb:function(a,c){if(0===c||"object"!==typeof a)return a;a=Object.assign({},a);c=void 0===
c||-1===c?-1:c-1;for(var d in a)a[d]=Bb.Bb(a[d],c);return a},df:function(a){return JSON.parse(JSON.stringify(a))}},xb={cc:function(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)},eg:function(a,c,d){return Math.min(Math.max((d-a)/(c-a),0),1)},sf:function(a,c,d,e){return Math.pow(Math.min(Math.max((e-a)/(c-a),0),1),d)},Ig:function(){return 0},ig:function(){return 1},fg:function(a){return a},pf:function(a){return a*a},uf:function(a){return a*(2-a)},kf:function(a){return.5>a?2*a*a:-1+
(4-2*a)*a},hf:function(a){return a*a*a},tf:function(a){return--a*a*a+1},jf:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},qf:function(a){return a*a*a*a},vf:function(a){return 1- --a*a*a*a},lf:function(a){return.5>a?8*a*a*a*a:1-8*--a*a*a*a},rf:function(a){return a*a*a*a*a},wf:function(a){return 1+--a*a*a*a*a},mf:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},gc={Qd:function(a,c,d){switch(a){case "relu":return d+"=max(vec4(0.,0.,0.,0.),"+c+");";case "elu":return d+"=mix(exp(-abs("+
c+"))-vec4(1.,1.,1.,1.),"+c+",step(0.,"+c+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+c+"))-vec4(0.1,0.1,0.1,0.1),"+c+",step(0.,"+c+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}},A=function(){function a(r,n,z){n=r.createShader(n);r.shaderSource(n,z);r.compileShader(n);return r.getShaderParameter(n,r.COMPILE_STATUS)?n:!1}function c(r,n,z){n=a(r,r.VERTEX_SHADER,n);z=a(r,r.FRAGMENT_SHADER,z);r===b&&q.push(n,z);var O=
r.createProgram();r.attachShader(O,n);r.attachShader(O,z);r.linkProgram(O);return O}function d(r){return["float","sampler2D","int"].map(function(n){return"precision "+r+" "+n+";\n"}).join("")}function e(r,n){n.C=n.C?!0:!1;if(!n.C){n.wa=n.wa||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}";n.rc=n.rc||["a0"];n.yb=n.yb||[2];n.precision=n.precision||F;n.id=v++;void 0!==n.fd&&(n.fd.forEach(function(f,G){n.g=n.g.replace(f,n.pb[G])}),
n.fd.splice(0));n.lc=0;n.yb.forEach(function(f){n.lc+=4*f});var z=d(n.precision);n.oa=c(r,z+n.wa,z+n.g);n.A={};n.j.forEach(function(f){n.A[f]=r.getUniformLocation(n.oa,f)});n.attributes={};n.Aa=[];n.rc.forEach(function(f){var G=r.getAttribLocation(n.oa,f);n.attributes[f]=G;n.Aa.push(G)});if(n.l){r.useProgram(n.oa);p=n;k=n.id;for(var O in n.l)r.uniform1i(n.A[O],n.l[O])}n.ta=!0}}function m(r){za.He(M);k!==r.id&&(M.R(),k=r.id,p=r,b.useProgram(r.oa),r.Aa.forEach(function(n){0!==n&&b.enableVertexAttribArray(n)}))}
function l(r,n,z){e(r,n,z);r.useProgram(n.oa);r.enableVertexAttribArray(n.attributes.a0);k=-1;return p=n}function t(){return{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",j:["u1"],l:{u1:0}}}var q=[],k=-1,p=null,v=0,E=!1,F="highp",u=["u1"],B=["u0"],C={u1:0},g={u0:0},L={u1:0,u2:1},D={u3:0},h={s0:t(),s1:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",j:u,l:C,precision:"lowp"},s2:{g:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
j:["u1","u2"],l:L},s3:{g:"uniform sampler2D u1;uniform vec2 u4,u5;varying vec2 vv0;void main(){vec2 a=vv0*u4+u5;gl_FragColor=texture2D(u1,a);}",j:["u1","u4","u5"],l:C,C:!0},s4:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",j:u,l:C},s5:{g:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",j:["u1","u2"],l:L},s6:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",
j:u,l:C},s7:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",j:u,l:C},s8:{g:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",j:["u0","u4"],l:g},s9:{g:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",j:["u0","u4"],l:g},s10:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
j:u,l:C},s11:{g:"uniform sampler2D u1,u6;uniform float u7;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u6,vv0);gl_FragColor=mix(b,a,u7*f);}",j:["u1","u6","u7"],l:{u1:0,u6:1}},s12:{g:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u8)+texture2D(u1,vv0+u8*vec2(1.,-1.))+texture2D(u1,vv0+u8*vec2(-1.,-1.))+texture2D(u1,vv0+u8*vec2(-1.,1.)));}",j:["u1","u8"],l:C},s13:{g:"uniform sampler2D u1;uniform vec4 u9;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u9);gl_FragColor=j(a);}",
j:["u1","u9"],l:C},s14:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",j:B,l:g,C:!0},s15:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",j:B,l:g},s16:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",j:B,l:g},
s17:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",j:B,l:g},s18:{g:"uniform sampler2D u0,u7,u10;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u7,vv0),d=texture2D(u10,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",j:["u0","u7","u10"],l:{u0:0,u7:1,u10:2},C:!0},s19:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",
j:B,l:g},s20:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",j:B,l:g,C:!0},s21:{g:"uniform sampler2D u0,u11;uniform float u12;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,e);float b=u12*u12;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",j:["u0","u11","u12"],l:{u0:0,u11:1},C:!0},s22:{g:"uniform sampler2D u1;uniform vec2 u13;varying vec2 vv0;void main(){float a=u13.x*u13.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u13.y),f=floor(u13.x*fract(b*u13.y)),g=(f*u13.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
j:["u1","u13"],l:C},s23:{g:"uniform sampler2D u14,u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u16,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u14,b),f=texture2D(u15,c);gl_FragColor=d*f;}",j:["u14","u15","u16"],l:{u15:0,u14:1,u16:2},C:!0},s24:{g:"uniform float u17,u18;uniform sampler2D u14,u15;varying vec2 vv0;void main(){vec2 c=fract(vv0*u17),a=vv0;float b=u17*u18;a=(.5+floor(b*vv0))/b;vec4 d=texture2D(u14,a),f=texture2D(u15,c);gl_FragColor=d*f;}",j:["u15","u14","u17","u18"],l:{u15:0,u14:1}},
s25:{g:"uniform float u17,u18;uniform sampler2D u14,u15,u19,u20,u21,u22;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u17,n=floor(i),b=i-n,d=vv0;float j=u17*u18;d=(.5+floor(j*vv0))/j;vec4 o=texture2D(u14,d),h=texture2D(u15,b),c=texture2D(u22,d);c*=255.;vec4 p=texture2D(u19,b),q=texture2D(u20,b),r=texture2D(u21,b),k=step(-g,-c),a=e-k,l=a*step(-e-g,-c);a*=e-l;vec4 m=a*step(-2.*e-g,-c);a*=e-m;vec4 s=a;h=k*h+l*p+m*q+s*r,gl_FragColor=o*h;}",j:"u14 u15 u17 u18 u22 u19 u20 u21".split(" "),
l:{u15:0,u14:1,u22:3,u19:4,u20:5,u21:6},C:!0},s26:{g:"uniform sampler2D u14,u15,u23;uniform float u17,u24,u25,u18;varying vec2 vv0;const vec2 j=vec2(1.,1.),k=vec2(0.,0.);void main(){vec2 b=floor(u24*vv0),c=u24*vv0-b;float d=u17/u24;vec2 f=floor(c*d),g=c*d-f,h=(b+g)/u24;float l=u24*u18/u17;vec2 m=l*f,a=(m+g*u25)/u18;a+=.25/u18;vec2 i=step(a,j)*step(k,a);vec4 n=texture2D(u14,h),o=texture2D(u15,a),p=n*o,q=texture2D(u23,h);gl_FragColor=(p*u25*u25+q)*i.x*i.y;}",j:"u14 u15 u17 u24 u25 u18 u23".split(" "),
l:{u15:0,u14:1,u23:2}},s27:{g:"uniform sampler2D u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u14,vv0),b=texture2D(u15,vv0);gl_FragColor=a*b;}",j:["u14","u15"],l:{u15:0,u14:1},C:!0},s28:{g:"uniform sampler2D u1,u23;uniform float u26;varying vec2 vv0;void main(){gl_FragColor=texture2D(u23,vv0)+u26*texture2D(u1,vv0);}",j:["u1","u23","u26"],l:{u1:0,u23:1}},s29:{g:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
j:u,l:C,precision:"lowp"},s30:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",j:["u1","u27"],l:C,precision:"lowp"},s31:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
j:["u1","u27"],l:C,precision:"lowp"},s32:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
j:["u1","u2","u28"],l:L,C:!0},s33:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u28,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",j:["u1","u2","u28"],l:L,C:!0},s34:{g:"uniform sampler2D u3;uniform vec2 u8;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u8*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u8*h),d=texture2D(u3,a+u8*i),j=texture2D(u3,a+u8),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
j:["u3","u8"],l:D},s35:{g:"uniform sampler2D u3;uniform vec2 u8;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u8*k),d=texture2D(u3,a+u8*l),g=texture2D(u3,a+u8),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u8*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u8*m),d=f(a+u8*2.),g=f(a+u8*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",j:["u3","u8"],l:D,C:!0},
s36:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",j:["u1"],l:C,precision:"lowp",C:!0},s37:{g:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u8)+2002./e*texture2D(u1,vv0-2.*u8)+3003./e*texture2D(u1,vv0-u8)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u8)+2002./e*texture2D(u1,vv0+2.*u8)+1001./e*texture2D(u1,vv0+3.*u8);gl_FragColor=a;}",j:["u8","u1"],l:C,precision:"lowp",
C:!0},s38:{g:"uniform sampler2D u1,u11,u29;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u11,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",j:["u1","u11","u29"],l:{u1:0,u11:1,u29:2},C:!0}},I={s39:{g:"uniform float u17,u30;uniform sampler2D u14,u15,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u23,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u17,xyTo=floor(vv0*u17+eps2);float weightSize=toSparsity*u17;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u17,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u14,uvWeight)*texture2D(u15,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
j:["u17","u14","u15","u23","u30"],pb:["1.1111","gl_FragColor\\*=2.2222;"]},s40:{g:"uniform float u17,u30,u18;uniform sampler2D u14,u15,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u23,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u18,xyTo=floor(vv0*u17+eps2);float weightSize=fromSparsity*u18;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u17;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u18,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u14,uvWeight)*texture2D(u15,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
j:"u17 u18 u14 u15 u23 u30".split(" "),pb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},x=null,K=null,M={fb:function(){return E},B:function(){if(!E){x=Bb.Bb(h,2);K=Bb.Bb(I,2);F="highp";b.getShaderPrecisionFormat&&(b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT),b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.LOW_FLOAT));for(var r in x)e(b,x[r],r);A.set("s0");b.enableVertexAttribArray(0);E=!0}},qc:function(r){r.forEach(function(n){M.pc(n)})},pc:function(r){x[r.id]=r;e(b,r,r.id)},Mc:function(r,
n,z){n||(n=r);x[n]=Object.create(K[r]);x[n].ie=!0;K[r].pb&&K[r].pb.forEach(function(O,f){x[n].g=x[n].g.replace(new RegExp(O,"g"),z[f])});e(b,x[n],n)},set:function(r){var n=x[r];n.C&&(n.C=!1,e(b,n,r));m(n)},Ja:function(r){return l(r,t(),"s41")},ac:function(r){return l(r,{g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",j:[],precision:F},"s42")},Od:function(r){return"undefined"===typeof x[r]?!1:x[r].ta},R:function(){-1!==k&&(k=-1,p.Aa.forEach(function(r){0!==r&&b.disableVertexAttribArray(r)}))},bc:function(){var r=
0;p.Aa.forEach(function(n,z){z=p.yb[z];b.vertexAttribPointer(n,z,b.FLOAT,!1,p.lc,r);r+=4*z})},Ld:function(){b.enableVertexAttribArray(0)},Ka:function(){M.rb(b)},rb:function(r){r.vertexAttribPointer(p.Aa[0],2,r.FLOAT,!1,8,0)},ug:function(r,n){b.uniform1i(p.A[r],n)},T:function(r,n){b.uniform1f(p.A[r],n)},pa:function(r,n,z){b.uniform2f(p.A[r],n,z)},vg:function(r,n){b.uniform2fv(p.A[r],n)},xg:function(r,n){b.uniform3fv(p.A[r],n)},wg:function(r,n,z,O){b.uniform3f(p.A[r],n,z,O)},Ie:function(r,n,z,O,f){b.uniform4f(p.A[r],
n,z,O,f)},qb:function(r,n){b.uniform4fv(p.A[r],n)},yg:function(r,n){b.uniformMatrix2fv(p.A[r],!1,n)},zg:function(r,n){b.uniformMatrix3fv(p.A[r],!1,n)},Ag:function(r,n){b.uniformMatrix4fv(p.A[r],!1,n)},M:function(r,n){M.set(r);n.forEach(function(z){switch(z.type){case "4f":b.uniform4fv(p.A[z.name],z.value);break;case "3f":b.uniform3fv(p.A[z.name],z.value);break;case "2f":b.uniform2fv(p.A[z.name],z.value);break;case "1f":b.uniform1f(p.A[z.name],z.value);break;case "1i":b.uniform1i(p.A[z.name],z.value);
break;case "mat2":b.uniformMatrix2fv(p.A[z.name],!1,z.value);break;case "mat3":b.uniformMatrix3fv(p.A[z.name],!1,z.value);break;case "mat4":b.uniformMatrix4fv(p.A[z.name],!1,z.value)}})},Kf:function(){return"lowp"},u:function(){M.R();b.disableVertexAttribArray(0);for(var r in x){var n=x[r];n.ta&&(n.ta=!1,b.deleteProgram(n.oa));n.ie&&delete x[r]}q.forEach(function(z){b.deleteShader(z)});q.splice(0);v=0;E=!1;p=null;k=-1}};return M}(),b=null,pb=function(){function a(u){console.log("ERROR in ContextFF: ",
u);return!1}function c(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(u){function B(){Ja.u();da.reset();g.getExtension("WEBGL_lose_context").loseContext()}if(c())return!1;var C=document.createElement("canvas");C.setAttribute("width",5);C.setAttribute("height",5);var g=null;try{g=C.getContext("webgl2",u)}catch(L){return!1}if(!g)return!1;e(g);da.zc(g);u=da.Cb(g);if(!u.aa&&!u.ba)return B(),!1;u=Ja.uc(g,u);B();return u?!0:!1}function e(u){u.clearColor(0,0,0,0);
u.disable(u.DEPTH_TEST);u.disable(u.BLEND);u.disable(u.DITHER);u.disable(u.STENCIL_TEST);u.disable(u.CULL_FACE);u.GENERATE_MIPMAP_HINT&&u.hint(u.GENERATE_MIPMAP_HINT,u.FASTEST);u.disable(u.SAMPLE_ALPHA_TO_COVERAGE);u.disable(u.SAMPLE_COVERAGE);u.depthFunc(u.LEQUAL);u.clearDepth(1)}var m=null,l=null,t=null,q=null,k=!0,p=null,v=null,E=[],F={G:function(){return m.width},X:function(){return m.height},Bf:function(){return m},zf:function(){return b},ca:function(){return k},flush:function(){b.flush()},Uf:function(){Fa.V();
Z.reset();aa.reset();A.R();A.Ld();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);aa.Pa();A.Ka()},Sd:function(){p||(p=new Uint8Array(m.width*m.height*4));b.readPixels(0,0,m.width,m.height,b.RGBA,b.UNSIGNED_BYTE,p);return p},Df:function(){return m.toDataURL("image/jpeg")},Ef:function(){Fa.U();l||(l=document.createElement("canvas"),t=l.getContext("2d"));l.width=m.width;l.height=m.height;for(var u=F.Sd(),B=t.createImageData(l.width,l.height),C=l.width,g=l.height,L=B.data,D=0;D<g;++D)for(var h=g-D-1,I=0;I<
C;++I){var x=4*(D*C+I),K=4*(h*C+I);L[x]=u[K];L[x+1]=u[K+1];L[x+2]=u[K+2];L[x+3]=u[K+3]}t.putImageData(B,0,0);return l.toDataURL("image/png")},Cf:function(u){!l&&u&&(l=document.createElement("canvas"),t=l.getContext("2d"));var B=u?l:document.createElement("canvas");B.width=m.width;B.height=m.height;(u?t:B.getContext("2d")).drawImage(m,0,0);return B},B:function(u){u=Object.assign({Jb:null,Ub:null,Ta:null,xc:null,width:512,height:512,premultipliedAlpha:!1,fe:!0,antialias:!1,debug:!1,cf:!1},u);u.Jb?(b=
u.Jb,m=u.Jb.canvas):u.xc&&!u.Ta?m=document.getElementById(u.xc):u.Ta&&(m=u.Ta);m||(m=document.createElement("canvas"));m.width=u.width;m.height=u.height;if(b)k=b instanceof WebGL2RenderingContext;else{k=!0;var B={antialias:u.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:u.premultipliedAlpha,stencil:!1,depth:u.fe,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(B.antialias=!1);var C=
d(B);C||!B.antialias||c()||(B.antialias=!1,C=d(B));C&&(b=m.getContext("webgl2",B));b?k=!0:((b=m.getContext("webgl",B))||(b=m.getContext("experimental-webgl",B)),k=!1)}if(!b)return a("WebGL1 and 2 are not enabled");u.Ub&&m.addEventListener&&(q=b.getExtension("WEBGL_lose_context"))&&(v=u.Ub,m.addEventListener("webglcontextlost",v,!1));if(!da.B())return a("Not enough GL capabilities");e(b);A.B();aa.B();Ja.uc(b,da.Rd());E.forEach(function(g){g(b)});E.splice(0);return!0},Ue:function(){return new Promise(function(u){b?
u(b):E.push(u)})},u:function(){b&&(da.u(),A.u(),Ja.u());q&&v&&(m.removeEventListener("webglcontextlost",v,!1),q=v=null);b=p=t=l=m=null;E.splice(0)}};return F}(),za=function(){function a(){null===c&&("undefined"!==typeof A?c=A:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;return{reset:function(){c=null},He:function(d){c!==d&&(c&&c.R(),c=d)},fb:function(){return c.fb()},Ka:function(){return c.Ka()},rb:function(d){return c.rb(d)},bc:function(){return c.bc()},R:function(){return c.R()},set:function(d){a();
return c.set(d)},Ja:function(d){a();return c.Ja(d)},ac:function(d){a();return c.ac(d)}}}(),Qa=function(){function a(f){b.bindTexture(b.TEXTURE_2D,f)}function c(f){r[0]=f;f=n[0];var G=f>>16&32768,J=f>>12&2047,P=f>>23&255;return 103>P?G:142<P?G|31744|((255==P?0:1)&&f&8388607):113>P?(J|=2048,G|(J>>114-P)+(J>>113-P&1)):G=(G|P-112<<10|J>>1)+(J&1)}function d(f){var G=new Uint16Array(f.length);f.forEach(function(J,P){G[P]=c(J)});return G}function e(){if(null!==z.Kb)return z.Kb;var f=l(d([.5,.5,.5,.5]),!0);
return null===f?!0:z.Kb=f}function m(){if(null!==z.Lb)return z.Lb;var f=l(new Uint8Array([127,127,127,127]),!1);return null===f?!0:z.Lb=f}function l(f,G){if(!za.fb()||!C)return null;var J=null,P=Math.sqrt(f.length/4);try{var ba=b.getError();if("FUCKING_BIG_ERROR"===ba)return!1;J=O.instance({isFloat:!1,P:G,array:f,width:P});ba=b.getError();if(ba!==b.NO_ERROR)return!1}catch(Aa){return!1}oa.U();b.viewport(0,0,P,P);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);za.set("s0");J.sc(0);pa.m(!0,!0);f=4*
P*P;G=new Uint8Array(f);b.readPixels(0,0,P,P,b.RGBA,b.UNSIGNED_BYTE,G);P=!0;for(ba=0;ba<f;++ba)P=P&&3>Math.abs(G[ba]-127);J.remove();oa.V();return P}var t=0,q=null,k=0,p=null,v=null,E=null,F=null,u=null,B=null,C=!1,g=[],L={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,D:null,Lc:null,he:!1,P:!1,ja:null,ib:4,Pb:0},D=!1,h=null,I=null,x=[[1,0,0,0],[0,1,0,0],[0,0,1,0],
[0,0,0,1]],K=!1,M=!1,r=new Float32Array(1),n=new Int32Array(r.buffer),z={Kb:null,Lb:null},O={B:function(){C||(u=[b.RGBA,null,b.RGBA,b.RGBA],B=[b.RGBA,null,b.RGBA,b.RGBA],q=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7],K="undefined"!==typeof JEContext,M="undefined"!==typeof da,K&&JEContext.dg()&&q.push(b.TEXTURE8,b.TEXTURE9),p=[-1,-1,-1,-1,-1,-1,-1,-1],F=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT],C=!0)},ce:function(){if(!v){for(var f=new Float32Array(16384),G=0;16384>
G;++G)f[G]=2*Math.random()-1;v={random:O.instance({isFloat:!0,isPot:!0,array:f,width:64}),md:O.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}O.Pe()},Sf:function(){return v.md},Pe:function(){F[1]=da.Gb(b)},Fe:function(){B=u=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},bd:function(f){A.set("s1");oa.U();var G=f.G(),J=f.X();b.viewport(0,0,G,J);f.i(0);pa.m(!1,!1)},kg:function(f,G){O.bd(f);b.readPixels(0,0,f.G(),f.X(),b.RGBA,b.UNSIGNED_BYTE,G)},lg:function(f,G){O.bd(f);return da.Zb(0,0,f.G(),
f.X(),G)},Gc:function(f,G,J,P,ba,Aa,Ba){f.activeTexture(f.TEXTURE0);var Ka=f.createTexture();f.bindTexture(f.TEXTURE_2D,Ka);ba=ba instanceof Float32Array?ba:new Float32Array(ba);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,Aa);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,
J,P,0,f.RGBA,f.FLOAT,ba);f.bindTexture(f.TEXTURE_2D,null);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!1);Ba&&(oa.V(),A.Ja(f));f.viewport(0,0,J,P);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,G,0);f.bindTexture(f.TEXTURE_2D,Ka);Ba?pa.m(!0,!0):aa.Xa(f);f.deleteTexture(Ka);C&&(p[0]=-1,E=null,t=0)},xb:function(f){f!==t&&(b.activeTexture(q[f]),t=f)},instance:function(f){var G;function J(){S=void 0!==w.D.videoWidth?w.D.videoWidth:w.D.width;T=void 0!==w.D.videoHeight?w.D.videoHeight:w.D.height}
function P(y){var Q=b.getError();if("FUCKING_BIG_ERROR"===Q)return!1;b.texImage2D(b.TEXTURE_2D,0,la,ja,ka,y);Q=b.getError();Q!==b.NO_ERROR&&ja!==b.RGBA&&(ja=b.RGBA,b.texImage2D(b.TEXTURE_2D,0,la,ja,ka,y));return!0}function ba(){if(!Ub){a(wa);Ga&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,Ga);w.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,w.isMirrorX?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,w.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,
b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));w.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.Gf().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.Re);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,w.isLinear?b.LINEAR:b.NEAREST);w.isLinear?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,w.isMipmap&&!Sa?b.NEAREST_MIPMAP_LINEAR:b.LINEAR):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,w.isMipmap&&!Sa?b.NEAREST_MIPMAP_NEAREST:
b.NEAREST);ja=u[w.ib-1];la=B[w.ib-1];ka=F[Cb];if(da.ca()){var y=da.Td();ja===b.RGBA&&ka===b.FLOAT?w.isMipmap||w.isLinear?la=Ja.Vd(b):da.vc()?y&&(la=y):la=b.RGBA16F||b.RGBA:ja===b.RGB&&ka===b.FLOAT&&y&&(la=y,ja=b.RGBA)}if(w.P&&!w.isFloat||w.isFloat&&w.isMipmap&&Ja.le())la=da.Ud(),ka=da.Gb(b);w.Pb&&(qb=w.Pb);w.isSrgb&&4===w.ib&&(ja=JEContext.Qf());if(w.D)P(w.D);else if(w.url)P(Pa);else if(xa){y=xa;try{"FUCKING_BIG_ERROR"!==b.getError()&&(b.texImage2D(b.TEXTURE_2D,0,la,S,T,0,ja,ka,y),b.getError()!==
b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,la,S,T,0,ja,ka,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,S,T,0,b.RGBA,b.UNSIGNED_BYTE,null)))}catch(sc){b.texImage2D(b.TEXTURE_2D,0,la,S,T,0,ja,ka,null)}w.isKeepArray||(xa=null)}else y=b.getError(),"FUCKING_BIG_ERROR"!==y&&(b.texImage2D(b.TEXTURE_2D,0,la,S,T,0,ja,ka,null),y=b.getError(),y!==b.NO_ERROR&&(ja=b.RGBA,w.P&&ka!==b.FLOAT&&(ka=b.FLOAT,b.texImage2D(b.TEXTURE_2D,0,la,S,T,0,ja,ka,null))));if(w.isMipmap)if(!Sa&&ca)ca.Fb(),rb=
!0;else if(Sa){y=Math.log2(Math.min(S,T));$a=Array(1+y);$a[0]=wa;for(var Q=1;Q<=y;++Q){var ma=Math.pow(2,Q),X=S/ma;ma=T/ma;var Ta=b.createTexture();a(Ta);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,la,X,ma,0,ja,ka,null);a(null);$a[Q]=Ta}rb=!0}a(null);p[t]=-1;Ga&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);fb=!0;w.ja&&ca&&(w.ja(ca),w.ja=null)}}function Aa(){for(var y=S*T,Q=2*y,ma=3*y,X=0;X<y;++X)Ca[0][X]=
gb[X],Ca[1][X]=gb[X+y],Ca[2][X]=gb[X+Q],Ca[3][X]=gb[X+ma]}function Ba(){var y=S*T*4;La=[new Uint8Array(y),new Uint8Array(y),new Uint8Array(y),new Uint8Array(y)];Ca=[new Float32Array(La[0].buffer),new Float32Array(La[1].buffer),new Float32Array(La[2].buffer),new Float32Array(La[3].buffer)];sb=new Uint8Array(4*y);gb=new Float32Array(sb.buffer);hb=!0}function Ka(){G=new Uint8Array(S*T*4);Vb=new Float32Array(G.buffer);Db=!0}var w=Object.assign({},L,f),ib=k++;null===w.isFlipY&&(w.isFlipY=w.url?!0:!1);
w.data&&(w.array="string"===typeof w.data?ya(w.data):w.isFloat?new Float32Array(w.data):new Uint8Array(w.data),w.isFlipY=!1);var Cb=0,Wb=w.D?!0:!1,jb=null,Eb=null,Xb=!1;w.P=w.P||w.isFloat;w.P&&(Cb=1);!w.he&&w.isFloat&&M&&!da.vc()&&(w.isFloat=!1);w.isFloat&&(Cb=2);w.isAnisotropicFiltering&&K&&!JEContext.Xf()&&(w.isAnisotropicFiltering=!1);var wa=w.Lc||b.createTexture(),Pa=null,xa=!1,S=0,T=0,fb=!1,Ub=!1,hb=!1,Ca=null,La=null,sb=null,gb=null,la=null,ja=null,ka=null,Ga=w.isFlipY,hc=(f=w.P&&w.isMipmap)&&
Ja.xd(),Sa=f&&hc?!0:!1,$a=null,qb=-1,rb=!1;var Db=!1;var Vb=G=null;w.width&&(S=w.width,T=w.height?w.height:S);var ca={get:function(){return wa},G:function(){return S},X:function(){return T},Tf:function(){return w.url},Yf:function(){return w.isFloat},$f:function(){return w.P},ag:function(){return w.isLinear},Fb:function(){b.generateMipmap(b.TEXTURE_2D)},vd:function(y,Q){Sa?(y||(y=ca.Kc()),O.xb(Q),a($a[y]),p[Q]=-1):ca.i(Q)},Kc:function(){-1===qb&&(qb=Math.log(S)/Math.log(2));return qb},Pd:function(y){if(Sa){y||
(y=ca.Kc());A.set("s12");O.xb(0);for(var Q=S,ma=T,X=1;X<=y;++X)Q/=2,ma/=2,A.pa("u8",.25/Q,.25/ma),b.viewport(0,0,Q,ma),a($a[X-1]),b.framebufferTexture2D(oa.$a(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,$a[X],0),pa.m(!1,1===X);p[0]=-1}else ca.Fb()},tg:function(y){(Wb=!fc.Le(y))?(xa=null,w.D=y,J()):xa=y},i:function(y){if(!fb)return!1;O.xb(y);if(p[y]===ib)return!1;a(wa);p[y]=ib;return!0},sc:function(y){b.activeTexture(q[y]);t=y;a(wa);p[y]=ib},v:function(){E=ca;b.framebufferTexture2D(oa.$a(),b.COLOR_ATTACHMENT0,
b.TEXTURE_2D,wa,0)},ea:function(){E=ca;b.viewport(0,0,S,T);b.framebufferTexture2D(oa.$a(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,wa,0)},kc:O.kc,De:function(y,Q){S=y;T=Q},resize:function(y,Q){ca.De(y,Q);ba()},clone:function(y){y=O.instance({width:S,height:T,P:w.P,isFloat:w.isFloat,isLinear:w.isLinear,isMirrorY:w.isMirrorY,isFlipY:y?!Ga:Ga,isPot:w.isPot});za.set("s0");oa.V();y.v();b.viewport(0,0,S,T);ca.i(0);pa.m(!0,!0);return y},Je:function(){b.viewport(0,0,S,T)},remove:function(){b.deleteTexture(wa);Ub=
!0;g.splice(g.indexOf(ca),1);ca=null},refresh:function(){ca.sc(0);Ga&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Wb?b.texImage2D(b.TEXTURE_2D,0,la,ja,ka,w.D):b.texImage2D(b.TEXTURE_2D,0,la,S,T,0,ja,ka,xa);Ga&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},ad:function(){hb||Ba();b.readPixels(0,0,S,4*T,b.RGBA,b.UNSIGNED_BYTE,sb);Aa();return Ca},ye:function(){hb||Ba();return da.Zb(0,0,S,4*T,sb).then(function(){Aa();return Ca})},Ae:function(){Db||Ka();b.readPixels(0,0,S,T,b.RGBA,b.UNSIGNED_BYTE,G);return Vb},
ze:function(){Db||Ka();return da.Zb(0,0,S,T,G)},yc:function(y){oa.U();A.set("s13");ca.i(0);if(y)b.viewport(0,0,S,T),A.Ie("u9",.25,.25,.25,.25),pa.m(!1,!0);else for(y=0;4>y;++y)b.viewport(0,T*y,S,T),A.qb("u9",x[y]),pa.m(!1,0===y)},nd:function(y){var Q=ka===F[0]&&!m();a(wa);Ga&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Q?(Xb||(jb=document.createElement("canvas"),jb.width=S,jb.height=T,Eb=jb.getContext("2d"),Eb.createImageData(S,T),Xb=!0),null.data.set(y),Eb.putImageData(null,0,0),b.texImage2D(b.TEXTURE_2D,
0,la,ja,ka,jb)):b.texImage2D(b.TEXTURE_2D,0,la,S,T,0,ja,ka,y);p[t]=ib;Ga&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Hg:function(y,Q){a(wa);Q&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,la,ja,ka,y);p[t]=ib;Q&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},rg:function(y,Q){var ma=S*T,X=4*ma;y=w.P?y?"RGBE":"JSON":"RGBA";Q&&(y=Q);Q=da.ca()&&!1;var Ta=null;switch(y){case "RGBE":Ta="s43";break;case "JSON":Ta=Q?"s0":"s13";break;case "RGBA":case "RGBAARRAY":Ta="s7"}hb||("RGBA"===y||"RGBE"===
y||"RGBAARRAY"===y?(La=new Uint8Array(X),hb=!0):"JSON"!==y||Q||Ba());oa.U();A.set(Ta);ca.i(0);X=null;if("RGBA"===y||"RGBE"===y||"RGBAARRAY"===y){b.viewport(0,0,S,T);pa.m(!0,!0);b.readPixels(0,0,S,T,b.RGBA,b.UNSIGNED_BYTE,La);if("RGBAARRAY"===y)return{data:La};D||(h=document.createElement("canvas"),I=h.getContext("2d"),D=!0);h.width=S;h.height=T;ma=I.createImageData(S,T);ma.data.set(La);I.putImageData(ma,0,0);X=h.toDataURL("image/png")}else if("JSON"===y)if(Q)X=new Float32Array(ma),b.viewport(0,0,
S,T),pa.m(!0,!0),b.readPixels(0,0,S,T,b.RGBA,b.FLOAT,X);else{for(X=0;4>X;++X)b.viewport(0,T*X,S,T),A.qb("u9",x[X]),pa.m(!X,!X);ca.ad();X=Array(ma);for(Q=0;Q<ma;++Q)X[4*Q]=Ca[0][Q],X[4*Q+1]=Ca[1][Q],X[4*Q+2]=Ca[2][Q],X[4*Q+3]=Ca[3][Q]}return{format:y,data:X,width:S,height:T,isMirrorY:w.isMirrorY,isFlipY:"RGBA"===y?w.isFlipY:!w.isFlipY}}};w.isMipmap&&!Sa&&fb&&!rb&&(ca.Fb(),rb=!0);if(w.url)a(wa),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),Pa=new Image,Pa.bf="Anonymous",Pa.crossOrigin=
"Anonymous",Pa.src=w.url,Pa.onload=function(){S=Pa.width;T=Pa.height;ba()};else if(w.D){var Yb=function(){J();S?ba():setTimeout(Yb,1)};Yb()}else w.array?(w.P&&!w.isFloat?w.array instanceof Uint16Array?(xa=w.array,ba()):e()?(xa=d(w.array),ba()):(ba(),O.Gc(b,wa,ca.G(),ca.X(),w.array,Ga,!0)):(xa=w.isFloat?w.array instanceof Float32Array?w.array:new Float32Array(w.array):w.array instanceof Uint8Array?w.array:new Uint8Array(w.array),ba()),w.isKeepArray||(xa&&xa!==w.array&&(xa=null),delete w.array)):w.Lc?
fb=!0:ba();ca.Pf=ca.G;w.ja&&fb&&(w.ja(ca),w.ja=null);g.push(ca);return ca},U:function(f){f!==t&&(b.activeTexture(q[f]),t=f);p[f]=-1;a(null)},Te:function(f){v.random.i(f)},kc:function(){E=null;b.framebufferTexture2D(oa.$a(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},reset:function(){0!==t&&b.activeTexture(q[0]);for(var f=0;f<q.length;++f)p[f]=-1;t=-1},og:function(){t=-1},Me:function(){for(var f=0;f<q.length;++f)O.U(f)},Ic:function(){v&&(v.random.remove(),v.md.remove())},Fg:function(f,G){if("RGBA"===
f.format||"RGBE"===f.format){var J=new Image;J.src=f.data;J.onload=function(){O.instance({isMirrorY:f.isMirrorY,isFlipY:f.isFlipY,isFloat:!1,D:J,ja:function(P){if("RGBA"===f.format)G(P);else{var ba=f.width,Aa=f.height,Ba=O.instance({isMirrorY:f.isMirrorY,isFloat:!0,width:ba,height:Aa,isFlipY:f.isFlipY});oa.V();b.viewport(0,0,ba,Aa);A.set("s44");Ba.v();P.i(0);pa.m(!0,!0);O.U(0);G(Ba);da.flush();setTimeout(P.remove,50)}}})}}else"JSON"===f.format?G(O.instance({isFloat:!0,isFlipY:f.isFlipY,width:f.width,
height:f.height,array:new Float32Array(f.data)})):G(!1)},Bd:d,u:function(){E&&(Fa.V(),O.kc(),Fa.U());O.Me();g.slice(0).forEach(function(f){f.remove()});g.splice(0);C=!1;k=0;"undefined"!==typeof Ja&&Ja.u();v=null}};return O}(),pa=function(){function a(k){var p={Z:null,L:null};p.Z=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,p.Z);k.bufferData(k.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),k.STATIC_DRAW);p.L=k.createBuffer();k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,p.L);k.bufferData(k.ELEMENT_ARRAY_BUFFER,
new Uint16Array([0,1,2]),k.STATIC_DRAW);return p}var c=null,d=0,e=!1,m=[],l=-2,t=-2,q={reset:function(){t=l=-2},B:function(){e||(c=a(b),q.Pa(),e=!0)},instance:function(k){var p=d++,v=k.L?k.L.length:0,E="undefined"===typeof k.mode?b.STATIC_DRAW:k.mode,F=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,F);b.bufferData(b.ARRAY_BUFFER,k.Z instanceof Float32Array?k.Z:new Float32Array(k.Z),E);l=p;var u=null,B=null,C=null;if(k.L){u=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,u);var g=null;65536>k.L.length?
(g=Uint16Array,B=b.UNSIGNED_SHORT,C=2):(g=Uint32Array,B=b.UNSIGNED_INT,C=4);g=k.L instanceof g?k.L:new g(k.L);b.bufferData(b.ELEMENT_ARRAY_BUFFER,g,E);t=p}var L={wd:function(D){l!==p&&(b.bindBuffer(b.ARRAY_BUFFER,F),l=p);D&&za.bc()},td:function(){t!==p&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,u),t=p)},bind:function(D){L.wd(D);L.td()},ff:function(){b.drawElements(b.TRIANGLES,v,B,0)},gf:function(D,h){b.drawElements(b.TRIANGLES,D,B,h*C)},remove:function(){b.deleteBuffer(F);k.L&&b.deleteBuffer(u);L=null}};
m.push(L);return L},Pa:function(){-1!==l&&(b.bindBuffer(b.ARRAY_BUFFER,c.Z),l=-1);-1!==t&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.L),t=-1)},m:function(k,p){k&&pa.Pa();p&&za.Ka();b.drawElements(b.TRIANGLES,3,b.UNSIGNED_SHORT,0)},Xa:function(k){k=k||b;var p=a(k);k.bindBuffer(k.ARRAY_BUFFER,p.Z);k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,p.L);za.rb(k);k.clear(k.COLOR_BUFFER_BIT);k.drawElements(k.TRIANGLES,3,k.UNSIGNED_SHORT,0);k.flush();k.bindBuffer(k.ARRAY_BUFFER,null);k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,null);
k.deleteBuffer(p.Z);k.deleteBuffer(p.L);q.reset();e&&(q.Pa(),za.Ka())},Ic:function(){var k=b,p=c;k.deleteBuffer(p.Z);k.deleteBuffer(p.L)},u:function(){q.Ic();m.forEach(function(k){k.remove()});b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);q.reset();e=!1;m.splice(0);d=0}};return q}(),oa=function(){var a=null,c=null,d=null,e=!1,m=[],l={K:-2,Fc:1},t={fb:function(){return e},B:function(){if(!e){a=b.createFramebuffer();var q=da.ca();c=q&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:
b.FRAMEBUFFER;d=q&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;e=!0}},Hf:function(){return c},Wd:function(){return d},$a:function(){return b.FRAMEBUFFER},Of:function(){return l},yf:function(){return a},instance:function(q){void 0===q.Pc&&(q.Pc=!1);var k=q.N?q.N:null,p=q.width,v=void 0!==q.height?q.height:q.width,E=a,F=null,u=!1,B=!1,C=0;k&&(p=p?p:k.G(),v=v?v:k.X());var g={gd:function(){u||(E=b.createFramebuffer(),u=!0,C=l.Fc++)},rd:function(){g.gd();g.v();F=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,
F);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,p,v);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,F);b.clearDepth(1)},bind:function(L,D){C!==l.K&&(b.bindFramebuffer(c,E),l.K=C);k&&k.v();D&&b.viewport(0,0,p,v);L&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},Se:function(){C!==l.K&&(b.bindFramebuffer(c,E),l.K=C)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},Ye:function(){b.clear(b.COLOR_BUFFER_BIT)},Ze:function(){b.clear(b.DEPTH_BUFFER_BIT)},Je:function(){b.viewport(0,
0,p,v)},v:function(){C!==l.K&&(b.bindFramebuffer(c,E),l.K=C)},rtt:function(L){k=L;l.K!==C&&(b.bindFramebuffer(b.FRAMEBUFFER,E),l.K=C);L.v()},U:function(){b.bindFramebuffer(c,null);l.K=-1},resize:function(L,D){p=L;v=D;F&&(b.bindRenderbuffer(b.RENDERBUFFER,F),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,p,v))},remove:function(){E===a||B||(b.bindFramebuffer(c,E),b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0),F&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,
null),b.bindFramebuffer(c,null),b.deleteFramebuffer(E),F&&b.deleteRenderbuffer(F));B=!0}};q.Pc&&g.rd();m.push(g);return g},U:function(){b.bindFramebuffer(c,null);l.K=-1},Ne:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);da.hd();l.K=-1},reset:function(){l.K=-2},V:function(){0!==l.K&&(b.bindFramebuffer(c,a),l.K=0)},clear:function(){da.hd();b.clear(b.COLOR_BUFFER_BIT)},u:function(){t.U();m.forEach(function(q){q.remove()});null!==a&&(b.deleteFramebuffer(a),a=null);
t.reset();e=!1;m.splice(0);l.Fc=1}};return t}(),da=function(){function a(){q="undefined"===typeof pb?JEContext:pb;k=!0}function c(h,I){for(var x=0;x<h.length;++x){var K=I.getExtension(h[x]);if(K)return K}return null}function d(){null!==g.vb&&(clearTimeout(g.vb),g.vb=null);g.ua=!1}function e(h){if(0===g.ka.length){g.la=b.PIXEL_PACK_BUFFER;g.ka.splice(0);g.ab.splice(0);for(var I=0;I<g.Da;++I)g.ka.push(b.createBuffer()),g.ab.push(-1);g.$=0;g.Rb=0}b.bindBuffer(g.la,g.ka[g.$]);h.byteLength!==g.ab[g.$]&&
(b.bufferData(g.la,h.byteLength,b.STREAM_READ),g.ab[g.$]=h.byteLength);g.Vf=!0}function m(){b.bindBuffer(g.la,null)}function l(){g.ra.forEach(function(h){b.deleteSync(h)});g.ra.splice(0)}function t(){g.$=(g.$+1)%g.Da;++g.Rb}var q=null,k=!1,p={Qc:!1,ec:null,fc:null,Sc:!1,ke:!1,hc:null,Tc:!1,ic:null,Rc:!1,zb:null,de:!1,Ab:null,ee:!1},v=null,E={aa:!0,ba:!0,Eb:!0,$c:!1},F=null,u=!0,B=null,C=null,g={Cd:1,Da:-1,$:0,Rb:0,ua:!1,ka:[],ra:[],ab:[],la:null,vb:null},L="undefined"===typeof window?{}:window,D=
{B:function(){if(k)return!0;D.reset();k||a();var h=b;if(!v.Qc){v.ec=D.Cc(h);L.GL_EXT_FLOAT=v.ec;v.Sc=v.ec?!0:!1;if(v.Sc||D.ca())v.fc=D.Dc(h),v.ke=v.fc?!0:!1,L.GL_EXT_FLOATLINEAR=v.fc;v.Qc=!0}if(!v.Rc){v.hc=D.Wa(h);v.hc&&(v.Tc=!0,L.GL_EXT_HALFFLOAT=v.hc);if(v.Tc||D.ca())v.ic=D.Ec(h),L.GL_EXT_HALFFLOATLINEAR=v.ic;v.Wf=v.ic?!0:!1;v.Rc=!0}v.zb=D.Ac(h);v.de=v.zb?!0:!1;L.GL_EXT_COLORBUFFERFLOAT=v.zb;v.Ab=D.Bc(h);v.ee=v.Ab?!0:!1;L.GL_EXT_COLORBUFFERHALFFLOAT=v.Ab;oa.B();Qa.B();if(!D.Ed())return!1;pa.B();
Qa.ce();return!0},reset:function(){v=Object.assign({},p);F=Object.assign({},E)},G:function(){k||a();return q.G()},X:function(){k||a();return q.X()},ca:function(){k||a();return q.ca()},zc:function(h){D.Ac(h);D.Bc(h);D.Cc(h);D.Dc(h);D.Wa(h);D.Ec(h)},Ac:c.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),Bc:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),Cc:c.bind(null,["OES_texture_float","MOZ_OES_texture_float",
"WEBKIT_OES_texture_float"]),Dc:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),Wa:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),Ec:c.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),Gb:function(h){var I=D.Wa(h);return I&&I.HALF_FLOAT_OES?I.HALF_FLOAT_OES:h.HALF_FLOAT||h.FLOAT},Td:function(){return C||b.RGBA32F||b.RGBA},
Ud:function(){return B||b.RGBA16F||b.RGBA},Rd:function(){return F},vc:function(){return F.aa},We:function(){return F.ba},Ve:function(){return F.Eb},yd:function(){return F.$c&&u},Dg:function(h){u=h;!h&&g.ua&&(l(),b.bindBuffer(g.la,null),g.ua=!1)},bg:function(){return g.ua},sb:function(h,I,x){function K(){h.bindTexture(h.TEXTURE_2D,null);h.bindFramebuffer(M,null);h.deleteTexture(z);h.deleteFramebuffer(n)}var M=h.FRAMEBUFFER,r=h.NEAREST,n=h.createFramebuffer();h.bindFramebuffer(M,n);var z=h.createTexture();
h.activeTexture(h.TEXTURE0);h.bindTexture(h.TEXTURE_2D,z);h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,r);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,r);h.texImage2D(h.TEXTURE_2D,0,I,3,3,0,h.RGBA,x,null);h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,z,0);if(h.checkFramebufferStatus(h.READ_FRAMEBUFFER||
h.FRAMEBUFFER)!==h.FRAMEBUFFER_COMPLETE)return K(),!1;za.ac(h);h.clearColor(0,0,0,0);h.viewport(0,0,3,3);h.disable(h.DEPTH_TEST);h.clear(h.COLOR_BUFFER_BIT);pa.Xa(h);h.bindFramebuffer(M,null);za.Ja(h);h.activeTexture(h.TEXTURE0);h.bindTexture(h.TEXTURE_2D,z);pa.Xa(h);I=new Uint8Array(36);h.readPixels(0,0,3,3,h.RGBA,h.UNSIGNED_BYTE,I);K();for(x=0;36>x;++x)if(3!==x%4&&3<Math.abs(I[x]-127))return!1;return!0},Cb:function(h){var I={aa:!1,ba:!1};h.disable(h.BLEND);h.clearColor(0,0,0,0);h.clear(h.COLOR_BUFFER_BIT);
h.RGBA32F&&D.sb(h,h.RGBA32F,h.FLOAT)&&(I.aa=!0,C=h.RGBA32F);!I.aa&&D.sb(h,h.RGBA,h.FLOAT)&&(I.aa=!0,C=h.RGBA);var x=D.Gb(h);B=null;h.RGBA16F&&D.sb(h,h.RGBA16F,x)&&(I.ba=!0,B=h.RGBA16F);!I.ba&&D.sb(h,h.RGBA,x)&&(I.ba=!0,B=h.RGBA);return I},Fd:function(){var h=oa.instance({width:2});h.gd();var I=Qa.instance({width:2,isFloat:!0,ib:3});h.v();I.v();D.flush();b.checkFramebufferStatus(oa.Wd())!==b.FRAMEBUFFER_COMPLETE?(Qa.Fe(),F.Eb=!1):F.Eb=!0;h.remove();I.remove()},Gd:function(){var h=!1;D.ca()&&(h="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(I){return"undefined"!==
typeof b[I]}));F.$c=h},Ed:function(){var h=D.Cb(b);Object.assign(F,h);if(!F.aa&&!F.ba)return!1;D.Fd();D.Gd();return!0},Be:function(h,I,x,K,M){b.readPixels(h,I,x,K,b.RGBA,b.UNSIGNED_BYTE,M);return Promise.resolve(M,!1)},Zb:function(h,I,x,K,M,r,n){if(!D.yd())return D.Be(h,I,x,K,M);g.Da=n||g.Cd;e(M);b.readPixels(h,I,x,K,b.RGBA,b.UNSIGNED_BYTE,0);g.ra[g.$]=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);D.flush();var z=!1;return new Promise(function(O,f){function G(){if(!g.ua)return d(),m(),t(),f(),!1;var J=
(g.$+1)%g.Da;switch(b.clientWaitSync(g.ra[J],0,0)){case b.TIMEOUT_EXPIRED:case b.WAIT_FAILED:break;default:return d(),b.deleteSync(g.ra[J]),g.ra[J]=null,b.bindBuffer(g.la,g.ka[J]),b.getBufferSubData(g.la,0,M),m(),t(),O(M,z),!0}g.vb=setTimeout(G,0);return!1}d();g.Rb+1<g.Da?(m(),t(),O(M,!1)):(g.ua=!0,G()||!r||z||(z=!0,r()))})},hd:function(){b.viewport(0,0,D.G(),D.X())},flush:function(){b.flush()},u:function(){d();l();Qa.u();oa.u();pa.u();g.ka.forEach(function(h){b.deleteBuffer(h)});g.ka.splice(0);za.reset();
k=!1}};return D}(),aa=pa,Fa=oa,Z=Qa,Ja=function(){function a(x,K,M,r){g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,r?g.NEAREST_MIPMAP_NEAREST:g.LINEAR);var n=null;if(null!==M)try{n=g.getError();if("FUCKING_BIG_ERROR"===n)return!1;g.texImage2D(g.TEXTURE_2D,0,x,4,4,0,g.RGBA,K,M);n=g.getError();if(n!==g.NO_ERROR)return!1}catch(z){return!1}r&&g.generateMipmap(g.TEXTURE_2D);g.clear(g.COLOR_BUFFER_BIT);aa.Xa(g);n=g.getError();if("FUCKING_BIG_ERROR"===n)return!1;g.readPixels(0,0,2,2,g.RGBA,g.UNSIGNED_BYTE,
v);n=g.getError();n===g.INVALID_OPERATION&&"undefined"!==typeof g.PIXEL_PACK_BUFFER&&(g.bindBuffer(g.PIXEL_PACK_BUFFER,null),g.readPixels(0,0,2,2,g.RGBA,g.UNSIGNED_BYTE,v),n=g.getError());if(n!==g.NO_ERROR)return!1;M=!0;for(r=0;16>r;++r)M=M&&4>Math.abs(v[r]-127);M&&(k.Zc=K,k.Oc=x);return M}function c(x,K){return L.aa&&a(x,g.FLOAT,new Float32Array(E),K)?(q=t.oc,!0):!1}function d(x,K,M){if(!L.ba)return!1;var r=Qa.Bd(E),n=da.Wa(g);if(n&&n.HALF_FLOAT_OES&&a(x,n.HALF_FLOAT_OES,r,K)||g.HALF_FLOAT&&a(x,
g.HALF_FLOAT,r,K))return q=t.xa,!0;r=new Float32Array(E);if(a(x,g.FLOAT,r,K))return q=t.xa,!0;g.bindTexture(g.TEXTURE_2D,M);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,2,2,0,g.RGBA,g.UNSIGNED_BYTE,null);g.bindFramebuffer(k.Ua,I);Qa.Gc(g,M,2,2,r,!1,!1);g.bindFramebuffer(k.Ua,null);g.bindTexture(g.TEXTURE_2D,M);return a(x,null,null,K)?(q=t.xa,!0):!1}function e(x,K,M){p=!0;if(d(x,!0,M)||c(K,!0))return!0;p=!1;return d(x,!1,M)||c(K,!1)?!0:!1}function m(x){if(q===t.R){g=x||b;q=t.RGBA8;p=!0;da.zc(g);L||(L=da.Cb(g));
Fa.reset();I=g.createFramebuffer();k.Ua=g.DRAW_FRAMEBUFFER||g.FRAMEBUFFER;g.bindFramebuffer(k.Ua,null);g.clearColor(0,0,0,0);g.viewport(0,0,2,2);A.R();D=A.Ja(g);x=g.createTexture();g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,x);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.REPEAT);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.REPEAT);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);h=x;var K=x=g.RGBA,M=g.RGBA16F,r=g.RGBA32F;r&&(x=r);M&&(K=M);if((M||r)&&e(K,x,h))return l(),
!0;x=K=g.RGBA;if(e(K,x,h))return l(),!0;q=t.RGBA8;l();return!1}}function l(){g.deleteProgram(D.oa);g.deleteTexture(h);h=D=null}for(var t={R:-1,oc:3,xa:2,RGBA8:0},q=t.R,k={Zc:null,Oc:null,Ua:null},p=!0,v=new Uint8Array(16),E=Array(64),F=0;4>F;++F)for(var u=0;4>u;++u){var B=0===(u+F)%2?1:0,C=4*F+u;E[4*C]=B;E[4*C+1]=B;E[4*C+2]=B;E[4*C+3]=B}var g=null,L=null,D=null,h=null,I=null;return{xd:function(x){m(x);return p},uc:function(x,K){q===t.R&&(typeof("undefined"!==K)&&(L=K),m(x));return q!==t.RGBA8},Zf:function(x){m(x);
return q===t.oc},le:function(x){m(x);return q===t.xa},If:function(x){m(x);return k.Zc},Vd:function(x){m(x);return k.Oc},u:function(){g=null;p=!0;q=t.R;L=null}}}(),ic=function(){return{instance:function(a){var c=Z.instance(a.alpha),d=Z.instance(a.beta);return{Jd:function(){c.i(1);d.i(2)}}}}}(),$b=function(){return{instance:function(a){var c=null,d=!1,e=!1,m=null,l=!1,t=!1,q=null,k="undefined"===typeof a.preprocessing?!1:a.preprocessing,p="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;
a.mask&&(d=!0,SETTINGS&&void 0!==SETTINGS.sd&&(a.mask=SETTINGS.sd+a.mask),c=Z.instance({isFloat:!1,url:a.mask}));var v=!1;a.customInputShader&&(v="s45",A.pc({name:"_",id:v,g:a.customInputShader,Eg:["uSource"],precision:"lowp"}),A.M(v,[{type:"1i",name:"_",value:0}]));switch(k){case "sobel":q="s32";l=!0;break;case "meanNormalization":q="s33";l=!0;break;case "grayScale":q="s29";l=!1;break;case "grayScaleTilt":q="s30";t=!0;l=!1;break;case "rgbGrayTilt":q="s31";t=!0;l=!1;break;case "copy":q=v?v:"s0";break;
case "inputLightRegulation":q=v?v:"s29";m=jc.instance({Nc:p,Yc:a.size,Vc:a.nBlurPass,eb:!1});e=!0;break;case "inputMix0":q="none";m=kc.instance({I:p,od:a.varianceMin,tc:a.blurKernelSizePx,gain:a.gain||1,eb:!1});e=!0;break;case "direct":case "none":q="abort";break;default:q="s4"}t&&A.M(q,[{name:"u27",type:"1f",value:a.tilt}]);d&&(q+="Mask");var E=Z.instance({isFloat:!1,isPot:!1,width:a.size}),F={G:function(){return p},Hb:function(){return F.G()},$d:function(){return e?m.Ib():E},O:function(u){Fa.V();
"abort"!==q&&("none"!==q&&(A.set(q),l&&A.T("u28",1/a.size),E.ea(),d&&c.i(1),aa.m(!1,!1),E.i(0),u=E),e&&m.process(u))},u:function(){E.remove();d&&c.remove()}};return F}}}(),ac=function(){return{instance:function(a){function c(f){m.forEach(function(G,J){l[J][0]=f[0][G];l[J][1]=f[1][G];l[J][2]=f[2][G];l[J][3]=f[3][G]});return l}a.normalize=a.normalize||!1;var d={input:null,bias:null,Nb:null,Y:null,mb:null,Wb:null,Xb:null},e=null,m=[],l=[],t=!1,q=null,k=!0,p=-1,v=a.isReorganize?a.isReorganize:!1,E=a.kernelsCount?
!0:!1,F=a.dynPelu?ic.instance(a.dynPelu):!1,u=F?!0:!1,B={isEnabled:!1};a.je?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.ob.Hb(),k=!1):"full"===a.connectivityUp&&(a.sparsity=a.ob.Hb());var C={elu:"s16",elu01:"s17",relu:"s15",arctan:"s19",sigmoid:"s14",copy:"s0",softplus:"s20",dynPelu:"s18"}[a.activation],g=a.sparsity*a.sparsity,L=!1,D=a.size,h="";if(a.maxPooling){switch(a.maxPooling.size){case 2:h="s34";break;case 4:h="s35"}L=!0;D/=a.maxPooling.size;d.Wb=Z.instance({isFloat:!0,isPot:!1,
width:D})}var I=a.normalization?!0:!1,x=null,K=null,M=null;if(I){x="s46"+a.index.toString();A.Mc("s46",x,[((a.normalization.n-1)/2).toFixed(1)]);A.M(x,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u8",value:[1/a.size,1/a.size]},{type:"1f",name:"u7",value:a.normalization.alpha},{type:"1f",name:"u10",value:a.normalization.beta},{type:"1f",name:"u31",value:a.normalization.k}]);var r={isFloat:!0,isPot:!0,width:a.size};K=Z.instance(r);M=Z.instance(r)}var n=-1,z=null;k&&(d.Y=Z.instance({isFloat:!0,isPot:!1,
width:a.size}));d.bias=Z.instance(a.bias);var O={G:function(){return a.size},Hb:function(){return D},Jc:function(){return a.classesCount},ud:function(f){e.i(f)},ue:function(){a.remap&&a.remap.isEnabled&&(B={isEnabled:!0,oe:Z.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(a.remap.maskTexture.data),width:a.remap.maskTexture.width,isPot:!1}),gb:a.remap.layers.map(function(f){return a.parent.Yd(f)}),depth:a.remap.depth})},Ge:function(){switch(a.connectivityUp){case "direct":z=lc.instance(a.connectivity);
break;case "square":z=mc.instance(a.connectivity);break;case "squareFast":z=nc.instance(a.connectivity,a.activation);break;case "full":z=oc.instance(a.connectivity);break;case "conv":p=a.kernelsCount,z=pc.instance(a.connectivity),v&&(d.mb=Z.instance({width:D,isFloat:!0,isFlipY:!1,isPot:!1}))}if(z.va){var f=a.size*a.sparsity;n=Math.log(f/a.size)/Math.log(2);d.input=Z.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:f,Pb:n});d.Nb=Z.instance({isFloat:!0,isPot:!0,width:a.size})}},O:function(f,G){e=f;z.va?
(d.input.ea(),E&&d.bias.i(2),z.O(B),d.input.i(0),d.input.Pd(n),d.Nb.ea(),E?A.set("s0"):(A.set("s28"),A.T("u26",g),d.bias.i(1)),d.input.vd(n,0),aa.m(!1,!1),A.set(C),I?K.v():d.Y.v(),d.Nb.i(0),u&&F.Jd(),aa.m(!1,!1)):(d.Y.ea(),d.bias.i(1),z.O());I&&(A.set(x),M.v(),K.i(0),aa.m(!1,!1),A.set("s47"),A.T("u7",1),d.Y.v(),M.i(1),aa.m(!1,!1));if(k)return L?(d.Wb.ea(),d.Y.i(0),A.set(h),A.pa("u8",1/a.size,1/a.size),aa.m(!1,!1),G=d.Wb):G=d.Y,G.i(0),v&&(d.mb.v(),A.set("s22"),A.pa("u13",p,D/p),aa.m(!1,!1),G=d.mb,
d.mb.i(0)),G;var J=d.Y;a.normalize&&(A.set("gpuRawAvg"===t?"s9":"s8"),A.T("u4",1/a.size),d.Xb.ea(),d.Y.i(0),aa.m(!1,!1),J=d.Xb);f=null;switch(t){case "cpuRGBA2Float":J.yc(!1);G?f=O.we(J).then(q):(J=O.xe(J),q(J));break;case "cpuMeanFloat":J.yc(!0);if(G)f=J.ze().then(q);else{J=J.Ae();for(var P=0;P<J.length;++P);q(J)}break;case "gpuRawAvg":case "gpuRaw":J.i(0);case "none":null!==q&&q(J)}G&&null===f&&(f=Promise.resolve());return f},Dd:function(f){f&&(t=f.Yb||"none",q=f.Vb||null);d.Y=Z.instance({isFloat:!0,
isPot:!0,isMipmap:!1,width:a.size});f="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var G=0,J=0,P=0;G<f;++G)m.push(J+(a.size-1-P)*a.size),l.push([-1,-1,-1,-1]),++J,J===a.size&&(J=0,++P);a.normalize&&(d.Xb=Z.instance({isFloat:!0,isPot:!0,width:a.size}))},we:function(f){return f.ye().then(c)},xe:function(f){f=f.ad();c(f);return l},u:function(){for(var f in d){var G=d[f];G&&G.remove()}z&&(z.u(),z=null)}};a.ob&&O.Ge(a.ob);return O}}}(),lc=function(){return{instance:function(a){var c=
Z.instance(a.weights);return{va:!0,Za:function(){return 1},u:function(){c.remove()},be:function(){return c},O:function(){A.set("s27");c.i(1);aa.m(!1,!1)}}}}}(),oc=function(){return{instance:function(a){var c=a.fromLayerSize,d=Z.instance(a.weights);return{va:!0,Za:function(){return c},u:function(){d.remove()},O:function(e){if(e.isEnabled){A.set("s25");e.oe.i(3);var m,l=Math.min(e.gb.length,e.depth);for(m=0;m<l;++m)e.gb[m].ud(4+m)}else A.set("s24");A.T("u17",a.toLayerSize);A.T("u18",a.fromLayerSize);
d.i(1);aa.m(!1,!1)}}}}}(),mc=function(){return{instance:function(a){for(var c=a.fromLayerSize,d=a.toLayerSize,e=a.toSparsity,m=e*d,l=m/c,t=c/d,q=0,k=0,p=0,v=Array(e*d*e*d*4),E=Array(e*d*e*d*4),F=Array(c*c),u=0;u<F.length;++u)F[u]=0;u=Math.floor(e/2);for(var B=.5/d,C=.5/c,g=.5/m,L=0;L<d;++L)for(var D=Math.round(L*t),h=0;h<d;++h){var I=Math.round(h*t),x=L/d,K=h/d;x+=B;K+=B;for(var M=0;M<e;++M){var r=D+M-u;0>r&&(r+=c);r>=c&&(r-=c);for(var n=0;n<e;++n){var z=q/m,O=k/m,f=I+n-u;0>f&&(f+=c);f>=c&&(f-=c);
var G=r/c,J=f/c;O=1-O-1/m;G+=C;J+=C;z+=g;O+=g;var P=L*e+M,ba=h*e+n;ba=d*e-ba-1;P=ba*d*e+P;v[4*P]=z;v[4*P+1]=O;v[4*P+2]=G;v[4*P+3]=J;J=F[f*c+r]++;P=J%l;G=r*l+P;f=f*l+(J-P)/l;f=c*l-1-f;f=f*c*l+G;E[4*f]=z;E[4*f+1]=O;E[4*f+2]=x;E[4*f+3]=K;++q>=m&&(q=0,++k);++p}}}F=null;var Aa=Z.instance(a.weights);delete a.weights.data;var Ba=Z.instance({width:m,isFloat:!0,array:new Float32Array(E),isPot:!0});E=null;var Ka=Z.instance({width:m,isFloat:!0,array:new Float32Array(v),isPot:!0});v=null;return{va:!0,Za:function(){return l},
u:function(){Ba.remove();Ka.remove();Aa.remove()},O:function(){A.set("s23");Aa.i(1);Ka.i(2);aa.m(!1,!1)}}}}}(),pc=function(){return{instance:function(a){var c=a.kernelsCount,d=a.toSparsity,e=d*a.toLayerSize/a.fromLayerSize,m=Z.instance(a.weights);return{va:!0,Za:function(){return e},Rf:function(){return d},be:function(){return m},u:function(){m.remove()},O:function(){A.set("s26");A.T("u24",c);A.T("u25",d);A.T("u17",a.toLayerSize);A.T("u18",a.fromLayerSize);m.i(1);aa.m(!1,!1)}}}}}(),nc=function(){return{instance:function(a,
c){var d=a.fromLayerSize,e=a.toLayerSize,m=a.toSparsity,l=a.stride?a.stride:1,t=m*e/d,q=e<d,k=d/e,p=Z.instance(a.weights),v="s48"+[d.toString(),e.toString(),m.toString(),l.toString(),c].join("_");A.Od(v)||(a=gc.Qd(c,"gl_FragColor","gl_FragColor"),e=[{type:"1f",name:"u17",value:e},{type:"1f",name:"u30",value:l}],q&&e.push({type:"1f",name:"u18",value:d}),d=[(q?t:m).toFixed(1),a],q&&d.push(k.toFixed(1)),A.Mc(q?"s40":"s39",v,d),A.M(v,e.concat([{type:"1i",name:"u15",value:0},{type:"1i",name:"u23",value:1},
{type:"1i",name:"u14",value:3}])));return{va:!1,Za:function(){return t},u:function(){p.remove()},O:function(){A.set(v);p.i(3);aa.m(!1,!1)}}}}}(),jc=function(){return{instance:function(a){var c=a.Vc?a.Vc:3,d=a.Nc?a.Nc:64,e=a.Yc?a.Yc:64,m=a.eb?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var l=Z.instance(a),t=Z.instance(a),q=Z.instance(a),k=Z.instance(a),p=Z.instance({isFloat:!0,width:e,isPot:!1,isFlipY:!1}),v=1/d;return{process:function(E){A.set("s36");k.v();aa.m(m,!1);A.set("s37");for(var F=0;F<
c;++F)l.v(),A.pa("u8",v,0),aa.m(m,!1),q.v(),k.i(0),aa.m(m,!1),t.v(),l.i(0),A.pa("u8",0,v),aa.m(m,!1),k.v(),q.i(0),aa.m(m,!1),F!==c-1&&t.i(0);A.set("s38");p.v();E.i(0);t.i(1);k.i(2);aa.m(m,!1);p.i(0)},Ib:function(){return p}}}}}(),kc=function(){return{instance:function(a){function c(v){return Z.instance({isFloat:v,width:d.I,isPot:!1,isFlipY:!1})}var d=Object.assign({od:.1,tc:9,I:128,gain:1,eb:!1},a),e=c(!1),m=[c(!1),c(!1),c(!1)],l=[c(!1),c(!1),c(!1)],t=c(!0),q=[e,l[0],l[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u32;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u32*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.tc-1)/2).toFixed(2)).replace("2.2222",(1/d.I).toFixed(6));var k="uniform sampler2D u33,u34,u35,u36;const float f=1.1111;const vec3 g=vec3(1.,1.,1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u33,vv0).rgb;float c=texture2D(u34,vv0).r,d=texture2D(u35,vv0).r,i=texture2D(u36,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(j-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.od.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),p={u1:0};A.qc([{id:"s50",
name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.,1.,1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",l:p,j:["u1"],precision:"lowp"},{id:"s51",name:"_",g:a,l:p,j:["u1","u32"],precision:"lowp"},{id:"s52",name:"_",g:k,l:{u33:0,u34:1,u35:2,u36:3},j:["u33","u34","u35","u36"],precision:"highp"}]);return{process:function(){A.set("s50");e.ea();aa.m(d.eb,!1);A.set("s51");for(var v=0;3>v;++v)A.pa("u32",1,0),m[v].v(),
q[v].i(0),aa.m(!1,!1),A.pa("u32",0,1),l[v].v(),m[v].i(0),aa.m(!1,!1);A.set("s52");t.v();e.i(0);l[0].i(1);l[1].i(2);l[2].i(3);aa.m(!1,!1);t.i(0)},Ib:function(){return t}}}}}(),Ab=function(){function a(B,C,g,L,D,h,I){if(!F)if(I===h.length)D();else{switch(h[I]){case "A":g();break;case "D":B();break;case "S":C().then(function(x,K){u.kd();a(B,C,g,K?null:L,D,h,++I)}).catch(function(x){console.log("An error occurred in the WebAR loop: ",x);D()});return;case "R":L&&L()}a(B,C,g,L,D,h,++I)}}var c={n:5,Qb:1,
me:0,Ya:[35,49],Va:[2,200],k:.7,Oe:200,se:.05},d=-1,e=null,m=-1,l=-1,t=0,q=-1,k=-1,p=0,v=0,E=c.Va[1],F=!0,u={Zd:function(){switch(d){case -1:return-1;case 0:return k+e.me;case 1:return p}},Af:function(B){return Math.pow(Math.min(Math.max(q,0),e.n-1)/(e.n-1),B||1)},B:function(B){e=Object.assign({},c,B);q=k=e.Qb;d=0;u.reset()},kd:function(B){B=("undefined"===typeof B?Date.now():B)||0;var C=Math.min(Math.max(B-v,e.Va[0]),e.Va[1]);E=C;v=B;var g=-1===m?0:e.k;m=Math.min(Math.max(1E3/C,5),120)*(1-g)+m*g;
B-l>e.Oe&&5<++t&&(C=e.k,q=q*(1-C)+(m<e.Ya[0]?k-1:m>e.Ya[1]?k+1:k)*C,Math.abs(q-k)>1-e.se&&(C=Math.min(Math.max(Math.round(q),0),e.n-1),C!==k&&(q=k=C,m=(e.Ya[1]-e.Ya[0])/2)),l=B)},pg:function(B,C,g,L,D,h){F=!1;a(B,C,g,L,D,h,0)},stop:function(){F=!0},sg:function(B){p=B;d=1},Gg:function(){d=0;u.reset()},reset:function(){E=c.Va[1];l=m=-1;t=0},Ff:function(){return E}};return u}(),Jb=function(){var a={Wc:4,nb:[1.5,1.5,2],F:[.1,.1,.1],dd:1,I:-1,S:-1,Ke:2,re:1,ed:!0,Kd:.8},c=null,d=[],e=[0],m=[.5,.5,1];return{B:function(l){c=
Object.assign({},a,l);d.splice(0);l=c.nb[0]*c.F[0];var t=c.nb[1]*c.F[1],q=1/(1+c.nb[2]*c.F[2]),k=c.dd*Math.min(c.I,c.S),p=k/c.I;k/=c.S;var v=.5*c.Kd;v*=v;for(var E=0;E<c.Wc;++E){var F=Math.pow(q,E),u=p*F,B=k*F;F=u*c.re;var C=u*l,g=B*t;u/=2;B/=2;for(var L=1+(1-u-u)/C,D=1+(1-B-B)/g,h=0;h<D;++h)for(var I=B+h*g,x=I-.5,K=0;K<L;++K){var M=u+K*C,r=M-.5;r*r+x*x>v||d.push([M,I,F])}}c.ed&&d.sort(function(n,z){var O=n[0]-.5;n=n[1]-.5;var f=z[0]-.5;z=z[1]-.5;return O*O+n*n-(f*f+z*z)})},get:function(l){var t=
d.length;if(0===t)return m;for(;l>=e.length;)e.push(0);e[l]>=t&&(e[l]=0);var q=d[Math.floor(e[l])];e[l]=(e[l]+1/c.Ke)%t;return q},reset:function(){for(var l=d.length/e.length,t=0;t<e.length;++t)e[t]=Math.floor(t*l)}}}(),fa={Qa:512,F:[.05,.05,.15],Ce:{nScaleLevels:3,scale0Factor:.8,overlapFactors:[2,2,3],scanCenterFirst:!0,scaleXRange:[1/15,.9],lockStabilizeEnabled:!0,lockStabilizeDxysRanges:[[.5,1],[.5,1],[.5,1]]},pe:3,jc:.68,lb:10,hb:.03,na:8,tb:-.02,Ra:.02,La:.7,jb:20,Sa:.3,Na:[.02,10],kb:[1,6],
qe:3},Ea=Object.create(fa.Ce),yb=0,Kb=0,cb=0,zb=!1,U={width:-1,Ob:!0,Fa:!1,cb:!1,cd:null,dc:!1,pitchRange:null,F:fa.F},ua={mc:0,pitch:0,$b:0,Tb:!0},Ra=null,va=null,Za=!1,Ua=!1,Ha=0,bb=null,H=null,qc={aspectRatio:1,Mb:1,sa:[1,1],I:0,S:0,ga:0,fa:0,Ea:"s53",J:{Ba:[0,0],scale:[1,1]}},V={N:null,o:[0,0,0,0]},ha={ia:-2,LOADING:-1,ya:0,wb:1,nc:2,Oa:3},qa=ha.ia,Xa={ia:-2,LOADING:1,IDLE:0},eb=Xa.ia,Ia=null;var Lb=ea=0;var db=-1;var Y={n:0,Xc:0,Sb:0,H:-1,W:[0,0]},Ya={video:0,pd:1},Oa={undefined:0,video:1,wc:2,
Db:3},R=null,rc={current:Ya.video,element:null,N:null,ta:!1,type:Oa.undefined,time:-1,qa:null},Tb=!1,ia={distance:0,label:!1,positionScale:[0,0,0,0],detectScore:0,yaw:0,pitch:0,roll:0},wb=1,ec={cutShader:null,thresholdDetectFactor:1,thresholdDetectFactorUnstitch:1,isSkipConfirmation:!1,isKeepTracking:!1,trackingFactors:[2,2,2],secondNeighborFactor:fa.La,nLocateAutomoves:fa.lb,locateMoveNoiseAmplitude:fa.hb,nConfirmAutoMoves:fa.na,nConfirmUnstitchMoves:fa.jb,confirmMoveNoiseAmplitude:fa.Ra,thresholdConfirmOffset:fa.tb,
tiltPosAngleIfAmbiguousDetection:fa.Na,confirmScoreMinFactorDuringAutoMove:fa.Sa},na={},W={ub:1,jd:1,Ha:!1,bb:!1,ld:null,La:fa.La,lb:-1,hb:-1,na:-1,tb:-1,Ra:-1,jb:-1,Na:null,Sa:-1},Nb=[{type:"1f",name:"u37",value:0}],nb={VERSION:"1.3.1",init:function(a){function c(d){a.callbackReady&&a.callbackReady(d)}if(qa!==ha.ia)return c("ALREADY_INITIALIZED");qa=ha.LOADING;H=Object.assign({},qc);R=Object.assign({},rc);if("undefined"!==typeof a.canvas)va=a.canvas,Za=!1;else if("undefined"===typeof a.canvasId)va=
document.createElement("canvas"),Za=!1;else{va=document.getElementById(a.canvasId);if(!va)return c("INVALID_CANVASID"),!1;Za=!0}"undefined"!==typeof a.isDebugRender&&(Za=a.isDebugRender);Za&&(va.style.display="block");a.scanSettings&&Object.assign(Ea,a.scanSettings);a.canvasSize&&(fa.Qa=a.canvasSize);Ab.B({n:fa.kb[1]-fa.kb[0]+1,Qb:fa.qe-fa.kb[0]});Ua="undefined"===typeof a.followZRot?!1:a.followZRot;bb="undefined"===typeof a.ZRotRange?null:a.ZRotRange;Tb="undefined"!==typeof WorkerGlobalScope&&"undefined"!==
typeof self&&self instanceof WorkerGlobalScope;-1!==fa.Qa&&(va.width=fa.Qa,va.height=fa.Qa);nb.set_source(a.video,a.videoCrop);if(!pb.B({Ta:va,width:va.width,height:va.height,debug:!1,Ub:c.bind(null,"GLCONTEXT_LOST"),premultipliedAlpha:!1}))return c("GL_INCOMPATIBLE"),!1;R.current===Ya.video&&(Ob(R.element),Wa());dc();Ma();qa=ha.ya;c(!1);return!0},set_source:function(a,c){"undefined"!==typeof a&&a?(R.element=a,R.current=Ya.video,R.element.isFakeVideo?(H.ga=R.element.videoWidth,H.fa=R.element.videoHeight,
R.type=Oa.Db):"VIDEO"===a.tagName?(H.ga=R.element.videoWidth,H.fa=R.element.videoHeight,R.type=Oa.video):(H.ga=R.element.width,H.fa=R.element.height,R.type=Oa.wc),Da(c)):R.current=Ya.pd;-1===[ha.ia,ha.LOADING].indexOf(qa)&&(R.qa&&R.qa.D&&(R.qa.D=a),Wa(),Ma(),R.type===Oa.wc&&R.N.refresh())},set_NN:function(a,c,d){if(eb===Xa.LOADING)c&&c("NN_LOADING");else{var e=function(m){eb=Xa.IDLE;c&&c(m)};eb=Xa.LOADING;"string"===typeof a?ob.get(a,function(m){if(!m)return e("INVALID_NN");var l=null;try{l=JSON.parse(m)}catch(t){return e("INVALID_NN")}Pb(l,
e,d)},function(){e("NOTFOUND_NN")}):Pb(a,e,d)}},reset_state:function(){Mb();qa=ha.ya},destroy:function(){nb.reset_state();Ra&&Ra.u();pb.u();eb=Xa.ia;qa=ha.ia;return Promise.resolve()},detect_async:function(a,c,d){var e,m;return Zb(new Gb(new lb(function(l){switch(l.da){case 1:e=Qb(a,c,d);if(-1===e)return l.return(ia);m=0;case 2:if(!(m<e)){l.da=4;break}Rb(m,e);var t=Ra.te(V.N);l.da=5;return{value:t};case 5:Fa.V();++m;l.da=2;break;case 4:return l.return(Sb())}})))},detect:function(a,c,d){a=Qb(a,c,d);
if(-1===a)return ia;for(c=0;c<a;++c)Rb(c,a),Ra.O(V.N),Fa.V();return Sb()},get_aspectRatio:function(){return H.I/H.S},set_scanSettings:function(a){Object.assign(Ea,a);Wa()},set_videoCrop:function(a){Da(a);Ma();Wa()}};return nb}();
if(typeof(module)!=='undefined'){module.exports=WEBARROCKSOBJECT;}
