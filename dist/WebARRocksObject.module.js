/**
 * MIT License
 * 
 * Copyright (c) 2020 WebAR.Rocks
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
*/


/* eslint-enable */
/* prettier-ignore */
function cb(){this.La=!1;this.la=null;this.zd=void 0;this.ha=1;this.Pc=this.Jd=0;this.Ba=null}function lb(M){if(M.La)throw new TypeError("Generator is already running");M.La=!0}cb.prototype.Oa=function(M){this.zd=M};cb.prototype.Sa=function(M){this.Ba={Wd:M,ue:!0};this.ha=this.Jd||this.Pc};cb.prototype.return=function(M){this.Ba={return:M};this.ha=this.Pc};function mb(M){this.s=new cb;this.He=M}
mb.prototype.Oa=function(M){lb(this.s);if(this.s.la)return ub(this,this.s.la.next,M,this.s.Oa);this.s.Oa(M);return vb(this)};function Hb(M,fa){lb(M.s);var ua=M.s.la;if(ua)return ub(M,"return"in ua?ua["return"]:function(xa){return{value:xa,done:!0}},fa,M.s.return);M.s.return(fa);return vb(M)}mb.prototype.Sa=function(M){lb(this.s);if(this.s.la)return ub(this,this.s.la["throw"],M,this.s.Oa);this.s.Sa(M);return vb(this)};
function ub(M,fa,ua,xa){try{var Fa=fa.call(M.s.la,ua);if(!(Fa instanceof Object))throw new TypeError("Iterator result "+Fa+" is not an object");if(!Fa.done)return M.s.La=!1,Fa;var La=Fa.value}catch(Pa){return M.s.la=null,M.s.Sa(Pa),vb(M)}M.s.la=null;xa.call(M.s,La);return vb(M)}
function vb(M){for(;M.s.ha;)try{var fa=M.He(M.s);if(fa)return M.s.La=!1,{value:fa.value,done:!1}}catch(ua){M.s.zd=void 0,M.s.Sa(ua)}M.s.La=!1;if(M.s.Ba){fa=M.s.Ba;M.s.Ba=null;if(fa.ue)throw fa.Wd;return{value:fa.return,done:!0}}return{value:void 0,done:!0}}function Ib(M){this.next=function(fa){return M.Oa(fa)};this.throw=function(fa){return M.Sa(fa)};this.return=function(fa){return Hb(M,fa)};this[Symbol.iterator]=function(){return this}}
function cc(M){function fa(xa){return M.next(xa)}function ua(xa){return M.throw(xa)}return new Promise(function(xa,Fa){function La(Pa){Pa.done?xa(Pa.value):Promise.resolve(Pa.value).then(fa,ua).then(La,Fa)}La(M.next())})}
var StereoAudioRecorder=null,CanvasRecorder=null,isFloat=null,isPot=null,isLinear=null,isMipmap=null,isFlipY=null,array=null,width=null,height=null,url=null,EPnP=null,_pnpSolver=null,_pnpSolverStab=null,u0=null,u1=null,u2=null,u3=null,u4=null,u5=null,u6=null,u7=null,u8=null,u9=null,u10=null,u11=null,u12=null,u13=null,u14=null,u15=null,u16=null,u17=null,u18=null,u19=null,u20=null,u21=null,u22=null,u23=null,u24=null,u25=null,u26=null,u27=null,u28=null,u29=null,u30=null,u31=null,u32=null,u33=null,u34=
null,u35=null,u36=null,u37=null,u38=null,u39=null,u40=null,u41=null,u42=null,u43=null,u44=null,a0=null,spec=null,attributes=null,_shaders=null;
const WEBARROCKSOBJECT=function(){function M(a){var c=null,d=null,e=null,l=0,n=this,p=null,t={Na:[],tb:"none",bc:!1,sb:null,grid:null};this.D=function(){this.Gd(p.Na);e.Ye({tb:p.tb,bc:p.bc,sb:p.sb})};this.je=function(g){return c[g]};this.Db=function(g){["s32","s34","s27"].forEach(function(k){C.M(k,[{type:"2f",name:"u21",value:g}])});c&&c.forEach(function(k){k.Db(g)})};this.Gd=function(g){var k=null;l=g.length;var u=p.grid!==null&&a.grid.length&&!(a.grid[0]===1&&a.grid[1]===1),A=u?p.grid:[1,1];
u&&this.Db(A);c=g.map(function(y,v){y=Object.assign({},y,{index:v,parent:n,vb:k,ye:v===l-1,Ia:u,T:A});return k=v=v===0?dc.instance(y):ec.instance(y)});d=c[0];e=c[l-1];c.forEach(function(y,v){v!==0&&y.Ge()})};this.P=function(g){g.j(0);var k=g;c.forEach(function(u){k=u.P(k,!1)});return k};this.Fe=function(g){var k,u,A;return cc(new Ib(new mb(function(y){g.j(0);k=g;for(u=0;u<l-1;++u)A=c[u],k=A.P(k,!1);var v=c[l-1].P(k,!0);y.ha=0;return{value:v}})))};this.ie=function(){return d.he()};this.me=function(){return e.L()};
this.Ha=function(){return e.le()};this.Rc=function(){return e.Rc()};this.v=function(){c&&(c.forEach(function(g){g.v()}),e=d=c=null,l=0)};typeof a!=="undefined"&&(p=Object.assign({},t,a),this.D())}var fa;function ua(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}function xa(a,c,d){var e=1,l=0;for(d=c+d-1;d>=c;--d)l+=e*ua(a,d),e*=2;return l}function Fa(a){a=a.data;a=typeof btoa==="undefined"&&typeof Buffer!=="undefined"?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var c=a.length,d=new Uint8Array(c),
e=0;e<c;++e)d[e]=a.charCodeAt(e);return d}function La(a){return typeof a==="string"?JSON.parse(a):a}function Pa(a){if(typeof La(a).nb==="undefined"){var c=La(a);a=c.ne;var d=c.nf,e=c.n;c=Fa(c);for(var l=new Float32Array(e),n=new Float32Array(d),p=a+d+1,t=0;t<e;++t){var g=p*t,k=ua(c,g)===0?1:-1,u=xa(c,g+1,a),A=c;g=g+1+a;for(var y=n.length,v=0,E=g;E<g+y;++E)n[v]=ua(A,E,!0),++v;for(g=A=0;g<d;++g)A+=n[g]*Math.pow(2,-g-1);l[t]=A===0&&u===0?0:k*(1+A)*Math.pow(2,1+u-Math.pow(2,a-1))}a=l}else if(e=La(a),
a=e.nb,a===0)a=new Uint8Array(e.nb);else{d=e.n;e=Fa(e);c=new Uint32Array(d);for(l=0;l<d;++l)c[l]=xa(e,l*a,a);a=c}return a}function Jb(a){if(a){var c=a.w,d=a.h;J.K.Da[0]=-1+2*(a.x+c/2)/J.ja;J.K.Da[1]=-1+2*(a.y+d/2)/J.ia;J.K.scale[0]=c/J.ja;J.K.scale[1]=d/J.ia}else J.K.Da[0]=0,J.K.Da[1]=0,J.K.scale[0]=1,J.K.scale[1]=1;J.A=J.ja*J.K.scale[0];J.O=J.ia*J.K.scale[1]}function wb(){var a=[{type:"2f",name:"u41",value:J.K.Da},{type:"2f",name:"u42",value:J.K.scale}],c=a.concat([{type:"1f",name:"u43",value:J.ja/
J.ia}]);C.M("s62",c);C.M("s63",c.concat([{name:"u15",type:"2f",value:[1/J.ja,1/J.ia]}]));C.M("s64",a)}function Qa(a,c,d){var e=va.rawNNOutputTranslationScalingOffsets,l=-e[0]+Ma(a,c,"dx")*J.ua[0],n=-e[1]+Ma(a,c,"dy")*J.ua[1];a=-e[2]+d[2]*Ma(a,c,"ds");if(Ua){c=Math.cos(Ia);e=Math.sin(Ia);var p=-e*l+c*n;l=c*l+e*n;n=p}l*=d[0];n*=d[1];d=U.o[2];c=U.o[3];U.o[0]-=l*d*S.G[0];U.o[1]-=n*c*S.G[1];U.o[2]-=a*d*S.G[2];U.o[2]=ta.Ea(U.o[2],va.scaleXRange[0]*J.ua[0],va.scaleXRange[1]*J.ua[0]);U.o[0]=ta.Ea(U.o[0],
0,1);U.o[3]=U.o[2]*J.aspectRatio/J.Ub;U.o[1]=ta.Ea(U.o[1],0,1)}function xb(a){var c=U.o[2],d=U.o[3],e=(Math.random()*2-1)*a,l=.5*(Math.random()*2-1)*a;U.o[0]+=(Math.random()*2-1)*a*c;U.o[1]+=e*d;U.o[2]+=l*c;U.o[3]=U.o[2]*J.aspectRatio/J.Ub}function Ma(a,c,d){c=Ja[c].cd[d];return(a[c][0]+a[c][1]+a[c][2]+a[c][3])/4}function Kb(a,c){if(S.Vb){if(S.nc){var d=Ma(a,c,"yaw");a=-Ma(a,c,"notHere");return Math.atan2(ta.Ea(a,-1,1),ta.Ea(d,-1,1))}return Math.PI*Ma(a,c,"yaw")}return 0}function Lb(a,c,d,e){c=Ja[c].cd[d];
return(a[c][0]+a[c][1]+a[c][2]+a[c][3])/4*(1-e)+e*Math.min(a[c][0],a[c][1],a[c][2],a[c][3])}function nb(a,c,d){var e=Lb(a,c,"here",d),l=0;yb>0&&!S.nc&&(l=yb*Lb(a,c,"notHere",d));return(e-l)/Ja[c].sc}function Va(){Ia=0;Ua&&db!==null&&(Ia=db[0]+Math.random()*(db[1]-db[0]));sa=ka.Aa;var a=Mb.get(0);a&&(U.o[0]=a[0],U.o[1]=a[1],U.o[2]=a[2],U.o[3]=a[2]*J.aspectRatio)}function fc(a,c){var d=.5+(U.o[0]-.5)/J.K.scale[0],e=.5+(U.o[1]-.5)/J.K.scale[1],l=U.o[2],n=U.o[3],p=ja.positionScale[0],t=ja.positionScale[1],
g=ja.positionScale[2],k=1;!ya.$b&&va.lockStabilizeEnabled&&(k=va.lockStabilizeDxysRanges,k=Math.max(zb.mc(k[0][0],k[0][1],Math.abs(p-d)/l*Wa*S.G[0]),zb.mc(k[1][0],k[1][1],Math.abs(t-e)/n*Wa*S.G[1]),zb.mc(k[2][0],k[2][1],Math.abs(g-l)/l*Wa*S.G[2])));S.Ka&&(ya.ic=ta.pa(ya.ic,Ua?Ia:Ab,k),ja.roll=ya.ic);S.kb&&(ya.pitch=ta.pa(ya.pitch,Nb,k),ja.pitch=ya.pitch);S.Vb&&(ya.vc=ta.pa(ya.vc,a,k),ja.yaw=ya.vc);ja.label=Ja[aa.J].label;ja.distance=Ja[aa.J].Rd;ja.positionScale[0]=ta.pa(p,d,k);ja.positionScale[1]=
ta.pa(t,e,k);ja.positionScale[2]=ta.pa(g,l,k);ja.positionScale[3]=ta.pa(ja.positionScale[3],n,k);ja.detectScore=c}function gc(a){var c=-1,d=-1E12;[ka.Aa,ka.Eb].indexOf(sa)!==-1&&Ja.forEach(function(g,k){g=nb(a,k,0);g>d&&(d=g,c=k)});ya.$b=!0;switch(sa){case ka.Aa:sa=ka.Eb;Qa(a,c,[1,1,1]);fa=0;break;case ka.Eb:++fa;d>W.Bb?(W.Ma?(sa=ka.Ua,eb=c,aa.J=c,aa.Zb=0):(sa=ka.wc,Ob=0,eb=c),Qa(a,eb,[1,1,1])):fa>ha.Ce?Va():Qa(a,c,[1,1,1]);break;case ka.wc:++Ob>W.rb&&(sa=ka.Ua,aa.n=0,aa.fd=0,aa.J=eb,aa.$[0]=0,aa.$[1]=
0);Qa(a,eb,[1,1,1]);xb(W.mb);break;case ka.Ua:if(ya.$b=!1,W.Ma||++aa.n>W.qa){var e=nb(a,aa.J,1);if(W.Ma||e>W.Bb+W.Ab||W.jb){S.Ka&&(Ab=S.nd*Ma(a,aa.J,"roll"),Ua&&(Ia+=Ab));if(Bb){var l=-1;l=W.Ma||W.jb?Kb(a,aa.J):Math.atan2(aa.$[1],aa.$[0]);if(S.kb){var n=.5+.5*Ma(a,aa.J,"pitch");Nb=S.pitchRange[0]+(S.pitchRange[1]-S.pitchRange[0])*n}fc(l,e)}W.jb?(Qa(a,aa.J,W.vd),e>W.td?(aa.Zb=0,ja.label||(ja.label=Ja[aa.J].label)):++aa.Zb>W.pb&&Va()):Bb?Va():Qa(a,aa.J,[.5,.5,.5])}else Va()}else{var p=1-(W.qa-aa.n)/
(W.qa-1);e=1.5-1*p;Qa(a,aa.J,[e,e,e]);xb(W.Ya*(1-p));var t=nb(a,aa.J,p);t<W.Bb*p*W.Za?Va():++aa.fd>10*W.qa?Va():Ja.some(function(g,k){return aa.J===k?!1:nb(a,k,p)>t*(W.Ra*p+(1-p))?!0:!1})?(xb(W.Ta[0]),Ia+=(2*Math.random()-1)*W.Ta[1]*Math.PI/180,aa.n=0,aa.$[0]=0,aa.$[1]=0):(e=Kb(a,aa.J),aa.$[0]+=Math.cos(e),aa.$[1]+=Math.sin(e))}}}function hc(){C.Va([{id:"s63",name:"_",ya:"attribute vec2 a0;uniform vec4 u44;uniform vec2 u41,u42;uniform float u40,u43;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.);float a=u43*(u44.z/u44.w);a*=u42.x/u42.y;float b=cos(u40),c=sin(u40);vec2 f=mat2(b,-c*a,c/a,b)*a0,g=u41+f*u42,d=u44.xy+.5*u44.zw*g;vv0=vec2(d.x,1.-d.y);}",
g:"uniform sampler2D u1;uniform vec2 u15;varying vec2 vv0;const vec3 g=vec3(1.,1.,1.);vec3 c[9];void main(){vec2 d=vv0+.5*u15;c[0]=texture2D(u1,d-u15*vec2(-1.,-1.)).rgb,c[1]=texture2D(u1,d-u15*vec2(-1.,0.)).rgb,c[2]=texture2D(u1,d-u15*vec2(-1.,1.)).rgb,c[3]=texture2D(u1,d-u15*vec2(0.,-1.)).rgb,c[4]=texture2D(u1,d-u15).rgb,c[5]=texture2D(u1,d-u15*vec2(0.,1.)).rgb,c[6]=texture2D(u1,d-u15*vec2(1.,-1.)).rgb,c[7]=texture2D(u1,d-u15*vec2(1.,0.)).rgb,c[8]=texture2D(u1,d-u15*vec2(1.,1.)).rgb;vec3 a,b;a=min(c[0],c[1]),b=max(c[0],c[1]),c[0]=a,c[1]=b,a=min(c[0],c[2]),b=max(c[0],c[2]),c[0]=a,c[2]=b,a=min(c[0],c[3]),b=max(c[0],c[3]),c[0]=a,c[3]=b,a=min(c[0],c[4]),b=max(c[0],c[4]),c[0]=a,c[4]=b,a=min(c[0],c[5]),b=max(c[0],c[5]),c[0]=a,c[5]=b,a=min(c[0],c[6]),b=max(c[0],c[6]),c[0]=a,c[6]=b,a=min(c[0],c[7]),b=max(c[0],c[7]),c[0]=a,c[7]=b,a=min(c[0],c[8]),b=max(c[0],c[8]),c[0]=a,c[8]=b,a=min(c[1],c[2]),b=max(c[1],c[2]),c[1]=a,c[2]=b,a=min(c[1],c[3]),b=max(c[1],c[3]),c[1]=a,c[3]=b,a=min(c[1],c[4]),b=max(c[1],c[4]),c[1]=a,c[4]=b,a=min(c[1],c[5]),b=max(c[1],c[5]),c[1]=a,c[5]=b,a=min(c[1],c[6]),b=max(c[1],c[6]),c[1]=a,c[6]=b,a=min(c[1],c[7]),b=max(c[1],c[7]),c[1]=a,c[7]=b,a=min(c[1],c[8]),b=max(c[1],c[8]),c[1]=a,c[8]=b,a=min(c[2],c[3]),b=max(c[2],c[3]),c[2]=a,c[3]=b,a=min(c[2],c[4]),b=max(c[2],c[4]),c[2]=a,c[4]=b,a=min(c[2],c[5]),b=max(c[2],c[5]),c[2]=a,c[5]=b,a=min(c[2],c[6]),b=max(c[2],c[6]),c[2]=a,c[6]=b,a=min(c[2],c[7]),b=max(c[2],c[7]),c[2]=a,c[7]=b,a=min(c[2],c[8]),b=max(c[2],c[8]),c[2]=a,c[8]=b,a=min(c[3],c[4]),b=max(c[3],c[4]),c[3]=a,c[4]=b,a=min(c[3],c[5]),b=max(c[3],c[5]),c[3]=a,c[5]=b,a=min(c[3],c[6]),b=max(c[3],c[6]),c[3]=a,c[6]=b,a=min(c[3],c[7]),b=max(c[3],c[7]),c[3]=a,c[7]=b,a=min(c[3],c[8]),b=max(c[3],c[8]),c[3]=a,c[8]=b,a=min(c[4],c[5]),b=max(c[4],c[5]),c[4]=a,c[5]=b,a=min(c[4],c[6]),b=max(c[4],c[6]),c[4]=a,c[6]=b,a=min(c[4],c[7]),b=max(c[4],c[7]),c[4]=a,c[7]=b,a=min(c[4],c[8]),b=max(c[4],c[8]),c[4]=a,c[8]=b,gl_FragColor=vec4(c[4]*g,1.);}",
i:"u1 u44 u42 u41 u40 u43 u15".split(" "),precision:"lowp"},{id:"s62",name:"_",ya:"attribute vec2 a0;uniform vec4 u44;uniform vec2 u41,u42;uniform float u40,u43;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.);float a=u43*(u44.z/u44.w);a*=u42.x/u42.y;float b=cos(u40),c=sin(u40);vec2 f=mat2(b,-c*a,c/a,b)*a0,g=u41+f*u42,d=u44.xy+.5*u44.zw*g;vv0=vec2(d.x,1.-d.y);}",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:"u1 u44 u42 u41 u40 u43".split(" "),precision:"lowp"},
{id:"s65",name:"_",ya:"attribute vec2 a0;uniform vec4 u44;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.);vec2 a=u44.xy+.5*u44.zw*a0;vv0=vec2(a.x,1.-a.y);}",g:"uniform sampler2D u1;uniform vec2 u15;varying vec2 vv0;const vec3 g=vec3(1.,1.,1.);float c[5];void main(){c[0]=texture2D(u1,vv0-u15*vec2(-1.,0.)).r,c[1]=texture2D(u1,vv0-u15*vec2(0.,-1.)).r,c[2]=texture2D(u1,vv0-u15).r,c[3]=texture2D(u1,vv0-u15*vec2(0.,1.)).r,c[4]=texture2D(u1,vv0-u15*vec2(1.,0.)).r;float a,b;a=min(c[0],c[1]),b=max(c[0],c[1]),c[0]=a,c[1]=b,a=min(c[0],c[2]),b=max(c[0],c[2]),c[0]=a,c[2]=b,a=min(c[0],c[3]),b=max(c[0],c[3]),c[0]=a,c[3]=b,a=min(c[0],c[4]),b=max(c[0],c[4]),c[0]=a,c[4]=b,a=min(c[1],c[2]),b=max(c[1],c[2]),c[1]=a,c[2]=b,a=min(c[1],c[3]),b=max(c[1],c[3]),c[1]=a,c[3]=b,a=min(c[1],c[4]),b=max(c[1],c[4]),c[1]=a,c[4]=b,a=min(c[2],c[3]),b=max(c[2],c[3]),c[2]=a,c[3]=b,a=min(c[2],c[4]),b=max(c[2],c[4]),c[2]=a,c[4]=b,gl_FragColor=vec4(c[2]*g,1.);}",
i:["u1","u44","u15"],precision:"lowp"},{id:"s64",name:"_",ya:"attribute vec2 a0;uniform vec2 u41,u42;varying vec2 vv0;const vec2 f=vec2(1.,1.);void main(){gl_Position=vec4(a0,0.,1.);vec2 a=u41+a0*u42,b=(a+f)/2.;vv0=b;}",g:"uniform sampler2D u1;uniform vec4 u44;varying vec2 vv0;void main(){vec2 b=u44.xy-.5*u44.zw,c=u44.xy+.5*u44.zw,a=step(b,vv0)*step(vv0,c);vec4 d=texture2D(u1,vec2(vv0.x,1.-vv0.y));gl_FragColor=mix(d,vec4(0.,1.,0.,1.),a.x*a.y*.5);}",i:["u1","u44","u42","u41"],precision:"lowp"}]);var a=
[{type:"1i",name:"u1",value:0}];C.M("s63",a);C.M("s62",a);C.M("s65",a);C.M("s64",a);Pb()}function Pb(){Ia=0;C.M("s62",Qb);C.M("s63",Qb);ja.roll=0}function Xa(){J.aspectRatio=J.A/J.O;Mb.D({ub:va.overlapFactors,ed:va.nScaleLevels,gd:va.scaleFactor,A:J.A,O:J.O,od:va.scale0Factor,G:S.G,jc:va.scanCenterFirst,Zc:va.isSquare})}function Rb(a){Q.sa={isFlipY:!1,isLinear:!0,width:J.A,height:J.O,isPot:!1,isFloat:!1};Q.type===Na.Lb?Object.assign(Q.sa,{isKeepArray:!0,array:a.arrayBuffer}):Object.assign(Q.sa,{F:a});
Q.N=ca.instance(Q.sa);Q.va=!0}function Sb(a,c,d){if(!a.exportData||!a.exportData.labels)return c("INVALID_NN");var e=a.exportData;typeof e.paramsPerLabel==="undefined"&&(e.paramsPerLabel={});typeof d!=="undefined"&&d.paramsPerLabel&&(e.paramsPerLabel=Object.assign(e.paramsPerLabel,d.paramsPerLabel));ob.reset_state();Ra=new M({Na:a.layers,tb:"cpuRGBA2Float",sb:gc});Wa=Ra.ie();ja.NNInputWidth=Wa;U.N=ca.instance({isFloat:!1,isPot:!1,width:Wa});S.G=e.translationScalingFactors?e.translationScalingFactors:
ha.G;e.rollMax?(S.nd=e.rollMax,S.Ka=!0):S.Ka=!1;e.pitchRange?(S.pitchRange=e.pitchRange,S.kb=!0):S.kb=!1;e.splitYawComponents&&(S.nc=!0);typeof e.isYaw!=="undefined"&&(S.Vb=e.isYaw);S.width=Ra.me();a=typeof d==="undefined"?{}:d;yb=typeof a.notHereFactor==="undefined"?1:a.notHereFactor;a=e.labels;d=typeof e.paramsPerLabel==="undefined"?!1:e.paramsPerLabel;var l=typeof e.inputAspectRatio==="undefined"?1:e.inputAspectRatio,n=Math.sqrt(l);J.ua[0]=n;J.ua[1]=1/n;J.Ub=l;Xa();l=Array(a.length);for(n=0;n<
S.width/8;++n)for(var p=0;p<S.width;++p){var t=p+n*S.width;if(t>=a.length)break;var g=p,k=n*8,u=a[t];l[t]={sc:d&&d[u]&&d[u].thresholdDetect?d[u].thresholdDetect:ha.sc,label:u,Rd:e.distances&&e.distances[t]?e.distances[t]:3,cd:{here:g+k*S.width,notHere:g+(k+1)*S.width,yaw:g+(k+2)*S.width,dx:g+(k+3)*S.width,dy:g+(k+4)*S.width,ds:g+(k+5)*S.width,roll:g+(k+6)*S.width,pitch:g+(k+7)*S.width}}}Ja=l;c(!1)}function Tb(a,c,d){if(sa===ka.LOADING||fb!==Ya.IDLE)return-1;Object.assign(pa,ic,d?d:{});W.Bb=pa.thresholdDetectFactor;
W.td=pa.thresholdDetectFactorUnstitch;W.Ma=pa.isSkipConfirmation;W.jb=pa.isKeepTracking;W.vd=pa.trackingFactors;W.Ra=pa.secondNeighborFactor;W.rb=pa.nLocateAutomoves;W.mb=pa.locateMoveNoiseAmplitude;W.qa=pa.nConfirmAutoMoves;W.Ab=pa.thresholdConfirmOffset;W.Ya=pa.confirmMoveNoiseAmplitude;W.pb=pa.nConfirmUnstitchMoves;W.Ta=pa.tiltPosAngleIfAmbiguousDetection;W.Za=pa.confirmScoreMinFactorDuringAutoMove;Ba.X();ja.label=!1;switch(Q.current){case Za.video:Q.type===Na.video&&Q.time!==Q.element.currentTime?
(Q.N.refresh(),Q.time=Q.element.currentTime):Q.type===Na.Lb&&Q.element.needsUpdate&&(Q.N.xd(Q.element.arrayBuffer),Q.element.needsUpdate=!1);switch(pa.cutShader){case "median":J.Ga="s63";break;default:J.Ga="s62"}break;case Za.yd:if(!Q.va){J.A=c.size.width;J.O=c.size.height;switch(pa.cutShader){case "IOS":J.Ga="s65";C.M("s65",[{name:"u15",type:"2f",value:[1/J.A,1/J.O]}]);break;default:J.Ga="s62"}Rb(null);Xa()}Q.N.xd(c.buffer)}a||(a=Cb.ke()+ha.qb[0],Cb.ud());return a}function Ub(a,c){U.N.U();C.set(J.Ga);
Ua&&S.Ka&&C.Z("u40",sa===ka.Ua?Ia:0);Q.N.j(0);C.xb("u44",U.o);Y.m(!1,!1);Bb=a===c-1}function Vb(){Ba.bf();$a&&(b.viewport(0,0,za.width,za.height),C.set("s64"),Q.N.j(0),C.xb("u44",U.o),Y.m(!1,!1),Wb&&b.commit?b.commit():b.flush());return ja}var ta={Zf:function(a){return Math.ceil(Math.log2(a))},ug:function(a){return Math.log2(a)},qg:function(a){return Math.log2(a)%1===0},mf:function(a){var c=[0,0,0,0];a.forEach(function(d){c[0]+=d[0];c[1]+=d[1];c[2]+=d[2];c[3]+=d[3]});return c},Ea:function(a,c,d){return Math.min(Math.max(a,
c),d)},rf:function(a){return a*Math.PI/180},Bg:function(a,c){c=Math.pow(10,c);return Math.round(a*c)/c},Cg:function(a){return Math.round(a*1E6)/1E6},$f:function(a,c){return(100*a/c).toFixed(3)},pa:function(a,c,d){return a*(1-d)+c*d},vg:function(a,c){return a[0]*(1-c)+a[1]*c},Qd:function(a,c){return ta.Kd(a-c)},Kd:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},vf:function(a,c){return Math.abs(ta.Qd(a,c))},ef:function(a,c){return Math.atan2(Math.sin(a)+Math.sin(c),
Math.cos(a)+Math.cos(c))}},pb={get:function(a,c,d){var e=new XMLHttpRequest;e.open("GET",a,!0);e.withCredentials=!1;e.onreadystatechange=function(){e.readyState===4&&(e.status===200||e.status===0?c(e.responseText):typeof d!=="undefined"&&d(e.status))};e.send()},ag:function(a){return new Promise(function(c,d){pb.get(a,c,d)})},Xf:function(a,c,d){a+=d?"?"+pb.Ud(d):"";pb.get(a,function(e){c(JSON.parse(e))})},xg:function(a,c,d){var e=new XMLHttpRequest;e.open("POST",a,!0);e.setRequestHeader("Content-type",
"application/x-www-form-urlencoded");e.onreadystatechange=function(){e.readyState!==4||e.status!==200&&e.status!==0||d(e.responseText)};e.send(c)},Ud:function(a){return typeof a==="string"?a:Object.keys(a).map(function(c){return encodeURIComponent(c)+"="+encodeURIComponent(a[c])}).join("&")},Lf:function(a,c){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){c(d.response)};d.send()}},jc={create:function(a,c){for(var d=Array(c),e=0;e<c;++e)d[e]=a;return d},
sf:function(a,c){for(var d=0;d<a.length;++d)c[d]=a[d]},clone:function(a){for(var c=Array(a.length),d=0;d<a.length;++d)c[d]=a[d];return c},Fg:function(a,c,d){a.forEach(function(e,l){c[l]=e*d})},Tg:function(a){for(var c=a.length-1;c>0;--c){var d=Math.floor(Math.random()*(c+1)),e=a[c];a[c]=a[d];a[d]=e}},Ug:function(a){return a.sort(function(c,d){return c-d})},$e:function(a){return Array.isArray(a)||a.constructor===Float32Array||a.constructor===Uint8Array}},Db={Jb:function(a,c){if(c===0||typeof a!=="object")return a;
a=Object.assign({},a);c=c===void 0||c===-1?-1:c-1;for(var d in a)a[d]=Db.Jb(a[d],c);return a},uf:function(a){return JSON.parse(JSON.stringify(a))}},zb={mc:function(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)},sg:function(a,c,d){return Math.min(Math.max((d-a)/(c-a),0),1)},Gf:function(a,c,d,e){return Math.pow(Math.min(Math.max((e-a)/(c-a),0),1),d)},ah:function(){return 0},wg:function(){return 1},tg:function(a){return a},Df:function(a){return a*a},If:function(a){return a*(2-a)},Af:function(a){return a<
.5?2*a*a:-1+(4-2*a)*a},yf:function(a){return a*a*a},Hf:function(a){return--a*a*a+1},zf:function(a){return a<.5?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},Ef:function(a){return a*a*a*a},Jf:function(a){return 1- --a*a*a*a},Bf:function(a){return a<.5?8*a*a*a*a:1-8*--a*a*a*a},Ff:function(a){return a*a*a*a*a},Kf:function(a){return 1+--a*a*a*a*a},Cf:function(a){return a<.5?16*a*a*a*a*a:1+16*--a*a*a*a*a}},kc={$d:function(a,c,d){switch(a){case "relu":return d+"=max(vec4(0.),"+c+");";case "elu":return d+"=mix(exp(-abs("+
c+"))-vec4(1.),"+c+",step(0.,"+c+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+c+"))-vec4(0.1),"+c+",step(0.,"+c+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";case "gelu":return d+"="+d+";\n          vec4 zou="+c+";\n          vec4 polyZou=0.7978845608028654*(zou+0.044715*zou*zou*zou);\n          vec4 exZou=exp(-abs(polyZou));\n          vec4 exZou2=exZou*exZou;\n          vec4 tanhZou=sign(polyZou)*(vec4(1.)-exZou2)/(vec4(1.)+exZou2);\n          "+
d+"=0.5*zou*(vec4(1.)+tanhZou);";default:return!1}}},C=function(){function a(r,q,B){q=r.createShader(q);r.shaderSource(q,B);r.compileShader(q);return r.getShaderParameter(q,r.COMPILE_STATUS)?q:null}function c(r,q,B){q=a(r,r.VERTEX_SHADER,q);B=a(r,r.FRAGMENT_SHADER,B);r===b&&t.push(q,B);var L=r.createProgram();r.attachShader(L,q);r.attachShader(L,B);r.linkProgram(L);return L}function d(r){return["float","sampler2D","int"].map(function(q){return"precision "+r+" "+q+";\n"}).join("")}function e(r,q){q.u=
q.u?!0:!1;if(!q.u){q.ya=q.ya||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";q.zc=q.zc||["a0"];q.Gb=q.Gb||[2];q.precision=q.precision||y;q.id=u++;q.pd!==void 0&&(q.pd.forEach(function(ba,ia){q.g=q.g.replace(ba,q.wb[ia])}),q.pd.splice(0));q.uc=0;q.Gb.forEach(function(ba){q.uc+=ba*4});var B=d(q.precision);q.ra=c(r,B+q.ya,B+q.g);q.C={};q.i.forEach(function(ba){q.C[ba]=r.getUniformLocation(q.ra,ba)});q.attributes={};q.Ca=[];q.zc.forEach(function(ba){var ia=
r.getAttribLocation(q.ra,ba);q.attributes[ba]=ia;q.Ca.push(ia)});if(q.l){r.useProgram(q.ra);k=q;g=q.id;for(var L in q.l)r.uniform1i(q.C[L],q.l[L])}q.va=!0}}function l(r){Ca.Ue(m);g!==r.id&&(m.S(),g=r.id,k=r,b.useProgram(r.ra),r.Ca.forEach(function(q){q!==0&&b.enableVertexAttribArray(q)}))}function n(r,q,B){e(r,q,B);r.useProgram(q.ra);r.enableVertexAttribArray(q.attributes.a0);g=-1;return k=q}function p(){return{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
i:["u1"],l:{u1:0}}}var t=[],g=-1,k=null,u=0,A=!1,y="highp",v=["u1"],E=["u0"],F={u1:0},f={u0:0},I={u1:0,u2:1},K={u1:0,u3:1},N=["u1","u3","u4"],G=["u5","u6"],h={u5:0},w=["u7","u8","u9","u10"],D={u7:0,u8:1},H={s0:p(),s1:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:v,l:F,precision:"lowp"},s2:{g:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],l:I},s3:{g:"uniform sampler2D u1;uniform vec2 u11,u12;varying vec2 vv0;void main(){vec2 a=vv0*u11+u12;gl_FragColor=texture2D(u1,a);}",
i:["u1","u11","u12"],l:F,u:!0},s4:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:v,l:F},s5:{g:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],l:I},s6:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:v,l:F},s7:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
i:v,l:F},s8:{g:"uniform sampler2D u0;uniform float u11;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u11;}",i:["u0","u11"],l:f},s9:{g:"uniform sampler2D u0;uniform float u11;varying vec2 vv0;const vec4 f=vec4(.25),g=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u11,f);gl_FragColor=b*g;}",i:["u0","u11"],l:f},s10:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:v,l:F},
s11:{g:"uniform sampler2D u1,u13;uniform float u14;const vec4 f=vec4(1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u13,vv0);gl_FragColor=mix(b,a,u14*f);}",i:["u1","u13","u14"],l:{u1:0,u13:1}},s12:{g:"uniform sampler2D u1;uniform vec2 u15;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u15)+texture2D(u1,vv0+u15*vec2(1.,-1.))+texture2D(u1,vv0+u15*vec2(-1.,-1.))+texture2D(u1,vv0+u15*vec2(-1.,1.)));}",i:["u1","u15"],l:F},s13:{g:"uniform sampler2D u1;varying vec2 vv0;vec4 f(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),g=exp2(c);vec3 h=clamp(b/g,0.,1.);return vec4(h,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=f(a);}",
i:v,l:F,u:!0},s14:{g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",i:v,l:F,u:!0},s15:{g:"uniform sampler2D u1;uniform vec4 u16;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u16);gl_FragColor=j(a);}",
i:["u1","u16"],l:F},s16:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:E,l:f,u:!0},s17:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:E,l:f,u:!0},s18:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);const float g=.797885,h=.044715;vec4 i(vec4 a){vec4 b=exp(-abs(a)),c=b*b,d=sign(a)*(e-c)/(e+c);return d;}void main(){vec4 a=texture2D(u0,vv0),b=a+h*a*a*a,c=i(g*b);gl_FragColor=.5*a*(e+c);}",
i:E,l:f,u:!0},s19:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:E,l:f,u:!0},s20:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(a)-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:E,l:f},s21:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:E,l:f},s22:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",
i:E,l:f,u:!0},s23:{g:"uniform sampler2D u0,u17;uniform float u18;const vec2 e=vec2(.5);const float f=1e-5;const vec4 g=vec4(1.),i=vec4(0.);varying vec2 vv0;void main(){vec4 a=texture2D(u17,e);float b=u18*u18;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u17","u18"],l:{u0:0,u17:1},u:!0},s24:{g:"uniform sampler2D u1;uniform vec2 u19;varying vec2 vv0;void main(){float a=u19.x*u19.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u19.y),f=floor(u19.x*fract(b*u19.y)),g=(f*u19.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u19"],l:F},s25:{g:"uniform sampler2D u8,u7,u20;varying vec2 vv0;void main(){vec4 a=texture2D(u20,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u8,b),f=texture2D(u7,c);gl_FragColor=d*f;}",i:["u8","u7","u20"],l:Object.assign({u20:2},D),u:!0},s26:{g:"uniform float u9,u10;uniform sampler2D u8,u7;varying vec2 vv0;void main(){vec2 b=fract(vv0*u9);float a=u9*u10;vec2 c=(vec2(.5)+floor(a*vv0))/a;vec4 d=texture2D(u8,c),f=texture2D(u7,b);gl_FragColor=d*f;}",i:w,l:D},s27:{g:"uniform float u9,u10;uniform vec2 u21;uniform sampler2D u8,u7;varying vec2 vv0;void main(){float a=u9*u10;vec2 b=mod(vv0*u21,vec2(1.)),c=floor(vv0*u21)/u21,d=c+fract(b*u9)/u21,f=(vec2(.5)+floor(a*b))/a;vec4 g=texture2D(u8,f),h=texture2D(u7,d);gl_FragColor=g*h;}",
i:["u21"].concat(w),l:D,u:!0},s28:{g:"uniform float u9,u10;uniform sampler2D u8,u7,u23,u24,u25,u26;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u9),d=vv0;float h=u9*u10;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u8,d),m=texture2D(u7,c),a=texture2D(u26,d);a=floor(.5+a*255.);vec4 n=texture2D(u23,c),o=texture2D(u24,c),p=texture2D(u25,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:["u26","u23","u24","u25"].concat(w),l:Object.assign({u26:3,u23:4,u24:5,u25:6},D),u:!0},s29:{g:"uniform sampler2D u8,u7,u3;uniform float u9,u27,u28,u10;uniform vec2 u29;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u27*vv0),d=u27*vv0-c;float g=u9/u27;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u27;float m=u27*u10/u9;vec2 b=m*h,n=floor(.5*(u10-1.)*(f-u29));b=floor(u29*b+n);vec2 a=(b+i*u28)/u10;a+=.25/u10;vec2 k=step(a,f)*step(l,a);vec4 o=texture2D(u8,j),p=texture2D(u7,a),q=o*p,r=texture2D(u3,j);gl_FragColor=(q*u28*u28+r)*k.x*k.y;}",
i:["u27","u28","u3","u29"].concat(w),l:Object.assign({u3:2},D)},s30:{g:"uniform sampler2D u8,u7;varying vec2 vv0;void main(){vec4 a=texture2D(u8,vv0),b=texture2D(u7,vv0);gl_FragColor=a*b;}",i:["u8","u7"],l:D,u:!0},s31:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:N,l:K},s32:{g:"uniform sampler2D u1,u3;uniform vec2 u21;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0*u21)+u4*texture2D(u1,vv0);}",
i:["u21"].concat(N),l:K,u:!0},s33:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",i:N,l:K,u:!0},s34:{g:"uniform sampler2D u1,u3;uniform vec2 u21;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0*u21)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:["u21"].concat(N),l:K,u:!0},s35:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:N,l:K,u:!0},s36:{g:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:v,l:F,precision:"lowp"},s37:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u30;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u30)).rgb,c=texture2D(u1,vv0+vec2(u30,u30)).rgb,d=texture2D(u1,vv0+vec2(u30,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u30"],l:F,precision:"lowp"},s38:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u30;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u30)).rgb,c=texture2D(u1,vv0+vec2(u30,u30)).rgb,d=texture2D(u1,vv0+vec2(u30,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u30"],l:F,precision:"lowp"},s39:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u31;const vec4 f=vec4(1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u31,vv0.y-u31))*1.,a-=texture2D(u1,vec2(vv0.x-u31,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u31,vv0.y+u31))*1.,a+=texture2D(u1,vec2(vv0.x+u31,vv0.y-u31))*1.,a+=texture2D(u1,vec2(vv0.x+u31,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u31,vv0.y+u31))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u31,vv0.y-u31))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u31))*2.,b-=texture2D(u1,vec2(vv0.x+u31,vv0.y-u31))*1.,b+=texture2D(u1,vec2(vv0.x-u31,vv0.y+u31))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u31))*2.,b+=texture2D(u1,vec2(vv0.x+u31,vv0.y+u31))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u31"],l:I,u:!0},s40:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u31;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u31,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u31"],l:I,u:!0},s41:{g:"uniform sampler2D u5;uniform vec2 u6;varying vec2 vv0;const vec2 f=vec2(1.),g=vec2(.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=f/u6,c=u6/2.,d=floor(vv0*c)+g,j=d/c,b=j-a*.5;vec4 k=texture2D(u5,b),l=texture2D(u5,b+a*h),m=texture2D(u5,b+a*i),n=texture2D(u5,b+a),o=max(k,l),p=max(m,n);gl_FragColor=max(o,p);}",
i:G,l:h,u:!0},s42:{g:"uniform sampler2D u5;uniform vec2 u6;varying vec2 vv0;const vec2 k=vec2(1.),l=vec2(1.,0.),m=vec2(0.,1.),n=vec2(2.,0.),o=vec2(0.,2.);vec4 e(vec2 b,vec2 a){vec4 c=texture2D(u5,a),d=texture2D(u5,a+b*l),f=texture2D(u5,a+b*m),g=texture2D(u5,a+b),h=max(c,d),i=max(f,g);return max(h,i);}void main(){vec2 a=k/u6,c=u6/4.,d=4.*floor(vv0*c),f=d/u6,b=f+a*.5;vec4 g=e(a,b),h=e(a,b+a*n),i=e(a,b+a*2.),p=e(a,b+a*o),q=max(g,h),r=max(i,p);gl_FragColor=max(q,r);}",i:G,l:h,u:!0},s43:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
i:["u1"],l:F,precision:"lowp",u:!0},s44:{g:"uniform sampler2D u1;uniform vec2 u15;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u15)+2002./e*texture2D(u1,vv0-2.*u15)+3003./e*texture2D(u1,vv0-u15)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u15)+2002./e*texture2D(u1,vv0+2.*u15)+1001./e*texture2D(u1,vv0+3.*u15);gl_FragColor=a;}",i:["u15","u1"],l:F,precision:"lowp",u:!0},s45:{g:"uniform sampler2D u1,u17,u32;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u17,vv0),b=texture2D(u32,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",
i:["u1","u17","u32"],l:{u1:0,u17:1,u32:2},u:!0}},O={s46:{g:"uniform float u9,u33;uniform sampler2D u8,u7,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.),ONE2=vec2(1.),HALF2=vec2(.5),EPS2=vec2(1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u9,xyTo=floor(vv0*u9+eps2);float weightSize=toSparsity*u9;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u33*(xyPatch-halfFromSparsity))/u9,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u8,uvWeight)*texture2D(u7,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u9","u8","u7","u3","u33"],wb:["1.1111","gl_FragColor\\*=2.2222;"]},s47:{g:"uniform float u9,u33,u10;uniform sampler2D u8,u7,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.),ONE2=vec2(1.),HALF2=vec2(.5),EPS2=vec2(1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u10,xyTo=floor(vv0*u9+eps2);float weightSize=fromSparsity*u10;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u9;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u33*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u10,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u8,uvWeight)*texture2D(u7,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u9 u10 u8 u7 u3 u33".split(" "),wb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},Z=null,V=null,m={lb:function(){return A},D:function(){if(!A){Z=Db.Jb(H,2);V=Db.Jb(O,2);y="highp";b.getShaderPrecisionFormat&&(b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT),b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.LOW_FLOAT));for(var r in Z)e(b,Z[r],r);C.set("s0");b.enableVertexAttribArray(0);A=!0}},Va:function(r){r.forEach(function(q){m.yc(q)})},yc:function(r){Z[r.id]=r;e(b,r,r.id)},qe:function(r,
q,B){q||(q=r);Z[q]=Object.create(V[r]);Z[q].xe=!0;V[r].wb&&V[r].wb.forEach(function(L,ba){var ia="";L.substring(0,7)==="gl_Frag"?(L=new RegExp("[,;]?"+L,"g"),ia=";"):L=new RegExp(L,"g");Z[q].g=Z[q].g.replace(L,ia+B[ba])});e(b,Z[q],q)},set:function(r){var q=Z[r];q.u&&(q.u=!1,e(b,q,r));l(q)},Pa:function(r){return n(r,p(),"s48")},kc:function(r){return n(r,{g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:y},"s49")},Xd:function(r){return typeof Z[r]==="undefined"?!1:Z[r].va},S:function(){g!==
-1&&(g=-1,k.Ca.forEach(function(r){r!==0&&b.disableVertexAttribArray(r)}))},lc:function(){var r=0;k.Ca.forEach(function(q,B){B=k.Gb[B];b.vertexAttribPointer(q,B,b.FLOAT,!1,k.uc,r);r+=4*B})},Td:function(){b.enableVertexAttribArray(0)},Qa:function(){m.yb(b)},yb:function(r){r.vertexAttribPointer(k.Ca[0],2,r.FLOAT,!1,8,0)},Ng:function(r,q){b.uniform1i(k.C[r],q)},Z:function(r,q){b.uniform1f(k.C[r],q)},V:function(r,q,B){b.uniform2f(k.C[r],q,B)},Ve:function(r,q){b.uniform2fv(k.C[r],q)},Pg:function(r,q){b.uniform3fv(k.C[r],
q)},Og:function(r,q,B,L){b.uniform3f(k.C[r],q,B,L)},We:function(r,q,B,L,ba){b.uniform4f(k.C[r],q,B,L,ba)},xb:function(r,q){b.uniform4fv(k.C[r],q)},Qg:function(r,q){b.uniformMatrix2fv(k.C[r],!1,q)},Rg:function(r,q){b.uniformMatrix3fv(k.C[r],!1,q)},Sg:function(r,q){b.uniformMatrix4fv(k.C[r],!1,q)},M:function(r,q){m.set(r);q.forEach(function(B){switch(B.type){case "4f":b.uniform4fv(k.C[B.name],B.value);break;case "3f":b.uniform3fv(k.C[B.name],B.value);break;case "2f":b.uniform2fv(k.C[B.name],B.value);
break;case "1f":b.uniform1f(k.C[B.name],B.value);break;case "1i":b.uniform1i(k.C[B.name],B.value);break;case "mat2":b.uniformMatrix2fv(k.C[B.name],!1,B.value);break;case "mat3":b.uniformMatrix3fv(k.C[B.name],!1,B.value);break;case "mat4":b.uniformMatrix4fv(k.C[B.name],!1,B.value)}})},Yf:function(){return"lowp"},v:function(){m.S();b.disableVertexAttribArray(0);for(var r in Z){var q=Z[r];q.va&&(q.va=!1,b.deleteProgram(q.ra));q.xe&&delete Z[r]}t.forEach(function(B){b.deleteShader(B)});t.splice(0);u=
0;A=!1;k=null;g=-1}};return m}(),b=null,qb=function(){function a(v){console.log("ERROR in ContextFF: ",v);return!1}function c(){return navigator.userAgent&&navigator.userAgent.indexOf("forceWebGL1")!==-1}function d(v,E,F){v.setAttribute("width",E);v.setAttribute("height",F)}function e(v){if(c())return!1;var E=document.createElement("canvas");d(E,5,5);var F=null;try{F=E.getContext("webgl2",v)}catch(f){return!1}if(!F)return!1;l(F);ea.Hc(F);v=ea.Kb(F);if(!v.ea&&!v.fa)return Ga.v(),ea.reset(),!1;F=Ga.Bc(F,
v);Ga.v();ea.reset();return F?!0:!1}function l(v){v.clearColor(0,0,0,0);v.disable(v.DEPTH_TEST);v.disable(v.BLEND);v.disable(v.DITHER);v.disable(v.STENCIL_TEST);v.disable(v.CULL_FACE);v.GENERATE_MIPMAP_HINT&&v.FASTEST&&v.hint(v.GENERATE_MIPMAP_HINT,v.FASTEST);v.disable(v.SAMPLE_ALPHA_TO_COVERAGE);v.disable(v.SAMPLE_COVERAGE);v.depthFunc(v.LEQUAL);v.clearDepth(1)}var n=null,p=null,t=null,g=!0,k=null,u=null,A=[],y={L:function(){return n.width},aa:function(){return n.height},Pf:function(){return n},
Nf:function(){return b},ga:function(){return g},flush:function(){b.flush()},hg:function(){Ba.reset();Ba.X();y.Oe()},Oe:function(){ca.reset();Y.reset();C.S();C.Td();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);Y.Wa();C.Qa()},be:function(){k||(k=new Uint8Array(n.width*n.height*4));b.readPixels(0,0,n.width,n.height,b.RGBA,b.UNSIGNED_BYTE,k);return k},Rf:function(){return n.toDataURL("image/jpeg")},Sf:function(){Ba.W();p||(p=document.createElement("canvas"),t=p.getContext("2d"));d(p,n.width,n.height);for(var v=
y.be(),E=t.createImageData(p.width,p.height),F=p.width,f=p.height,I=E.data,K=0;K<f;++K)for(var N=f-K-1,G=0;G<F;++G){var h=4*(K*F+G),w=4*(N*F+G);I[h]=v[w];I[h+1]=v[w+1];I[h+2]=v[w+2];I[h+3]=v[w+3]}t.putImageData(E,0,0);return p.toDataURL("image/png")},Qf:function(v){!p&&v&&(p=document.createElement("canvas"),t=p.getContext("2d"));var E=v?p:document.createElement("canvas");d(E,n.width,n.height);(v?t:E.getContext("2d")).drawImage(n,0,0);return E},D:function(v){v=Object.assign({Rb:null,ac:null,$a:null,
Ec:null,width:512,height:512,premultipliedAlpha:!1,te:!0,antialias:!1,debug:!1,tf:!1},v);v.Rb?(b=v.Rb,n=v.Rb.canvas):v.Ec&&!v.$a?n=document.getElementById(v.Ec):v.$a&&(n=v.$a);n||(n=document.createElement("canvas"));n.width=v.width;n.height=v.height;if(b)g=b instanceof WebGL2RenderingContext;else{g=!0;var E={antialias:v.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:v.premultipliedAlpha,stencil:!1,depth:v.te,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&
navigator.userAgent&&navigator.userAgent.indexOf("noAntialiasing")!==-1&&(E.antialias=!1);var F=e(E);F||!E.antialias||c()||(E.antialias=!1,F=e(E));F&&(b=n.getContext("webgl2",E));b?g=!0:((b=n.getContext("webgl",E))||(b=n.getContext("experimental-webgl",E)),g=!1)}if(!b)return a("WebGL1 and 2 are not enabled");v.ac&&n.addEventListener&&(u=v.ac,n.addEventListener("webglcontextlost",u,!1));if(!ea.D())return a("Not enough GL capabilities");l(b);C.D();Y.D();Ga.Bc(b,ea.ae());A.forEach(function(f){f(b)});
A.splice(0);return!0},jf:function(){return new Promise(function(v){b?v(b):A.push(v)})},v:function(){b&&(ea.v(),C.v(),Ga.v());u&&(n.removeEventListener("webglcontextlost",u,!1),u=null);b=k=t=p=n=null;A.splice(0)}};return y}(),Ca=function(){function a(){c===null&&(typeof C!=="undefined"?c=C:typeof JEShaders!=="undefined"&&(c=JEShaders))}var c=null;return{reset:function(){c=null},Ue:function(d){c!==d&&(c&&c.S(),c=d)},lb:function(){return c.lb()},Qa:function(){return c.Qa()},yb:function(d){return c.yb(d)},
lc:function(){return c.lc()},S:function(){return c.S()},set:function(d){a();return c.set(d)},Pa:function(d){a();return c.Pa(d)},kc:function(d){a();return c.kc(d)}}}(),Oa=function(){function a(m){b.bindTexture(b.TEXTURE_2D,m)}function c(m){H[0]=m;m=O[0];var r=m>>16&32768,q=m>>12&2047,B=m>>23&255;return B<103?r:B>142?r|31744|((B==255?0:1)&&m&8388607):B<113?(q|=2048,r|(q>>114-B)+(q>>113-B&1)):r=(r|B-112<<10|q>>1)+(q&1)}function d(m){var r=new Uint16Array(m.length);m.forEach(function(q,B){r[B]=c(q)});
return r}function e(){if(Z.Sb!==null)return Z.Sb;var m=n(d([.5,.5,.5,.5]),!0);return m===null?!0:Z.Sb=m}function l(){if(Z.Tb!==null)return Z.Tb;var m=n(new Uint8Array([127,127,127,127]),!1);return m===null?!0:Z.Tb=m}function n(m,r){if(!Ca.lb()||!F)return null;var q=null,B=Math.sqrt(m.length/4);try{var L=b.getError();if(L==="FUCKING_BIG_ERROR")return!1;q=V.instance({isFloat:!1,R:r,array:m,width:B});L=b.getError();if(L!==b.NO_ERROR)return!1}catch(ba){return!1}ra.W();b.viewport(0,0,B,B);b.clearColor(0,
0,0,0);b.clear(b.COLOR_BUFFER_BIT);Ca.set("s0");q.Ac(0);qa.m(!0,!0);m=4*B*B;r=new Uint8Array(m);b.readPixels(0,0,B,B,b.RGBA,b.UNSIGNED_BYTE,r);B=!0;for(L=0;L<m;++L)B=B&&Math.abs(r[L]-127)<3;q.remove();ra.X();return B}var p=0,t=null,g=0,k=null,u=null,A=null,y=null,v=null,E=null,F=!1,f=[],I={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,we:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,F:null,Tc:null,ve:!1,R:!1,
H:null,ob:4,Wb:0},K=!1,N=null,G=null,h=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],w=!1,D=!1,H=new Float32Array(1),O=new Int32Array(H.buffer),Z={Sb:null,Tb:null},V={D:function(){F||(v=[b.RGBA,null,b.RGBA,b.RGBA],E=[b.RGBA,null,b.RGBA,b.RGBA],t=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7],w=typeof JEContext!=="undefined",D=typeof ea!=="undefined",w&&JEContext.rg()&&t.push(b.TEXTURE8,b.TEXTURE9),k=[-1,-1,-1,-1,-1,-1,-1,-1],y=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT],
F=!0)},Kg:function(){b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR)},Lg:function(){b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST)},pe:function(){if(!u){for(var m=new Float32Array(16384),r=0;r<16384;++r)m[r]=2*Math.random()-1;u={random:V.instance({isFloat:!0,isPot:!0,array:m,width:64}),wd:V.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,
0,0,0])})}}V.df()},rd:function(m){b.framebufferTexture2D(ra.Pb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,m,0)},fg:function(){return u.wd},df:function(){y[1]=ea.Ob(b)},Se:function(){E=v=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},md:function(m){C.set("s1");ra.W();var r=m.L(),q=m.aa();b.viewport(0,0,r,q);m.j(0);qa.m(!1,!1)},zg:function(m,r){V.md(m);b.readPixels(0,0,m.L(),m.aa(),b.RGBA,b.UNSIGNED_BYTE,r)},Ag:function(m,r){V.md(m);return ea.hc(0,0,m.L(),m.aa(),r)},Oc:function(m,r,q,B,L,ba,ia){m.activeTexture(m.TEXTURE0);
var Da=m.createTexture();m.bindTexture(m.TEXTURE_2D,Da);L=L instanceof Float32Array?L:new Float32Array(L);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST);m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,ba);m.texImage2D(m.TEXTURE_2D,0,m.RGBA,q,B,0,m.RGBA,m.FLOAT,L);m.bindTexture(m.TEXTURE_2D,null);m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,
!1);ia&&(ra.X(),C.Pa(m));m.viewport(0,0,q,B);m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,r,0);m.bindTexture(m.TEXTURE_2D,Da);ia?qa.m(!0,!0):Y.eb(m);m.deleteTexture(Da);F&&(k[0]=-1,A=null,p=0)},Fb:function(m){m!==p&&(b.activeTexture(t[m]),p=m)},instance:function(m){var r;function q(){R=x.F.videoWidth!==void 0?x.F.videoWidth:x.F.width;T=x.F.videoHeight!==void 0?x.F.videoHeight:x.F.height}function B(z){var P=b.getError();if(P==="FUCKING_BIG_ERROR")return!1;b.texImage2D(b.TEXTURE_2D,
0,na,la,ma,z);P=b.getError();P!==b.NO_ERROR&&la!==b.RGBA&&(la=b.RGBA,b.texImage2D(b.TEXTURE_2D,0,na,la,ma,z));return!0}function L(){if(!Xb){a(wa);Ha&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,Ha);x.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,x.isMirrorX?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,x.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));x.isAnisotropicFiltering&&
typeof JESETTINGS!=="undefined"&&b.texParameterf(b.TEXTURE_2D,JEContext.Uf().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.ff);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,x.isLinear?b.LINEAR:b.NEAREST);var z=x.isMipmap&&!ab;b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,x.we?b.LINEAR_MIPMAP_LINEAR:x.isLinear?z?b.NEAREST_MIPMAP_LINEAR:b.LINEAR:z?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);la=v[x.ob-1];na=E[x.ob-1];ma=y[Eb];ea.ga()&&(z=ea.ce(),la===b.RGBA&&ma===b.FLOAT?x.isMipmap||x.isLinear?na=Ga.ee(b):ea.Cc()?
z&&(na=z):na=b.RGBA16F||b.RGBA:la===b.RGB&&ma===b.FLOAT&&z&&(na=z,la=b.RGBA));if(x.R&&!x.isFloat||x.isFloat&&x.isMipmap&&Ga.Ae())na=ea.de(),ma=ea.Ob(b);x.Wb&&(rb=x.Wb);x.isSrgb&&x.ob===4&&(la=JEContext.dg());if(x.F)B(x.F);else if(x.url)B(Sa);else if(Aa){z=Aa;try{b.getError()!=="FUCKING_BIG_ERROR"&&(b.texImage2D(b.TEXTURE_2D,0,na,R,T,0,la,ma,z),b.getError()!==b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,na,R,T,0,la,ma,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,R,T,0,b.RGBA,b.UNSIGNED_BYTE,
null)))}catch(xc){b.texImage2D(b.TEXTURE_2D,0,na,R,T,0,la,ma,null)}x.isKeepArray||(Aa=null)}else z=b.getError(),z!=="FUCKING_BIG_ERROR"&&(b.texImage2D(b.TEXTURE_2D,0,na,R,T,0,la,ma,null),z=b.getError(),z!==b.NO_ERROR&&(la=b.RGBA,x.R&&ma!==b.FLOAT&&(ma=b.FLOAT,b.texImage2D(b.TEXTURE_2D,0,na,R,T,0,la,ma,null))));if(x.isMipmap)if(!ab&&da)da.Nb(),sb=!0;else if(ab){z=Math.log2(Math.min(R,T));bb=Array(1+z);bb[0]=wa;for(var P=1;P<=z;++P){var oa=Math.pow(2,P),X=R/oa;oa=T/oa;var Ta=b.createTexture();a(Ta);
b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,na,X,oa,0,la,ma,null);a(null);bb[P]=Ta}sb=!0}a(null);k[p]=-1;Ha&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);gb=!0;x.H&&da&&(x.H(da),x.H=null)}}function ba(){for(var z=R*T,P=2*z,oa=3*z,X=0;X<z;++X)Ea[0][X]=hb[X],Ea[1][X]=hb[X+z],Ea[2][X]=hb[X+P],Ea[3][X]=hb[X+oa]}function ia(){var z=R*T*4;Ka=[new Uint8Array(z),new Uint8Array(z),new Uint8Array(z),new Uint8Array(z)];
Ea=[new Float32Array(Ka[0].buffer),new Float32Array(Ka[1].buffer),new Float32Array(Ka[2].buffer),new Float32Array(Ka[3].buffer)];tb=new Uint8Array(z*4);hb=new Float32Array(tb.buffer);ib=!0}function Da(){r=new Uint8Array(R*T*4);Yb=new Float32Array(r.buffer);Fb=!0}var x=Object.assign({},I,m),jb=g++;x.isFlipY===null&&(x.isFlipY=x.url?!0:!1);x.data&&(x.array=typeof x.data==="string"?Pa(x.data):x.isFloat?new Float32Array(x.data):new Uint8Array(x.data),x.isFlipY=!1);var Eb=0,Zb=x.F?!0:!1,kb=null,Gb=null,
$b=!1;x.R=x.R||x.isFloat;x.R&&(Eb=1);!x.ve&&x.isFloat&&D&&!ea.Cc()&&(x.isFloat=!1);x.isFloat&&(Eb=2);x.isAnisotropicFiltering&&w&&!JEContext.kg()&&(x.isAnisotropicFiltering=!1);var wa=x.Tc||b.createTexture(),Sa=null,Aa=!1,R=0,T=0,gb=!1,Xb=!1,ib=!1,Ea=null,Ka=null,tb=null,hb=null,na=null,la=null,ma=null,Ha=x.isFlipY,lc=(m=x.R&&x.isMipmap)&&Ga.Hd(),ab=m&&!lc?!0:!1,bb=null,rb=-1,ac=-1,sb=!1;var Fb=!1;var Yb=r=null;x.width&&(R=x.width,T=x.height?x.height:R);var da={get:function(){return wa},L:function(){return R},
aa:function(){return T},gg:function(){return x.url},lg:function(){return x.isFloat},ng:function(){return x.R},Jg:function(z){wa=z},og:function(){return x.isLinear},Nb:function(){b.generateMipmap(b.TEXTURE_2D)},Ed:function(z,P){ab?(z||(z=da.Sc()),V.Fb(P),a(bb[z]),k[P]=-1):da.j(P)},Sc:function(){rb===-1&&(rb=Math.log2(R));return rb},Re:function(z){b.TEXTURE_MAX_LEVEL&&b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAX_LEVEL,z)},Zd:function(z){z||(z=da.Sc());if(ab){C.set("s12");V.Fb(0);for(var P=R,oa=T,X=1;X<=
z;++X)P/=2,oa/=2,C.V("u15",.25/P,.25/oa),b.viewport(0,0,P,oa),a(bb[X-1]),b.framebufferTexture2D(ra.Pb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,bb[X],0),qa.m(!1,X===1);k[0]=-1}else z!==ac&&(ac=z,da.Re(z)),da.Nb()},Mg:function(z){(Zb=!jc.$e(z))?(Aa=null,x.F=z,q()):Aa=z},j:function(z){if(!gb)return!1;V.Fb(z);if(k[z]===jb)return!1;a(wa);k[z]=jb;return!0},Ac:function(z){b.activeTexture(t[z]);p=z;a(wa);k[z]=jb},B:function(){A=da;V.rd(wa)},U:function(){b.viewport(0,0,R,T);A=da;V.rd(wa)},tc:V.tc,Qe:function(z,
P){R=z;T=P},resize:function(z,P){da.Qe(z,P);L()},clone:function(z){z=V.instance({width:R,height:T,R:x.R,isFloat:x.isFloat,isLinear:x.isLinear,isMirrorY:x.isMirrorY,isFlipY:z?!Ha:Ha,isPot:x.isPot});Ca.set("s0");ra.X();z.U();da.j(0);qa.m(!0,!0);return z},Xe:function(){b.viewport(0,0,R,T)},remove:function(){b.deleteTexture(wa);Xb=!0;f.splice(f.indexOf(da),1);da=null},refresh:function(){da.Ac(0);Ha&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Zb?b.texImage2D(b.TEXTURE_2D,0,na,la,ma,x.F):b.texImage2D(b.TEXTURE_2D,
0,na,R,T,0,la,ma,Aa);Ha&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},ld:function(){ib||ia();b.readPixels(0,0,R,T*4,b.RGBA,b.UNSIGNED_BYTE,tb);ba();return Ea},Ke:function(){ib||ia();return ea.hc(0,0,R,T*4,tb).then(function(){ba();return Ea})},Me:function(){Fb||Da();b.readPixels(0,0,R,T,b.RGBA,b.UNSIGNED_BYTE,r);return Yb},Le:function(){Fb||Da();return ea.hc(0,0,R,T,r)},Gc:function(z){ra.W();C.set("s15");da.j(0);if(z)b.viewport(0,0,R,T),C.We("u16",.25,.25,.25,.25),qa.m(!1,!0);else for(z=0;z<4;++z)b.viewport(0,
T*z,R,T),C.xb("u16",h[z]),qa.m(!1,z===0)},xd:function(z){var P=ma===y[0]&&!l();a(wa);Ha&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);P?($b||(kb=document.createElement("canvas"),kb.width=R,kb.height=T,Gb=kb.getContext("2d"),Gb.createImageData(R,T),$b=!0),null.data.set(z),Gb.putImageData(null,0,0),b.texImage2D(b.TEXTURE_2D,0,na,la,ma,kb)):b.texImage2D(b.TEXTURE_2D,0,na,R,T,0,la,ma,z);k[p]=jb;Ha&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},$g:function(z,P){a(wa);P&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,
0,na,la,ma,z);k[p]=jb;P&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Gg:function(z,P){var oa=R*T,X=oa*4;z=x.R?z?"RGBE":"JSON":"RGBA";P&&(z=P);P=ea.ga()&&!1;var Ta=null;switch(z){case "RGBE":Ta="s13";break;case "JSON":Ta=P?"s0":"s15";break;case "RGBA":case "RGBAARRAY":Ta="s7"}ib||(z==="RGBA"||z==="RGBE"||z==="RGBAARRAY"?(Ka=new Uint8Array(X),ib=!0):z!=="JSON"||P||ia());ra.W();C.set(Ta);da.j(0);X=null;if(z==="RGBA"||z==="RGBE"||z==="RGBAARRAY"){b.viewport(0,0,R,T);qa.m(!0,!0);b.readPixels(0,0,R,T,b.RGBA,
b.UNSIGNED_BYTE,Ka);if(z==="RGBAARRAY")return{data:Ka};K||(N=document.createElement("canvas"),G=N.getContext("2d"),K=!0);N.width=R;N.height=T;oa=G.createImageData(R,T);oa.data.set(Ka);G.putImageData(oa,0,0);X=N.toDataURL("image/png")}else if(z==="JSON")if(P)X=new Float32Array(oa),b.viewport(0,0,R,T),qa.m(!0,!0),b.readPixels(0,0,R,T,b.RGBA,b.FLOAT,X);else{for(X=0;X<4;++X)b.viewport(0,T*X,R,T),C.xb("u16",h[X]),qa.m(!X,!X);da.ld();X=Array(oa);for(P=0;P<oa;++P)X[4*P]=Ea[0][P],X[4*P+1]=Ea[1][P],X[4*P+
2]=Ea[2][P],X[4*P+3]=Ea[3][P]}return{format:z,data:X,width:R,height:T,isMirrorY:x.isMirrorY,isFlipY:z==="RGBA"?x.isFlipY:!x.isFlipY}}};x.isMipmap&&!ab&&gb&&!sb&&(da.Nb(),sb=!0);if(x.url)a(wa),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),Sa=new Image,Sa.crossOrigin="anonymous",Sa.src=x.url,Sa.onload=function(){R=Sa.width;T=Sa.height;L()};else if(x.F){var bc=function(){q();R?L():setTimeout(bc,1)};bc()}else x.array?(x.R&&!x.isFloat?x.array instanceof Uint16Array?(Aa=x.array,
L()):e()?(Aa=d(x.array),L()):(L(),V.Oc(b,wa,da.L(),da.aa(),x.array,Ha,!0)):(Aa=x.isFloat?x.array instanceof Float32Array?x.array:new Float32Array(x.array):x.array instanceof Uint8Array?x.array:new Uint8Array(x.array),L()),x.isKeepArray||(Aa&&Aa!==x.array&&(Aa=null),delete x.array)):x.Tc?gb=!0:L();da.cg=da.L;x.H&&gb&&(x.H(da),x.H=null);f.push(da);return da},W:function(m){m!==p&&(b.activeTexture(t[m]),p=m);k[m]=-1;a(null)},hf:function(m){u.random.j(m)},tc:function(){A=null;b.framebufferTexture2D(ra.Pb(),
b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},reset:function(){p!==0&&b.activeTexture(t[0]);for(var m=0;m<t.length;++m)k[m]=-1;p=-1},Dg:function(){p=-1},af:function(){for(var m=0;m<t.length;++m)V.W(m)},Qc:function(){u&&(u.random.remove(),u.wd.remove())},Yg:function(m,r){if(m.format==="RGBA"||m.format==="RGBE"){var q=new Image;q.src=m.data;q.onload=function(){V.instance({isMirrorY:m.isMirrorY,isFlipY:m.isFlipY,isFloat:!1,F:q,H:function(B){if(m.format==="RGBA")r(B);else{var L=m.width,ba=m.height,ia=V.instance({isMirrorY:m.isMirrorY,
isFloat:!0,width:L,height:ba,isFlipY:m.isFlipY});ra.X();b.viewport(0,0,L,ba);C.set("s14");ia.B();B.j(0);qa.m(!0,!0);V.W(0);r(ia);ea.flush();B.remove()}}})}}else m.format==="JSON"?r(V.instance({isFloat:!0,isFlipY:m.isFlipY,width:m.width,height:m.height,array:new Float32Array(m.data)})):r(!1)},Ld:d,v:function(){A&&(Ba.X(),V.tc(),Ba.W());V.af();f.slice(0).forEach(function(m){m.remove()});f.splice(0);F=!1;g=0;typeof Ga!=="undefined"&&Ga.v();u=null}};return V}(),qa=function(){function a(g){var k={ba:null,
indices:null};k.ba=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,k.ba);g.bufferData(g.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),g.STATIC_DRAW);k.indices=g.createBuffer();g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,k.indices);g.bufferData(g.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),g.STATIC_DRAW);return k}var c=null,d=0,e=!1,l=[],n=-2,p=-2,t={reset:function(){p=n=-2},D:function(){e||(c=a(b),t.Wa(),e=!0)},instance:function(g){var k=d++,u=g.indices?g.indices.length:0,A=typeof g.mode==="undefined"?
b.STATIC_DRAW:g.mode,y=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,y);b.bufferData(b.ARRAY_BUFFER,g.ba instanceof Float32Array?g.ba:new Float32Array(g.ba),A);n=k;var v=null,E=null,F=null;if(g.indices){v=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,v);var f=null;g.indices.length<65536?(f=Uint16Array,E=b.UNSIGNED_SHORT,F=2):(f=Uint32Array,E=b.UNSIGNED_INT,F=4);f=g.indices instanceof f?g.indices:new f(g.indices);b.bufferData(b.ELEMENT_ARRAY_BUFFER,f,A);p=k}var I={Fd:function(K){n!==k&&(b.bindBuffer(b.ARRAY_BUFFER,
y),n=k);K&&Ca.lc()},Cd:function(){p!==k&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,v),p=k)},bind:function(K){I.Fd(K);I.Cd()},wf:function(){b.drawElements(b.TRIANGLES,u,E,0)},xf:function(K,N){b.drawElements(b.TRIANGLES,K,E,N*F)},remove:function(){b.deleteBuffer(y);g.indices&&b.deleteBuffer(v);I=null}};l.push(I);return I},Wa:function(){n!==-1&&(b.bindBuffer(b.ARRAY_BUFFER,c.ba),n=-1);p!==-1&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.indices),p=-1)},m:function(g,k){g&&qa.Wa();k&&Ca.Qa();b.drawElements(b.TRIANGLES,
3,b.UNSIGNED_SHORT,0)},eb:function(g){g=g||b;var k=a(g);g.bindBuffer(g.ARRAY_BUFFER,k.ba);g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,k.indices);Ca.yb(g);g.clear(g.COLOR_BUFFER_BIT);g.drawElements(g.TRIANGLES,3,g.UNSIGNED_SHORT,0);g.flush();g.bindBuffer(g.ARRAY_BUFFER,null);g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,null);g.deleteBuffer(k.ba);g.deleteBuffer(k.indices);t.reset();e&&(t.Wa(),Ca.Qa())},Qc:function(){var g=b,k=c;g.deleteBuffer(k.ba);g.deleteBuffer(k.indices)},v:function(){t.Qc();l.forEach(function(g){g.remove()});
b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);t.reset();e=!1;l.splice(0);d=0}};return t}(),ra=function(){var a=null,c=null,d=null,e=!1,l=[],n={I:-2,Nc:1},p={lb:function(){return e},D:function(){if(!e){a=b.createFramebuffer();var t=ea.ga();c=t&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=t&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;e=!0}},Vf:function(){return c},fe:function(){return d},Pb:function(){return b.FRAMEBUFFER},bg:function(){return n},Mf:function(){return a},
instance:function(t){t.Wc===void 0&&(t.Wc=!1);var g=t.N?t.N:null,k=t.width,u=t.height!==void 0?t.height:t.width,A=a,y=null,v=!1,E=!1,F=0;g&&(k=k?k:g.L(),u=u?u:g.aa());var f={qd:function(){v||(A=b.createFramebuffer(),v=!0,F=n.Nc++)},Ad:function(){f.qd();f.B();y=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,y);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,k,u);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,y);b.clearDepth(1)},bind:function(I,K){F!==n.I&&(b.bindFramebuffer(c,
A),n.I=F);g&&g.B();K&&b.viewport(0,0,k,u);I&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},gf:function(){F!==n.I&&(b.bindFramebuffer(c,A),n.I=F)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},pf:function(){b.clear(b.COLOR_BUFFER_BIT)},qf:function(){b.clear(b.DEPTH_BUFFER_BIT)},Xe:function(){b.viewport(0,0,k,u)},B:function(){F!==n.I&&(b.bindFramebuffer(c,A),n.I=F)},rtt:function(I){g=I;n.I!==F&&(b.bindFramebuffer(b.FRAMEBUFFER,A),n.I=F);I.B()},W:function(){b.bindFramebuffer(c,null);
n.I=-1},resize:function(I,K){k=I;u=K;y&&(b.bindRenderbuffer(b.RENDERBUFFER,y),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,k,u))},remove:function(){A===a||E||(b.bindFramebuffer(c,A),b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0),y&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null),b.bindFramebuffer(c,null),n.I=-1,b.deleteFramebuffer(A),y&&b.deleteRenderbuffer(y));E=!0}};t.Wc&&f.Ad();l.push(f);return f},W:function(){b.bindFramebuffer(c,null);n.I=-1},
bf:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);ea.sd();n.I=-1},reset:function(){n.I=-2},X:function(){n.I!==0&&(b.bindFramebuffer(c,a),n.I=0)},clear:function(){ea.sd();b.clear(b.COLOR_BUFFER_BIT)},v:function(){p.W();l.forEach(function(t){t.remove()});a!==null&&(b.deleteFramebuffer(a),a=null);p.reset();e=!1;l.splice(0);n.Nc=1}};return p}(),ea=function(){function a(){t=typeof qb==="undefined"?JEContext:qb;g=!0}function c(h,w,D){for(var H=0;H<w.length;++H){var O=
D.getExtension(w[H]+"_"+h);if(O)return O}return null}function d(){f.Cb!==null&&(clearTimeout(f.Cb),f.Cb=null);f.wa=!1}function e(h){if(f.na.length===0){f.oa=b.PIXEL_PACK_BUFFER;f.na.splice(0);f.gb.splice(0);for(var w=0;w<f.Fa;++w)f.na.push(b.createBuffer()),f.gb.push(-1);f.da=0;f.Yb=0}b.bindBuffer(f.oa,f.na[f.da]);h.byteLength!==f.gb[f.da]&&(b.bufferData(f.oa,h.byteLength,b.STREAM_READ),f.gb[f.da]=h.byteLength);f.ig=!0}function l(){b.bindBuffer(f.oa,null)}function n(){f.ta.forEach(function(h){b.deleteSync(h)});
f.ta.splice(0)}function p(){f.da=(f.da+1)%f.Fa;++f.Yb}var t=null,g=!1,k={Xc:!1,oc:null,pc:null,$c:!1,ze:!1,qc:null,ad:!1,rc:null,Yc:!1,Hb:null,re:!1,Ib:null,se:!1},u=null,A={ea:!0,fa:!0,Mb:!0,kd:!1},y=null,v=!0,E=null,F=null,f={Md:1,Fa:-1,da:0,Yb:0,wa:!1,na:[],ta:[],gb:[],oa:null,Cb:null},I="EXT WEBGL OES MOZ_OES WEBKIT_OES KHR".split(" "),K=["OES","MOZ_OES","WEBKIT_OES"],N=typeof window==="undefined"?{}:window,G={D:function(){if(g)return!0;G.reset();g||a();var h=b;if(!u.Xc){u.oc=G.Kc(h);N.GL_EXT_FLOAT=
u.oc;u.$c=u.oc?!0:!1;if(u.$c||G.ga())u.pc=G.Lc(h),u.ze=u.pc?!0:!1,N.GL_EXT_FLOATLINEAR=u.pc;u.Xc=!0}if(!u.Yc){u.qc=G.cb(h);u.qc&&(u.ad=!0,N.GL_EXT_HALFFLOAT=u.qc);if(u.ad||G.ga())u.rc=G.Mc(h),N.GL_EXT_HALFFLOATLINEAR=u.rc;u.jg=u.rc?!0:!1;u.Yc=!0}u.Hb=G.Ic(h);u.re=u.Hb?!0:!1;N.GL_EXT_COLORBUFFERFLOAT=u.Hb;u.Ib=G.Jc(h);u.se=u.Ib?!0:!1;N.GL_EXT_COLORBUFFERHALFFLOAT=u.Ib;ra.D();Oa.D();if(!G.Nd())return!1;qa.D();Oa.pe();return!0},reset:function(){u=Object.assign({},k);y=Object.assign({},A)},L:function(){g||
a();return t.L()},aa:function(){g||a();return t.aa()},ga:function(){g||a();return t.ga()},Hc:function(h){G.Ic(h);G.Jc(h);G.Kc(h);G.Lc(h);G.cb(h);G.Mc(h)},Ic:c.bind(null,"color_buffer_float",I),Jc:c.bind(null,"color_buffer_half_float",I),Kc:c.bind(null,"texture_float",K),Lc:c.bind(null,"texture_float_linear",K),cb:c.bind(null,"texture_half_float",K),Mc:c.bind(null,"texture_half_float_linear",K),Ob:function(h){var w=G.cb(h);return w&&w.HALF_FLOAT_OES?w.HALF_FLOAT_OES:h.HALF_FLOAT||h.FLOAT},ce:function(){return F||
b.RGBA32F||b.RGBA},de:function(){return E||b.RGBA16F||b.RGBA},ae:function(){return y},Cc:function(){return y.ea},lf:function(){return y.fa},kf:function(){return y.Mb},Id:function(){return y.kd&&v},Wg:function(h){v=h;!h&&f.wa&&(n(),b.bindBuffer(f.oa,null),f.wa=!1)},pg:function(){return f.wa},zb:function(h,w,D){function H(){h.bindTexture(h.TEXTURE_2D,null);h.bindFramebuffer(O,null);h.deleteTexture(m);h.deleteFramebuffer(V)}var O=h.FRAMEBUFFER,Z=h.NEAREST,V=h.createFramebuffer();h.bindFramebuffer(O,
V);var m=h.createTexture();h.activeTexture(h.TEXTURE0);h.bindTexture(h.TEXTURE_2D,m);h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,Z);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,Z);h.texImage2D(h.TEXTURE_2D,0,w,3,3,0,h.RGBA,D,null);h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,m,0);if(h.checkFramebufferStatus(h.READ_FRAMEBUFFER||
h.FRAMEBUFFER)!==h.FRAMEBUFFER_COMPLETE)return H(),!1;Ca.kc(h);h.clearColor(0,0,0,0);h.viewport(0,0,3,3);h.disable(h.DEPTH_TEST);h.clear(h.COLOR_BUFFER_BIT);qa.eb(h);h.bindFramebuffer(O,null);Ca.Pa(h);h.activeTexture(h.TEXTURE0);h.bindTexture(h.TEXTURE_2D,m);qa.eb(h);w=new Uint8Array(36);h.readPixels(0,0,3,3,h.RGBA,h.UNSIGNED_BYTE,w);H();for(D=0;D<36;++D)if(D%4!==3&&Math.abs(w[D]-127)>3)return!1;return!0},Kb:function(h){var w={ea:!1,fa:!1};h.disable(h.BLEND);h.clearColor(0,0,0,0);h.clear(h.COLOR_BUFFER_BIT);
h.RGBA32F&&G.zb(h,h.RGBA32F,h.FLOAT)&&(w.ea=!0,F=h.RGBA32F);!w.ea&&G.zb(h,h.RGBA,h.FLOAT)&&(w.ea=!0,F=h.RGBA);var D=G.Ob(h);E=null;h.RGBA16F&&G.zb(h,h.RGBA16F,D)&&(w.fa=!0,E=h.RGBA16F);!w.fa&&G.zb(h,h.RGBA,D)&&(w.fa=!0,E=h.RGBA);return w},Od:function(){var h=ra.instance({width:2});h.qd();var w=Oa.instance({width:2,isFloat:!0,ob:3});h.B();w.B();G.flush();b.checkFramebufferStatus(ra.fe())!==b.FRAMEBUFFER_COMPLETE?(Oa.Se(),y.Mb=!1):y.Mb=!0;h.remove();w.remove()},Pd:function(){var h=!1;G.ga()&&(h="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(w){return typeof b[w]!==
"undefined"}));y.kd=h},Nd:function(){var h=G.Kb(b);Object.assign(y,h);if(!y.ea&&!y.fa)return!1;G.Od();G.Pd();return!0},Ne:function(h,w,D,H,O){b.readPixels(h,w,D,H,b.RGBA,b.UNSIGNED_BYTE,O);return Promise.resolve(O,!1)},hc:function(h,w,D,H,O,Z,V){if(!G.Id())return G.Ne(h,w,D,H,O);f.Fa=V||f.Md;e(O);b.readPixels(h,w,D,H,b.RGBA,b.UNSIGNED_BYTE,0);f.ta[f.da]=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);G.flush();var m=!1;return new Promise(function(r,q){function B(){if(!f.wa)return d(),l(),p(),q(),!1;var L=
(f.da+1)%f.Fa;switch(b.clientWaitSync(f.ta[L],0,0)){case b.TIMEOUT_EXPIRED:case b.WAIT_FAILED:break;default:return d(),b.deleteSync(f.ta[L]),f.ta[L]=null,b.bindBuffer(f.oa,f.na[L]),b.getBufferSubData(f.oa,0,O),l(),p(),r(O,m),!0}f.Cb=setTimeout(B,0);return!1}d();f.Yb+1<f.Fa?(l(),p(),r(O,!1)):(f.wa=!0,B()||!Z||m||(m=!0,Z()))})},sd:function(){b.viewport(0,0,G.L(),G.aa())},flush:function(){b.flush()},v:function(){d();n();Oa.v();ra.v();qa.v();f.na.forEach(function(h){b.deleteBuffer(h)});f.na.splice(0);
Ca.reset();g=!1}};return G}(),Y=qa,Ba=ra,ca=Oa,Ga=function(){function a(h,w,D,H){f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,H?f.NEAREST_MIPMAP_NEAREST:f.LINEAR);var O=null;if(D!==null)try{O=f.getError();if(O==="FUCKING_BIG_ERROR")return!1;f.texImage2D(f.TEXTURE_2D,0,h,4,4,0,f.RGBA,w,D);O=f.getError();if(O!==f.NO_ERROR)return!1}catch(Z){return!1}H&&f.generateMipmap(f.TEXTURE_2D);f.clear(f.COLOR_BUFFER_BIT);Y.eb(f);O=f.getError();if(O==="FUCKING_BIG_ERROR")return!1;f.readPixels(0,0,2,2,f.RGBA,
f.UNSIGNED_BYTE,u);O=f.getError();O===f.INVALID_OPERATION&&typeof f.PIXEL_PACK_BUFFER!=="undefined"&&(f.bindBuffer(f.PIXEL_PACK_BUFFER,null),f.readPixels(0,0,2,2,f.RGBA,f.UNSIGNED_BYTE,u),O=f.getError());if(O!==f.NO_ERROR)return!1;D=!0;for(H=0;H<16;++H)D=D&&Math.abs(u[H]-127)<4;D&&(g.jd=w,g.Vc=h);return D}function c(h,w){return I.ea&&a(h,f.FLOAT,new Float32Array(A),w)?(t=p.xc,!0):!1}function d(h,w,D){if(!I.fa)return!1;var H=Oa.Ld(A),O=ea.cb(f);if(O&&O.HALF_FLOAT_OES&&a(h,O.HALF_FLOAT_OES,H,w)||f.HALF_FLOAT&&
a(h,f.HALF_FLOAT,H,w))return t=p.za,!0;H=new Float32Array(A);if(a(h,f.FLOAT,H,w))return t=p.za,!0;f.bindTexture(f.TEXTURE_2D,D);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,2,2,0,f.RGBA,f.UNSIGNED_BYTE,null);f.bindFramebuffer(g.ab,G);Oa.Oc(f,D,2,2,H,!1,!1);f.bindFramebuffer(g.ab,null);f.bindTexture(f.TEXTURE_2D,D);return a(h,null,null,w)?(t=p.za,!0):!1}function e(h,w,D){k=!0;if(d(h,!0,D)||c(w,!0))return!0;k=!1;return d(h,!1,D)||c(w,!1)?!0:!1}function l(h){if(t===p.S){f=h||b;t=p.RGBA8;k=!0;ea.Hc(f);I||(I=ea.Kb(f));
Ba.reset();G=f.createFramebuffer();g.ab=f.DRAW_FRAMEBUFFER||f.FRAMEBUFFER;f.bindFramebuffer(g.ab,null);f.clearColor(0,0,0,0);f.viewport(0,0,2,2);C.S();K=C.Pa(f);h=f.createTexture();f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,h);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);N=h;var w=h=f.RGBA,D=f.RGBA16F,H=f.RGBA32F;H&&(h=H);D&&(w=D);if((D||H)&&e(w,h,N))return n(),
!0;h=w=f.RGBA;if(e(w,h,N))return n(),!0;t=p.RGBA8;n();return!1}}function n(){f.deleteProgram(K.ra);f.deleteTexture(N);N=K=null}for(var p={S:-1,xc:3,za:2,RGBA8:0},t=p.S,g={jd:null,Vc:null,ab:null},k=!0,u=new Uint8Array(16),A=Array(64),y=0;y<4;++y)for(var v=0;v<4;++v){var E=(v+y)%2===0?1:0,F=y*4+v;A[4*F]=E;A[4*F+1]=E;A[4*F+2]=E;A[4*F+3]=E}var f=null,I=null,K=null,N=null,G=null;return{Hd:function(h){l(h);return k},Bc:function(h,w){t===p.S&&(typeof(w!=="undefined")&&(I=w),l(h));return t!==p.RGBA8},mg:function(h){l(h);
return t===p.xc},Ae:function(h){l(h);return t===p.za},Wf:function(h){l(h);return g.jd},ee:function(h){l(h);return g.Vc},v:function(){f=null;k=!0;t=p.S;I=null}}}(),dc=function(){return{instance:function(a){function c(){u&&u.remove();u=ca.instance({isFloat:!1,isPot:!1,width:d.size*d.T[0],height:d.size*d.T[1],isLinear:d.isLinear})}var d=Object.assign({mask:null,size:-1,preprocessing:"none",preprocessingSize:a.size,customInputShader:null,isLinear:!0,nBlurPass:1,varianceMin:.1,blurKernelSizePx:5,gain:1,
overlap:0,isNormalized:!1,tilt:-1,T:[1,1]},a),e=null,l=!1,n=!1,p=null,t=!1;a=!1;var g=null;d.mask&&(l=!0,typeof SETTINGS!=="undefined"&&SETTINGS&&SETTINGS.Bd!==void 0&&(d.mask=SETTINGS.Bd+d.mask),e=ca.instance({isFloat:!1,url:d.mask}));var k=null;d.customInputShader&&(k="s50",C.yc({name:"_",id:k,g:d.customInputShader,Xg:["uSource"],precision:"lowp"}),C.M(k,[{type:"1i",name:"_",value:0}]));switch(d.preprocessing){case "sobel":g="s39";t=!0;break;case "meanNormalization":g="s40";t=!0;break;case "grayScale":g=
"s36";t=!1;break;case "grayScaleTilt":g="s37";a=!0;t=!1;break;case "rgbGrayTilt":g="s38";a=!0;t=!1;break;case "copy":g=k?k:"s0";break;case "inputLightRegulation":g=k?k:"s36";p=mc.instance({Uc:d.preprocessingSize,hd:d.size,dd:d.nBlurPass,Y:!1});n=!0;break;case "inputMix0":g="none";p=nc.instance({A:d.preprocessingSize,ka:d.varianceMin,ca:d.blurKernelSizePx,gain:d.gain||1,Y:!1,isLinear:d.isLinear});n=!0;break;case "inputMix1":g="none";p=oc.instance({A:d.preprocessingSize,ka:d.varianceMin,ca:d.blurKernelSizePx,
gain:d.gain||1,Y:!1});n=!0;break;case "inputCut4":g="none";p=pc.instance({A:d.preprocessingSize,ka:d.varianceMin,ca:d.blurKernelSizePx,gain:d.gain||1,Ja:d.isNormalized||!1,fc:d.overlap||0,Y:!1});d.preprocessingSize*=p.ge();n=!0;break;case "direct":case "none":case "abort":g="abort";break;default:g="s4"}d.preprocessingSize=Math.ceil(d.preprocessingSize);a&&C.M(g,[{name:"u30",type:"1f",value:d.tilt}]);l&&(g+="Mask");var u=null;c();var A={L:function(){return d.size},he:function(){return d.preprocessingSize},
Qb:function(){return A.L()},le:function(){return n?p.Ha():u},Db:function(y){d.T=y;c()},P:function(y){Ba.X();if(g==="abort")return y.j(0),y;g!=="none"&&(C.set(g),t&&C.Z("u31",1/d.size),u.U(),l&&e.j(1),Y.m(!1,!1),u.j(0),y=u);n&&p.process(y)},v:function(){u.remove();l&&e.remove()}};return A}}}(),ec=function(){return{instance:function(a){function c(){if(G.xa){l.input&&(l.input.remove(),l.hb.remove());var w=a.size*a.sparsity;N=Math.log(w/a.size)/Math.log(2);l.input=ca.instance({isMipmap:!0,isFloat:!0,
isPot:!0,width:w*a.T[0],height:w*a.T[1],Wb:N});l.hb=ca.instance({isFloat:!0,isPot:!0,width:a.size*a.T[0],height:a.size*a.T[1]})}}function d(){l.output&&l.output.remove();l.output=ca.instance({isFloat:!0,isPot:!p,isLinear:!p&&t.isLinear,width:a.size*a.T[0],height:a.size*a.T[1]})}function e(w){t.buffer.forEach(function(D,H){t.results[H][0]=w[0][D];t.results[H][1]=w[1][D];t.results[H][2]=w[2][D];t.results[H][3]=w[3][D]});return t.results}a.normalize=a.normalize||!1;var l={input:null,bias:null,hb:null,
output:null,ec:null,cc:null,dc:null},n=null,p=!0,t={type:"undef",H:null,isLinear:!1,buffer:[],results:[],ib:!1},g=-1,k=a.isReorganize?a.isReorganize:!1,u=a.kernelsCount?!0:!1,A=[a.Ia?"s32":"s31",a.Ia?"s34":"s33","s35"][a.shiftRGBAMode||0],y={isEnabled:!1},v=1/a.size;a.ye?(a.sparsity=typeof a.sparsity!=="undefined"?a.sparsity:a.vb.Qb(),p=!1):a.connectivityUp==="full"&&(a.sparsity=a.vb.Qb());var E={elu:"s19",elu01:"s20",relu:"s17",gelu:"s18",arctan:"s21",arctan2:"s22",sigmoid:"s16",copy:"s0"}[a.activation],
F=a.sparsity*a.sparsity,f=!1,I=a.size,K="";if(a.maxPooling){switch(a.maxPooling.size){case 2:K="s41";break;case 4:K="s42"}f=!0;I/=a.maxPooling.size;l.cc=ca.instance({isFloat:!0,isPot:!1,width:I})}var N=-1,G=null;p&&d();l.bias=ca.instance(a.bias);var h={L:function(){return a.size},Qb:function(){return I},Rc:function(){return a.classesCount},Dd:function(w){n.j(w)},Ge:function(){a.remap&&a.remap.isEnabled&&(y={isEnabled:!0,Be:ca.instance(a.remap.maskTexture),Na:a.remap.layers.map(function(w){return a.parent.je(w)}),
depth:a.remap.depth})},Te:function(){switch(a.connectivityUp){case "direct":G=qc.instance(a.connectivity);break;case "square":G=rc.instance(a.connectivity);break;case "squareFast":G=sc.instance(a.connectivity,a.activation);break;case "full":G=tc.instance(Object.assign({Ia:a.Ia},a.connectivity));break;case "conv":g=a.kernelsCount,G=uc.instance(a.connectivity),k&&(l.ec=ca.instance({width:I,isFloat:!0,isFlipY:!1,isPot:!1}))}c()},P:function(w,D){n=w;G.xa?(l.input.U(),u&&l.bias.j(2),G.P(y),l.input.j(0),
l.input.Zd(N),l.hb.U(),u?C.set("s0"):(C.set(A),C.Z("u4",F),l.bias.j(1)),l.input.Ed(N,0),Y.m(!1,!1),C.set(E),l.output.B(),l.hb.j(0),Y.m(!1,!1)):(l.output.U(),l.bias.j(1),G.P());if(p)return D=l.output,f&&(l.cc.U(),D.j(0),C.set(K),C.V("u6",a.size,a.size),Y.m(!1,!1),D=l.cc),k&&(l.ec.B(),C.set("s24"),C.V("u19",g,I/g),D.j(0),Y.m(!1,!1),D=l.ec),D.j(0),D;var H=l.output;if(a.normalize||t.ib)w=a.normalize,C.set(t.ib?"s9":"s8"),C.Z("u11",w?v:1),l.dc.U(),H.j(0),Y.m(!1,!1),H=l.dc;w=null;switch(t.type){case "cpuRGBA2Float":H.Gc(!1);
D?w=h.Ie(H).then(t.H):(H=h.Je(H),t.H(H));break;case "cpuMeanFloat":H.Gc(!0);if(D)w=H.Le().then(t.H);else{H=H.Me();for(var O=0;O<H.length;++O);t.H(H)}break;case "gpuRawAvg":case "gpuRaw":H.j(0);case "none":t.H!==null&&t.H(H)}D&&w===null&&(w=Promise.resolve());return w},Db:function(w){a.T=w;c();d()},Ye:function(w){w&&(t.type=w.tb||"none",t.H=w.sb||null,t.isLinear=w.bc?!0:!1);d();w=typeof a.classesCount!=="undefined"&&a.classesCount?a.classesCount:a.size*a.size;for(var D=0,H=0,O=0;D<w;++D)t.buffer.push(H+
(a.size-1-O)*a.size),t.results.push([-1,-1,-1,-1]),++H,H===a.size&&(H=0,++O);t.ib=t.type==="gpuRawAvg"||t.type==="cpuMeanFloat";if(a.normalize||t.ib)l.dc=ca.instance({isFloat:!0,isPot:!0,width:a.size})},Ie:function(w){return w.Ke().then(e)},Je:function(w){w=w.ld();e(w);return t.results},v:function(){for(var w in l){var D=l[w];D&&D.remove()}G&&(G.v(),G=null)}};a.vb&&h.Te(a.vb);return h}}}(),qc=function(){return{instance:function(a){var c=ca.instance(a.weights);return{xa:!0,fb:function(){return 1},
v:function(){c.remove()},oe:function(){return c},P:function(){C.set("s30");c.j(1);Y.m(!1,!1)}}}}}(),tc=function(){return{instance:function(a){var c=a.fromLayerSize,d=ca.instance(a.weights),e=a.Ia?"s27":"s26";return{xa:!0,fb:function(){return c},v:function(){d.remove()},P:function(l){if(l.isEnabled){C.set("s28");l.Be.j(3);for(var n=Math.min(l.Na.length,l.depth),p=0;p<n;++p)l.Na[p].Dd(4+p)}else C.set(e);C.Z("u9",a.toLayerSize);C.Z("u10",a.fromLayerSize);d.j(1);Y.m(!1,!1)}}}}}(),rc=function(){return{instance:function(a){for(var c=
a.fromLayerSize,d=a.toLayerSize,e=a.toSparsity,l=e*d,n=l/c,p=c/d,t=0,g=0,k=0,u=Array(e*d*e*d*4),A=Array(e*d*e*d*4),y=Array(c*c),v=0;v<y.length;++v)y[v]=0;v=Math.floor(e/2);for(var E=.5/d,F=.5/c,f=.5/l,I=0;I<d;++I)for(var K=Math.round(I*p),N=0;N<d;++N){var G=Math.round(N*p),h=I/d,w=N/d;h+=E;w+=E;for(var D=0;D<e;++D){var H=K+D-v;H<0&&(H+=c);H>=c&&(H-=c);for(var O=0;O<e;++O){var Z=t/l,V=g/l,m=G+O-v;m<0&&(m+=c);m>=c&&(m-=c);var r=H/c,q=m/c;V=1-V-1/l;r+=F;q+=F;Z+=f;V+=f;var B=I*e+D,L=N*e+O;L=d*e-L-1;B=
d*e*L+B;u[4*B]=Z;u[4*B+1]=V;u[4*B+2]=r;u[4*B+3]=q;q=y[m*c+H]++;B=q%n;r=H*n+B;m=m*n+(q-B)/n;m=c*n-1-m;m=c*n*m+r;A[4*m]=Z;A[4*m+1]=V;A[4*m+2]=h;A[4*m+3]=w;++t>=l&&(t=0,++g);++k}}}y=null;var ba=ca.instance(a.weights);delete a.weights.data;var ia=ca.instance({width:l,isFloat:!0,array:new Float32Array(A),isPot:!0});A=null;var Da=ca.instance({width:l,isFloat:!0,array:new Float32Array(u),isPot:!0});u=null;return{xa:!0,fb:function(){return n},v:function(){ia.remove();Da.remove();ba.remove()},P:function(){C.set("s25");
ba.j(1);Da.j(2);Y.m(!1,!1)}}}}}(),uc=function(){return{instance:function(a){var c=a.kernelsCount,d=a.toSparsity,e=d*a.toLayerSize/a.fromLayerSize,l=a.inputScale||[1,1],n=ca.instance(a.weights);return{xa:!0,fb:function(){return e},eg:function(){return d},oe:function(){return n},v:function(){n.remove()},P:function(){C.set("s29");C.Ve("u29",l);C.Z("u27",c);C.Z("u28",d);C.Z("u9",a.toLayerSize);C.Z("u10",a.fromLayerSize);n.j(1);Y.m(!1,!1)}}}}}(),sc=function(){return{instance:function(a,c){var d=a.fromLayerSize,
e=a.toLayerSize,l=a.toSparsity,n=a.stride?a.stride:1,p=l*e/d,t=e<d,g=d/e,k=ca.instance(a.weights),u="s51"+[d.toString(),e.toString(),l.toString(),n.toString(),c].join("_");C.Xd(u)||(a=kc.$d(c,"gl_FragColor","gl_FragColor"),e=[{type:"1f",name:"u9",value:e},{type:"1f",name:"u33",value:n}],t&&e.push({type:"1f",name:"u10",value:d}),d=[(t?p:l).toFixed(1),a],t&&d.push(g.toFixed(1)),C.qe(t?"s47":"s46",u,d),C.M(u,e.concat([{type:"1i",name:"u7",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u8",value:3}])));
return{xa:!1,fb:function(){return p},v:function(){k.remove()},P:function(){C.set(u);k.j(3);Y.m(!1,!1)}}}}}(),mc=function(){return{instance:function(a){var c=a.dd?a.dd:3,d=a.Uc?a.Uc:64,e=a.hd?a.hd:64,l=a.Y?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var n=ca.instance(a),p=ca.instance(a),t=ca.instance(a),g=ca.instance(a),k=ca.instance({isFloat:!0,width:e,isPot:!1,isFlipY:!1}),u=1/d;return{process:function(A){C.set("s43");g.B();Y.m(l,!1);C.set("s44");for(var y=0;y<c;++y)n.B(),C.V("u15",u,0),Y.m(l,
!1),t.B(),g.j(0),Y.m(l,!1),p.B(),n.j(0),C.V("u15",0,u),Y.m(l,!1),g.B(),t.j(0),Y.m(l,!1),y!==c-1&&p.j(0);C.set("s45");k.B();A.j(0);p.j(1);g.j(2);Y.m(l,!1);k.j(0)},Ha:function(){return k}}}}}(),nc=function(){return{instance:function(a){function c(u,A){return ca.instance({isFloat:u,width:d.A,isPot:!1,isFlipY:!1,isLinear:A})}var d=Object.assign({ka:.1,ca:9,A:128,gain:1,Y:!1,isLinear:!0},a),e=c(!1,!1),l=[c(!1,d.isLinear),c(!1,d.isLinear),c(!1,d.isLinear)],n=[c(!1,d.isLinear),c(!1,d.isLinear),c(!1,d.isLinear)],
p=c(!0,d.isLinear),t=[e,n[0],n[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u34;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u34*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",Math.round((d.ca-1)/2).toFixed(2)).replace("2.2222",(1/d.A).toFixed(6));var g="uniform sampler2D u35,u36,u37,u38;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u35,vv0).rgb;float c=texture2D(u36,vv0).r,d=texture2D(u37,vv0).r,i=texture2D(u38,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",
d.ka.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),k={u1:0};C.Va([{id:"s53",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(b);}",l:k,i:["u1"],precision:"lowp"},{id:"s54",name:"_",g:a,l:k,i:["u1","u34"],precision:"lowp"},{id:"s55",name:"_",g:g,l:{u35:0,u36:1,u37:2,u38:3},i:["u35","u36","u37","u38"],precision:"highp"}]);return{process:function(){C.set("s53");e.U();Y.m(d.Y,
!1);C.set("s54");for(var u=0;u<3;++u)C.V("u34",1,0),l[u].B(),t[u].j(0),Y.m(!1,!1),C.V("u34",0,1),n[u].B(),l[u].j(0),Y.m(!1,!1);C.set("s55");p.B();e.j(0);n[0].j(1);n[1].j(2);n[2].j(3);Y.m(!1,!1);p.j(0)},Ha:function(){return p}}}}}(),oc=function(){return{instance:function(a){function c(k){return ca.instance({isFloat:k,width:d.A,isPot:!1,isFlipY:!1})}var d=Object.assign({ka:.1,ca:9,A:128,gain:1,Y:!1},a),e=c(!1),l=c(!1),n=c(!1),p=c(!0);a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u34;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u34*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((d.ca-1)/2).toFixed(2)).replace("2.2222",(1/d.A).toFixed(6));var t="uniform sampler2D u0,u39;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u39,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",d.ka.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),g={u1:0};C.Va([{id:"s56",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",
l:g,i:["u1"],precision:"lowp"},{id:"s57",name:"_",g:a,l:g,i:["u1","u34"],precision:"lowp"},{id:"s58",name:"_",g:t,l:{u0:0,u39:1},i:["u0","u39"],precision:"highp"}]);return{process:function(){C.set("s56");e.U();Y.m(d.Y,!1);C.set("s57");C.V("u34",1,0);l.B();e.j(0);Y.m(!1,!1);C.V("u34",0,1);n.B();l.j(0);Y.m(!1,!1);C.set("s58");p.B();e.j(0);n.j(1);Y.m(!1,!1);p.j(0)},Ha:function(){return p}}}}}(),pc=function(){return{instance:function(a){function c(u){return ca.instance({isFloat:u,width:d.A,isPot:!1,isFlipY:!1})}
var d=Object.assign({ka:.1,ca:9,A:128,gain:1,fc:0,Ja:!1,Y:!1},a),e=c(!1),l=null,n=null,p=null;d.Ja&&(l=c(!1),n=c(!1),p=c(!0));a={u1:0};var t=[{id:"s59",name:"_",g:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",
d.fc.toFixed(4)),l:a,i:["u1"],precision:"lowp"}];if(d.Ja){var g="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u34;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u34*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",Math.round((d.ca-1)/2).toFixed(2)).replace("2.2222",(1/d.A).toFixed(6)),k="uniform sampler2D u0,u39;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u39,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",
d.ka.toFixed(4)).replace("2.2222",d.gain.toFixed(4));t.push({id:"s60",name:"_",g:g,l:a,i:["u1","u34"],precision:"lowp"},{id:"s61",name:"_",g:k,l:{u0:0,u39:1},i:["u0","u39"],precision:"highp"})}C.Va(t);return{process:function(){C.set("s59");e.U();Y.m(d.Y,!1);d.Ja?(C.set("s60"),C.V("u34",1,0),l.B(),e.j(0),Y.m(!1,!1),C.V("u34",0,1),n.B(),l.j(0),Y.m(!1,!1),C.set("s61"),p.B(),e.j(0),n.j(1),Y.m(!1,!1),p.j(0)):e.j(0)},ge:function(){return 2-d.fc},Ha:function(){return d.Ja?p:e}}}}}(),Cb=function(){function a(f,
I,K,N,G,h,w){if(!E)if(w===h.length)G();else{switch(h[w]){case "A":K();break;case "D":f();break;case "S":I().then(function(D,H){F.ud();a(f,I,K,H?null:N,G,h,++w)}).catch(function(D){console.log("An error occurred in the WebAR loop: ",D);G()});return;case "R":N&&N()}a(f,I,K,N,G,h,++w)}}var c={n:5,Xb:1,bd:0,Yd:[25,39],Fc:45,bb:[2,200],k:.7,cf:200,Ee:.05},d=-1,e=null,l=-1,n=-1,p=0,t=-1,g=-1,k=0,u=null,A=0,y=c.bb[1],v=Math.log(2),E=!0,F={ke:function(){switch(d){case -1:return-1;case 0:return g+e.bd;case 1:return k}},
Of:function(f){switch(d){case -1:return 1;case 0:return Math.pow(Math.min(Math.max(t,0),e.n-1)/(e.n-1),f||1);case 1:return(k-e.bd)/(e.n-1)}},D:function(f){e=Object.assign({},c,f);t=g=e.Xb;d=0;u=e.Yd.slice(0);F.reset();F.Vd().then(function(I){I>=e.Fc||(I/=e.Fc,u[0]*=I,u[1]*=I)})},ud:function(f){f=(typeof f==="undefined"?Date.now():f)||0;var I=Math.min(Math.max(f-A,e.bb[0]),e.bb[1]);y=I;A=f;var K=l===-1?0:e.k;l=Math.min(Math.max(1E3/I,5),120)*(1-K)+l*K;f-n>e.cf&&++p>5&&(I=e.k,t=t*(1-I)+(l<u[0]?g-1:
l>u[1]?g+1:g)*I,Math.abs(t-g)>1-e.Ee&&(I=Math.min(Math.max(Math.round(t),0),e.n-1),I!==g&&(t=g=I,l=(u[1]-u[0])*.5)),n=f)},Eg:function(f,I,K,N,G,h){E=!1;a(f,I,K,N,G,h,0)},stop:function(){E=!0},Hg:function(f){k=f;d=1},Zg:function(){d=0;F.reset()},reset:function(){y=c.bb[1];n=l=-1;p=0},Vg:function(f,I,K){K=Math.exp(-v*y/K);return(1-K)*f+K*I},Tf:function(){return y},Vd:function(){return new Promise(function(f){function I(w){w=w||Date.now();var D=Math.max(0,w-N);N=w;G++!==0&&D>0&&(K=Math.min(K,D),++h);
G<=10?window.requestAnimationFrame(I):f(Math.round(1E3/K))}var K=Infinity,N=0,G=0,h=0;setTimeout(I,1)})}};return F}(),Mb=function(){function a(A,y){var v=A[0]-.5;A=A[1]-.5;var E=y[0]-.5;y=y[1]-.5;return v*v+A*A-(E*E+y*y)}var c={ed:4,ub:[1.5,1.5,2],G:[.1,.1,.1],od:1,A:-1,O:-1,Ze:2,gd:1,jc:!0,Zc:!1,Sd:.8},d=null,e=[],l=[],n=[],p=[0],t=[.5,.5,1],g=null,k=0,u=[0,0,0];return{D:function(A){d=Object.assign({},c,A);e.splice(0);l.splice(0);n.splice(0);k=0;A=d.ub[0]*d.G[0];var y=d.ub[1]*d.G[1],v=1/(1+d.ub[2]*
d.G[2]),E=Math.min(d.A,d.O),F=d.A/d.O,f=d.od*E,I=f/d.A;f/=d.O;var K=.5*E/d.A;E=.5*E/d.O;var N=d.Sd*.5;N*=N;for(var G=0;G<d.ed;++G){var h=[];l.push(h);var w=Math.pow(v,G),D=I*w,H=f*w;w=D*d.gd;n.push(w);var O=D*A,Z=H*y;D/=2;H/=2;for(var V=1+(1-D-D)/O,m=1+(1-H-H)/Z,r=0;r<m;++r)for(var q=H+r*Z,B=q-.5,L=0;L<V;++L){var ba=D+L*O,ia=ba-.5;if(!(ia*ia+B*B>N)){if(d.Zc){var Da=Math.abs(B)+w*.5*F;if(Math.abs(ia)+w*.5>K||Da>E)continue}ba=[ba,q,w];e.push(ba);h.push(ba)}}d.jc&&h.sort(a);g=e}d.jc&&e.sort(a)},get:function(A){var y=
g.length;if(y===0)return t;for(;A>=p.length;)p.push(0);p[A]>=y&&(p[A]=0);var v=g[Math.floor(p[A])%y];p[A]=(p[A]+1/d.Ze)%y;if(k===0)return v;u[0]=v[0];u[1]=v[1];u[2]=k;return u},yg:function(A){A>=p.length||(p[A]=Math.floor(Math.random()*g.length))},Ig:function(A){k=A;if(k===0)g=e;else{for(var y=n.length,v=y-1,E=0;E<y;++E)if(n[E]<=A){v=E;break}g=l[v]}},reset:function(){for(var A=e.length/p.length,y=0;y<p.length;++y)p[y]=Math.floor(y*A);k=0;g=e}}}(),ha={Xa:512,G:[.05,.05,.15],Pe:{isSquare:!0,nScaleLevels:3,
scale0Factor:.8,scaleFactor:1,overlapFactors:[2,2,3],scanCenterFirst:!0,scaleXRange:[1/15,.9],lockStabilizeEnabled:!0,rawNNOutputTranslationScalingOffsets:[0,0,0],lockStabilizeDxysRanges:[[.5,1],[.5,1],[.5,1]]},Ce:3,sc:.68,rb:10,mb:.03,qa:8,Ab:-.02,Ya:.02,Ra:.7,pb:20,Za:.3,Ta:[.02,10],qb:[1,6],De:3},va=Object.create(ha.Pe),Ab=0,Nb=0,Wa=0,Bb=!1,S={width:-1,Vb:!0,Ka:!1,kb:!1,nd:null,nc:!1,pitchRange:null,G:ha.G},ya={vc:0,pitch:0,ic:0,$b:!0},Ra=null,za=null,$a=!1,Ua=!1,Ia=0,db=null,J=null,vc={aspectRatio:1,
Ub:1,ua:[1,1],A:0,O:0,ja:0,ia:0,Ga:"s62",K:{Da:[0,0],scale:[1,1]}},U={N:null,o:[0,0,0,0]},ka={ma:-2,LOADING:-1,Aa:0,Eb:1,wc:2,Ua:3},sa=ka.ma,Ya={ma:-2,LOADING:1,IDLE:0},fb=Ya.ma,Ja=null;var Ob=fa=0;var eb=-1;var aa={n:0,fd:0,Zb:0,J:-1,$:[0,0]},Za={video:0,yd:1},Na={undefined:0,video:1,Dc:2,Lb:3},Q=null,wc={current:Za.video,element:null,N:null,va:!1,type:Na.undefined,time:-1,sa:null},Wb=!1,ja={distance:0,label:!1,positionScale:[0,0,0,0],detectScore:0,yaw:0,pitch:0,roll:0,NNInputWidth:-1},yb=1,ic={cutShader:null,
thresholdDetectFactor:1,thresholdDetectFactorUnstitch:1,isSkipConfirmation:!1,isKeepTracking:!1,trackingFactors:[2,2,2],secondNeighborFactor:ha.Ra,nLocateAutomoves:ha.rb,locateMoveNoiseAmplitude:ha.mb,nConfirmAutoMoves:ha.qa,nConfirmUnstitchMoves:ha.pb,confirmMoveNoiseAmplitude:ha.Ya,thresholdConfirmOffset:ha.Ab,tiltPosAngleIfAmbiguousDetection:ha.Ta,confirmScoreMinFactorDuringAutoMove:ha.Za},pa={},W={Bb:1,td:1,Ma:!1,jb:!1,vd:null,Ra:ha.Ra,rb:-1,mb:-1,qa:-1,Ab:-1,Ya:-1,pb:-1,Ta:null,Za:-1},Qb=[{type:"1f",
name:"u40",value:0}],ob={VERSION:"1.4.0",init:function(a){function c(d){a.callbackReady&&a.callbackReady(d)}if(sa!==ka.ma)return c("ALREADY_INITIALIZED");sa=ka.LOADING;J=Object.assign({},vc);Q=Object.assign({},wc);if(typeof a.canvas!=="undefined")za=a.canvas,$a=!1;else if(typeof a.canvasId==="undefined")za=document.createElement("canvas"),$a=!1;else{za=document.getElementById(a.canvasId);if(!za)return c("INVALID_CANVASID"),!1;$a=!0}typeof a.isDebugRender!=="undefined"&&($a=a.isDebugRender);$a&&(za.style.display=
"block");a.scanSettings&&Object.assign(va,a.scanSettings);a.canvasSize&&(ha.Xa=a.canvasSize);Cb.D({n:ha.qb[1]-ha.qb[0]+1,Xb:ha.De-ha.qb[0]});Ua=typeof a.followZRot==="undefined"?!1:a.followZRot;db=typeof a.ZRotRange==="undefined"?null:a.ZRotRange;Wb=typeof WorkerGlobalScope!=="undefined"&&typeof self!=="undefined"&&self instanceof WorkerGlobalScope;ha.Xa!==-1&&(za.width=ha.Xa,za.height=ha.Xa);ob.set_source(a.video,a.videoCrop);if(!qb.D({$a:za,width:za.width,height:za.height,debug:!1,ac:c.bind(null,
"GLCONTEXT_LOST"),premultipliedAlpha:!1}))return c("GL_INCOMPATIBLE"),!1;Q.current===Za.video&&(Rb(Q.element),Xa());hc();wb();sa=ka.Aa;c(!1);return!0},set_source:function(a,c){typeof a!=="undefined"&&a?(Q.element=a,Q.current=Za.video,Q.element.isFakeVideo?(J.ja=Q.element.videoWidth,J.ia=Q.element.videoHeight,Q.type=Na.Lb):a.tagName==="VIDEO"?(J.ja=Q.element.videoWidth,J.ia=Q.element.videoHeight,Q.type=Na.video):(J.ja=Q.element.width,J.ia=Q.element.height,Q.type=Na.Dc),Jb(c)):Q.current=Za.yd;[ka.ma,
ka.LOADING].indexOf(sa)===-1&&(Q.sa&&Q.sa.F&&(Q.sa.F=a),Xa(),wb(),Q.type===Na.Dc&&Q.N.refresh())},set_NN:function(a,c,d){if(fb===Ya.LOADING)c&&c("NN_LOADING");else{var e=function(l){fb=Ya.IDLE;c&&c(l)};fb=Ya.LOADING;typeof a==="string"?pb.get(a,function(l){if(!l)return e("INVALID_NN");var n=null;try{n=JSON.parse(l)}catch(p){return e("INVALID_NN")}Sb(n,e,d)},function(){e("NOTFOUND_NN")}):Sb(a,e,d)}},reset_state:function(){Pb();sa=ka.Aa},destroy:function(){ob.reset_state();Ra&&Ra.v();qb.v();fb=Ya.ma;
sa=ka.ma;return Promise.resolve()},detect_async:function(a,c,d){var e,l;return cc(new Ib(new mb(function(n){switch(n.ha){case 1:e=Tb(a,c,d);if(e===-1)return n.return(ja);l=0;case 2:if(!(l<e)){n.ha=4;break}Ub(l,e);var p=Ra.Fe(U.N);n.ha=5;return{value:p};case 5:Ba.X();++l;n.ha=2;break;case 4:return n.return(Vb())}})))},detect:function(a,c,d){a=Tb(a,c,d);if(a===-1)return ja;for(c=0;c<a;++c)Ub(c,a),Ra.P(U.N),Ba.X();return Vb()},get_aspectRatio:function(){return J.A/J.O},set_scanSettings:function(a){Object.assign(va,
a);Xa()},set_videoCrop:function(a){Jb(a);wb();Xa()}};return ob}();
if(typeof(module)!=='undefined'){module.exports=WEBARROCKSOBJECT;}
