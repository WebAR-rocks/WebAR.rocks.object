/**
 * WebAR.rocks.object
 *
 * Copyright (c) 2020 WebAR.rocks ( https://webar.rocks )
 * This code is released under dual licensing:
 *   - GPLv3 
 *   - Nominative commercial license
 * Please read https://github.com/WebAR-rocks/WebAR.rocks.object/blob/master/LICENSE
 * 
*//* eslint-enable */
/* prettier-ignore */
function cb(){this.Ka=!1;this.ja=null;this.td=void 0;this.fa=1;this.Lc=this.Cd=0;this.Ba=null}function lb(N){if(N.Ka)throw new TypeError("Generator is already running");N.Ka=!0}cb.prototype.Ma=function(N){this.td=N};cb.prototype.Qa=function(N){this.Ba={Pd:N,le:!0};this.fa=this.Cd||this.Lc};cb.prototype.return=function(N){this.Ba={return:N};this.fa=this.Lc};function mb(N){this.s=new cb;this.ze=N}
mb.prototype.Ma=function(N){lb(this.s);if(this.s.ja)return ub(this,this.s.ja.next,N,this.s.Ma);this.s.Ma(N);return vb(this)};function Hb(N,ea){lb(N.s);var sa=N.s.ja;if(sa)return ub(N,"return"in sa?sa["return"]:function(ta){return{value:ta,done:!0}},ea,N.s.return);N.s.return(ea);return vb(N)}mb.prototype.Qa=function(N){lb(this.s);if(this.s.ja)return ub(this,this.s.ja["throw"],N,this.s.Ma);this.s.Qa(N);return vb(this)};
function ub(N,ea,sa,ta){try{var Da=ea.call(N.s.ja,sa);if(!(Da instanceof Object))throw new TypeError("Iterator result "+Da+" is not an object");if(!Da.done)return N.s.Ka=!1,Da;var La=Da.value}catch(Qa){return N.s.ja=null,N.s.Qa(Qa),vb(N)}N.s.ja=null;ta.call(N.s,La);return vb(N)}
function vb(N){for(;N.s.fa;)try{var ea=N.ze(N.s);if(ea)return N.s.Ka=!1,{value:ea.value,done:!1}}catch(sa){N.s.td=void 0,N.s.Qa(sa)}N.s.Ka=!1;if(N.s.Ba){ea=N.s.Ba;N.s.Ba=null;if(ea.le)throw ea.Pd;return{value:ea.return,done:!0}}return{value:void 0,done:!0}}function Ib(N){this.next=function(ea){return N.Ma(ea)};this.throw=function(ea){return N.Qa(ea)};this.return=function(ea){return Hb(N,ea)};this[Symbol.iterator]=function(){return this}}
function cc(N){function ea(ta){return N.next(ta)}function sa(ta){return N.throw(ta)}return new Promise(function(ta,Da){function La(Qa){Qa.done?ta(Qa.value):Promise.resolve(Qa.value).then(ea,sa).then(La,Da)}La(N.next())})}
const WEBARROCKSOBJECT=function(){function N(a){var c=null,d=null,e=null,r=0,m=this;this.D=function(n){this.Je(n.kb);e.Gd({bc:n.bc,ad:n.ad||!1,Yb:n.Yb})};this.be=function(n){return c[n]};this.Je=function(n){var q=null;r=n.length;c=n.map(function(h,l){h=Object.assign({},h,{index:l,parent:m,sb:q,pe:l===r-1});return q=l=0===l?dc.instance(h):ec.instance(h)});d=c[0];e=c[r-1];c.forEach(function(h,l){0!==l&&h.ye()})};this.M=function(n){n.i(0);var q=n;c.forEach(function(h){q=h.M(q,!1)});return q};this.xe=
function(n){var q,h,l;return cc(new Ib(new mb(function(t){n.i(0);q=n;for(h=0;h<r-1;++h)l=c[h],q=l.M(q,!1);var x=c[r-1].M(q,!0);t.fa=0;return{value:x}})))};this.ae=function(){return d.$d()};this.ee=function(){return e.K()};this.Ha=function(){return e.de()};this.Nc=function(){return e.Nc()};this.u=function(){c&&(c.forEach(function(n){n.u()}),e=d=c=null,r=0)};"undefined"!==typeof a&&this.D(a)}var ea;function sa(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}function ta(a,c,d){var e=1,r=0;for(d=c+d-1;d>=c;--d)r+=
e*sa(a,d),e*=2;return r}function Da(a){a=a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var c=a.length,d=new Uint8Array(c),e=0;e<c;++e)d[e]=a.charCodeAt(e);return d}function La(a){return"string"===typeof a?JSON.parse(a):a}function Qa(a){if("undefined"===typeof La(a).nb){var c=La(a);a=c.ne;var d=c.nf,e=c.n;c=Da(c);for(var r=new Float32Array(e),m=new Float32Array(d),n=a+d+1,q=0;q<e;++q){var h=n*q,l=0===sa(c,h)?1:-1,t=ta(c,h+1,a);h=h+1+a;for(var x=m.length,
D=0,J=h;J<h+x;++J)m[D]=sa(c,J,!0),++D;for(x=h=0;x<d;++x)h+=m[x]*Math.pow(2,-x-1);r[q]=0===h&&0===t?0:l*(1+h)*Math.pow(2,1+t-Math.pow(2,a-1))}a=r}else if(e=La(a),a=e.nb,0===a)a=new Uint8Array(e.nb);else{d=e.n;e=Da(e);c=new Uint32Array(d);for(r=0;r<d;++r)c[r]=ta(e,r*a,a);a=c}return a}function Jb(a){if(a){var c=a.w,d=a.h;K.I.Da[0]=-1+2*(a.x+c/2)/K.ha;K.I.Da[1]=-1+2*(a.y+d/2)/K.ga;K.I.scale[0]=c/K.ha;K.I.scale[1]=d/K.ga}else K.I.Da[0]=0,K.I.Da[1]=0,K.I.scale[0]=1,K.I.scale[1]=1;K.A=K.ha*K.I.scale[0];
K.R=K.ga*K.I.scale[1]}function wb(){var a=[{type:"2f",name:"u38",value:K.I.Da},{type:"2f",name:"u39",value:K.I.scale}],c=a.concat([{type:"1f",name:"u40",value:K.ha/K.ga}]);z.N("s58",c);z.N("s59",c.concat([{name:"u10",type:"2f",value:[1/K.ha,1/K.ga]}]));z.N("s60",a)}function Ra(a,c,d){var e=ua.rawNNOutputTranslationScalingOffsets,r=-e[0]+Ma(a,c,"dx")*K.ta[0],m=-e[1]+Ma(a,c,"dy")*K.ta[1];a=-e[2]+d[2]*Ma(a,c,"ds");if(Va){c=Math.cos(Ga);e=Math.sin(Ga);var n=-e*r+c*m;r=c*r+e*m;m=n}r*=d[0];m*=d[1];d=V.o[2];
c=V.o[3];V.o[0]-=r*d*U.G[0];V.o[1]-=m*c*U.G[1];V.o[2]-=a*d*U.G[2];V.o[2]=ra.Ea(V.o[2],ua.scaleXRange[0]*K.ta[0],ua.scaleXRange[1]*K.ta[0]);V.o[0]=ra.Ea(V.o[0],0,1);V.o[3]=V.o[2]*K.aspectRatio/K.Pb;V.o[1]=ra.Ea(V.o[1],0,1)}function xb(a){var c=V.o[2],d=V.o[3],e=(2*Math.random()-1)*a,r=.5*(2*Math.random()-1)*a;V.o[0]+=(2*Math.random()-1)*a*c;V.o[1]+=e*d;V.o[2]+=r*c;V.o[3]=V.o[2]*K.aspectRatio/K.Pb}function Ma(a,c,d){c=Ha[c].Xc[d];return(a[c][0]+a[c][1]+a[c][2]+a[c][3])/4}function Kb(a,c){if(U.Rb){if(U.kc){var d=
Ma(a,c,"yaw");a=-Ma(a,c,"notHere");return Math.atan2(ra.Ea(a,-1,1),ra.Ea(d,-1,1))}return Math.PI*Ma(a,c,"yaw")}return 0}function Lb(a,c,d,e){c=Ha[c].Xc[d];return(a[c][0]+a[c][1]+a[c][2]+a[c][3])/4*(1-e)+e*Math.min(a[c][0],a[c][1],a[c][2],a[c][3])}function nb(a,c,d){var e=Lb(a,c,"here",d),r=0;0<yb&&!U.kc&&(r=yb*Lb(a,c,"notHere",d));return(e-r)/Ha[c].pc}function Wa(){Ga=0;Va&&null!==db&&(Ga=db[0]+Math.random()*(db[1]-db[0]));qa=ia.Aa;var a=Mb.get(0);a&&(V.o[0]=a[0],V.o[1]=a[1],V.o[2]=a[2],V.o[3]=a[2]*
K.aspectRatio)}function fc(a,c){var d=.5+(V.o[0]-.5)/K.I.scale[0],e=.5+(V.o[1]-.5)/K.I.scale[1],r=V.o[2],m=V.o[3],n=ha.positionScale[0],q=ha.positionScale[1],h=ha.positionScale[2],l=1;!va.Wb&&ua.lockStabilizeEnabled&&(l=ua.lockStabilizeDxysRanges,l=Math.max(zb.jc(l[0][0],l[0][1],Math.abs(n-d)/r*Xa*U.G[0]),zb.jc(l[1][0],l[1][1],Math.abs(q-e)/m*Xa*U.G[1]),zb.jc(l[2][0],l[2][1],Math.abs(h-r)/r*Xa*U.G[2])));U.Ja&&(va.ec=ra.oa(va.ec,Va?Ga:Ab,l),ha.roll=va.ec);U.ib&&(va.pitch=ra.oa(va.pitch,Nb,l),ha.pitch=
va.pitch);U.Rb&&(va.sc=ra.oa(va.sc,a,l),ha.yaw=va.sc);ha.label=Ha[Z.H].label;ha.distance=Ha[Z.H].Ld;ha.positionScale[0]=ra.oa(n,d,l);ha.positionScale[1]=ra.oa(q,e,l);ha.positionScale[2]=ra.oa(h,r,l);ha.positionScale[3]=ra.oa(ha.positionScale[3],m,l);ha.detectScore=c}function gc(a){var c=-1,d=-1E12;-1!==[ia.Aa,ia.Ab].indexOf(qa)&&Ha.forEach(function(h,l){h=nb(a,l,0);h>d&&(d=h,c=l)});va.Wb=!0;switch(qa){case ia.Aa:qa=ia.Ab;Ra(a,c,[1,1,1]);ea=0;break;case ia.Ab:++ea;d>W.yb?(W.La?(qa=ia.Sa,eb=c,Z.H=c,
Z.Vb=0):(qa=ia.tc,Ob=0,eb=c),Ra(a,eb,[1,1,1])):ea>fa.ue?Wa():Ra(a,c,[1,1,1]);break;case ia.tc:++Ob>W.qb&&(qa=ia.Sa,Z.n=0,Z.$c=0,Z.H=eb,Z.Y[0]=0,Z.Y[1]=0);Ra(a,eb,[1,1,1]);xb(W.lb);break;case ia.Sa:if(va.Wb=!1,W.La||++Z.n>W.pa){var e=nb(a,Z.H,1);if(W.La||e>W.yb+W.xb||W.hb){U.Ja&&(Ab=U.hd*Ma(a,Z.H,"roll"),Va&&(Ga+=Ab));if(Bb){var r=-1;r=W.La||W.hb?Kb(a,Z.H):Math.atan2(Z.Y[1],Z.Y[0]);if(U.ib){var m=.5+.5*Ma(a,Z.H,"pitch");Nb=U.pitchRange[0]+(U.pitchRange[1]-U.pitchRange[0])*m}fc(r,e)}W.hb?(Ra(a,Z.H,
W.pd),e>W.nd?(Z.Vb=0,ha.label||(ha.label=Ha[Z.H].label)):++Z.Vb>W.ob&&Wa()):Bb?Wa():Ra(a,Z.H,[.5,.5,.5])}else Wa()}else{var n=1-(W.pa-Z.n)/(W.pa-1);e=1.5-1*n;Ra(a,Z.H,[e,e,e]);xb(W.Wa*(1-n));var q=nb(a,Z.H,n);q<W.yb*n*W.Xa?Wa():++Z.$c>10*W.pa?Wa():Ha.some(function(h,l){return Z.H===l?!1:nb(a,l,n)>q*(W.Pa*n+(1-n))?!0:!1})?(xb(W.Ra[0]),Ga+=(2*Math.random()-1)*W.Ra[1]*Math.PI/180,Z.n=0,Z.Y[0]=0,Z.Y[1]=0):(e=Kb(a,Z.H),Z.Y[0]+=Math.cos(e),Z.Y[1]+=Math.sin(e))}}}function hc(){z.Ta([{id:"s59",name:"_",ya:"attribute vec2 a0;uniform vec4 u41;uniform vec2 u38,u39;uniform float u37,u40;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.);float a=u40*(u41.z/u41.w);a*=u39.x/u39.y;float b=cos(u37),c=sin(u37);vec2 f=mat2(b,-c*a,c/a,b)*a0,g=u38+f*u39,d=u41.xy+.5*u41.zw*g;vv0=vec2(d.x,1.-d.y);}",
g:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;const vec3 g=vec3(1.,1.,1.);vec3 c[9];void main(){vec2 d=vv0+.5*u10;c[0]=texture2D(u1,d-u10*vec2(-1.,-1.)).rgb,c[1]=texture2D(u1,d-u10*vec2(-1.,0.)).rgb,c[2]=texture2D(u1,d-u10*vec2(-1.,1.)).rgb,c[3]=texture2D(u1,d-u10*vec2(0.,-1.)).rgb,c[4]=texture2D(u1,d-u10).rgb,c[5]=texture2D(u1,d-u10*vec2(0.,1.)).rgb,c[6]=texture2D(u1,d-u10*vec2(1.,-1.)).rgb,c[7]=texture2D(u1,d-u10*vec2(1.,0.)).rgb,c[8]=texture2D(u1,d-u10*vec2(1.,1.)).rgb;vec3 a,b;a=min(c[0],c[1]),b=max(c[0],c[1]),c[0]=a,c[1]=b,a=min(c[0],c[2]),b=max(c[0],c[2]),c[0]=a,c[2]=b,a=min(c[0],c[3]),b=max(c[0],c[3]),c[0]=a,c[3]=b,a=min(c[0],c[4]),b=max(c[0],c[4]),c[0]=a,c[4]=b,a=min(c[0],c[5]),b=max(c[0],c[5]),c[0]=a,c[5]=b,a=min(c[0],c[6]),b=max(c[0],c[6]),c[0]=a,c[6]=b,a=min(c[0],c[7]),b=max(c[0],c[7]),c[0]=a,c[7]=b,a=min(c[0],c[8]),b=max(c[0],c[8]),c[0]=a,c[8]=b,a=min(c[1],c[2]),b=max(c[1],c[2]),c[1]=a,c[2]=b,a=min(c[1],c[3]),b=max(c[1],c[3]),c[1]=a,c[3]=b,a=min(c[1],c[4]),b=max(c[1],c[4]),c[1]=a,c[4]=b,a=min(c[1],c[5]),b=max(c[1],c[5]),c[1]=a,c[5]=b,a=min(c[1],c[6]),b=max(c[1],c[6]),c[1]=a,c[6]=b,a=min(c[1],c[7]),b=max(c[1],c[7]),c[1]=a,c[7]=b,a=min(c[1],c[8]),b=max(c[1],c[8]),c[1]=a,c[8]=b,a=min(c[2],c[3]),b=max(c[2],c[3]),c[2]=a,c[3]=b,a=min(c[2],c[4]),b=max(c[2],c[4]),c[2]=a,c[4]=b,a=min(c[2],c[5]),b=max(c[2],c[5]),c[2]=a,c[5]=b,a=min(c[2],c[6]),b=max(c[2],c[6]),c[2]=a,c[6]=b,a=min(c[2],c[7]),b=max(c[2],c[7]),c[2]=a,c[7]=b,a=min(c[2],c[8]),b=max(c[2],c[8]),c[2]=a,c[8]=b,a=min(c[3],c[4]),b=max(c[3],c[4]),c[3]=a,c[4]=b,a=min(c[3],c[5]),b=max(c[3],c[5]),c[3]=a,c[5]=b,a=min(c[3],c[6]),b=max(c[3],c[6]),c[3]=a,c[6]=b,a=min(c[3],c[7]),b=max(c[3],c[7]),c[3]=a,c[7]=b,a=min(c[3],c[8]),b=max(c[3],c[8]),c[3]=a,c[8]=b,a=min(c[4],c[5]),b=max(c[4],c[5]),c[4]=a,c[5]=b,a=min(c[4],c[6]),b=max(c[4],c[6]),c[4]=a,c[6]=b,a=min(c[4],c[7]),b=max(c[4],c[7]),c[4]=a,c[7]=b,a=min(c[4],c[8]),b=max(c[4],c[8]),c[4]=a,c[8]=b,gl_FragColor=vec4(c[4]*g,1.);}",
j:"u1 u41 u39 u38 u37 u40 u10".split(" "),precision:"lowp"},{id:"s58",name:"_",ya:"attribute vec2 a0;uniform vec4 u41;uniform vec2 u38,u39;uniform float u37,u40;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.);float a=u40*(u41.z/u41.w);a*=u39.x/u39.y;float b=cos(u37),c=sin(u37);vec2 f=mat2(b,-c*a,c/a,b)*a0,g=u38+f*u39,d=u41.xy+.5*u41.zw*g;vv0=vec2(d.x,1.-d.y);}",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",j:"u1 u41 u39 u38 u37 u40".split(" "),precision:"lowp"},
{id:"s61",name:"_",ya:"attribute vec2 a0;uniform vec4 u41;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.);vec2 a=u41.xy+.5*u41.zw*a0;vv0=vec2(a.x,1.-a.y);}",g:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;const vec3 g=vec3(1.,1.,1.);float c[5];void main(){c[0]=texture2D(u1,vv0-u10*vec2(-1.,0.)).r,c[1]=texture2D(u1,vv0-u10*vec2(0.,-1.)).r,c[2]=texture2D(u1,vv0-u10).r,c[3]=texture2D(u1,vv0-u10*vec2(0.,1.)).r,c[4]=texture2D(u1,vv0-u10*vec2(1.,0.)).r;float a,b;a=min(c[0],c[1]),b=max(c[0],c[1]),c[0]=a,c[1]=b,a=min(c[0],c[2]),b=max(c[0],c[2]),c[0]=a,c[2]=b,a=min(c[0],c[3]),b=max(c[0],c[3]),c[0]=a,c[3]=b,a=min(c[0],c[4]),b=max(c[0],c[4]),c[0]=a,c[4]=b,a=min(c[1],c[2]),b=max(c[1],c[2]),c[1]=a,c[2]=b,a=min(c[1],c[3]),b=max(c[1],c[3]),c[1]=a,c[3]=b,a=min(c[1],c[4]),b=max(c[1],c[4]),c[1]=a,c[4]=b,a=min(c[2],c[3]),b=max(c[2],c[3]),c[2]=a,c[3]=b,a=min(c[2],c[4]),b=max(c[2],c[4]),c[2]=a,c[4]=b,gl_FragColor=vec4(c[2]*g,1.);}",
j:["u1","u41","u10"],precision:"lowp"},{id:"s60",name:"_",ya:"attribute vec2 a0;uniform vec2 u38,u39;varying vec2 vv0;const vec2 f=vec2(1.,1.);void main(){gl_Position=vec4(a0,0.,1.);vec2 a=u38+a0*u39,b=(a+f)/2.;vv0=b;}",g:"uniform sampler2D u1;uniform vec4 u41;varying vec2 vv0;void main(){vec2 b=u41.xy-.5*u41.zw,c=u41.xy+.5*u41.zw,a=step(b,vv0)*step(vv0,c);vec4 d=texture2D(u1,vec2(vv0.x,1.-vv0.y));gl_FragColor=mix(d,vec4(0.,1.,0.,1.),a.x*a.y*.5);}",j:["u1","u41","u39","u38"],precision:"lowp"}]);var a=
[{type:"1i",name:"u1",value:0}];z.N("s59",a);z.N("s58",a);z.N("s61",a);z.N("s60",a);Pb()}function Pb(){Ga=0;z.N("s58",Qb);z.N("s59",Qb);ha.roll=0}function Ya(){K.aspectRatio=K.A/K.R;Mb.D({rb:ua.overlapFactors,Zc:ua.nScaleLevels,bd:ua.scaleFactor,A:K.A,R:K.R,jd:ua.scale0Factor,G:U.G,fc:ua.scanCenterFirst})}function Rb(a){Q.ra={isFlipY:!1,isLinear:!0,width:K.A,height:K.R,isPot:!1,isFloat:!1};Q.type===Na.Hb?Object.assign(Q.ra,{isKeepArray:!0,array:a.arrayBuffer}):Object.assign(Q.ra,{F:a});Q.L=aa.instance(Q.ra);
Q.ua=!0}function Sb(a,c,d){if(!a.exportData||!a.exportData.labels)return c("INVALID_NN");var e=a.exportData;"undefined"===typeof e.paramsPerLabel&&(e.paramsPerLabel={});"undefined"!==typeof d&&d.paramsPerLabel&&(e.paramsPerLabel=Object.assign(e.paramsPerLabel,d.paramsPerLabel));ob.reset_state();Sa=new N({kb:a.layers,bc:"cpuRGBA2Float",Yb:gc});Xa=Sa.ae();ha.NNInputWidth=Xa;V.L=aa.instance({isFloat:!1,isPot:!1,width:Xa});U.G=e.translationScalingFactors?e.translationScalingFactors:fa.G;e.rollMax?(U.hd=
e.rollMax,U.Ja=!0):U.Ja=!1;e.pitchRange?(U.pitchRange=e.pitchRange,U.ib=!0):U.ib=!1;e.splitYawComponents&&(U.kc=!0);"undefined"!==typeof e.isYaw&&(U.Rb=e.isYaw);U.width=Sa.ee();a="undefined"===typeof d?{}:d;yb="undefined"===typeof a.notHereFactor?1:a.notHereFactor;a=e.labels;d="undefined"===typeof e.paramsPerLabel?!1:e.paramsPerLabel;var r="undefined"===typeof e.inputAspectRatio?1:e.inputAspectRatio,m=Math.sqrt(r);K.ta[0]=m;K.ta[1]=1/m;K.Pb=r;Ya();r=Array(a.length);for(m=0;m<U.width/8;++m)for(var n=
0;n<U.width;++n){var q=n+m*U.width;if(q>=a.length)break;var h=n,l=8*m,t=a[q];r[q]={pc:d&&d[t]&&d[t].thresholdDetect?d[t].thresholdDetect:fa.pc,label:t,Ld:e.distances&&e.distances[q]?e.distances[q]:3,Xc:{here:h+l*U.width,notHere:h+(l+1)*U.width,yaw:h+(l+2)*U.width,dx:h+(l+3)*U.width,dy:h+(l+4)*U.width,ds:h+(l+5)*U.width,roll:h+(l+6)*U.width,pitch:h+(l+7)*U.width}}}Ha=r;c(!1)}function Tb(a,c,d){if(qa===ia.LOADING||fb!==Za.IDLE)return-1;Object.assign(na,ic,d?d:{});W.yb=na.thresholdDetectFactor;W.nd=
na.thresholdDetectFactorUnstitch;W.La=na.isSkipConfirmation;W.hb=na.isKeepTracking;W.pd=na.trackingFactors;W.Pa=na.secondNeighborFactor;W.qb=na.nLocateAutomoves;W.lb=na.locateMoveNoiseAmplitude;W.pa=na.nConfirmAutoMoves;W.xb=na.thresholdConfirmOffset;W.Wa=na.confirmMoveNoiseAmplitude;W.ob=na.nConfirmUnstitchMoves;W.Ra=na.tiltPosAngleIfAmbiguousDetection;W.Xa=na.confirmScoreMinFactorDuringAutoMove;Ea.U();ha.label=!1;switch(Q.current){case $a.video:Q.type===Na.video&&Q.time!==Q.element.currentTime?
(Q.L.refresh(),Q.time=Q.element.currentTime):Q.type===Na.Hb&&Q.element.needsUpdate&&(Q.L.rd(Q.element.arrayBuffer),Q.element.needsUpdate=!1);switch(na.cutShader){case "median":K.Ga="s59";break;default:K.Ga="s58"}break;case $a.sd:if(!Q.ua){K.A=c.size.width;K.R=c.size.height;switch(na.cutShader){case "IOS":K.Ga="s61";z.N("s61",[{name:"u10",type:"2f",value:[1/K.A,1/K.R]}]);break;default:K.Ga="s58"}Rb(null);Ya()}Q.L.rd(c.buffer)}a||(a=Cb.ce()+fa.pb[0],Cb.od());return a}function Ub(a,c){V.L.W();z.set(K.Ga);
Va&&U.Ja&&z.X("u37",qa===ia.Sa?Ga:0);Q.L.i(0);z.ub("u41",V.o);Y.m(!1,!1);Bb=a===c-1}function Vb(){Ea.Te();ab&&(b.viewport(0,0,wa.width,wa.height),z.set("s60"),Q.L.i(0),z.ub("u41",V.o),Y.m(!1,!1),Wb&&b.commit?b.commit():b.flush());return ha}var ra={Rf:function(a){return Math.ceil(Math.log2(a))},mg:function(a){return Math.log2(a)},ig:function(a){return 0===Math.log2(a)%1},cf:function(a){var c=[0,0,0,0];a.forEach(function(d){c[0]+=d[0];c[1]+=d[1];c[2]+=d[2];c[3]+=d[3]});return c},Ea:function(a,c,d){return Math.min(Math.max(a,
c),d)},ff:function(a){return a*Math.PI/180},tg:function(a,c){c=Math.pow(10,c);return Math.round(a*c)/c},ug:function(a){return Math.round(1E6*a)/1E6},Sf:function(a,c){return(100*a/c).toFixed(3)},oa:function(a,c,d){return a*(1-d)+c*d},ng:function(a,c){return a[0]*(1-c)+a[1]*c},Kd:function(a,c){return ra.Dd(a-c)},Dd:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},lf:function(a,c){return Math.abs(ra.Kd(a,c))},We:function(a,c){return Math.atan2(Math.sin(a)+Math.sin(c),
Math.cos(a)+Math.cos(c))}},pb={get:function(a,c,d){var e=new XMLHttpRequest;e.open("GET",a,!0);e.withCredentials=!1;e.onreadystatechange=function(){4===e.readyState&&(200===e.status||0===e.status?c(e.responseText):"undefined"!==typeof d&&d(e.status))};e.send()},Tf:function(a){return new Promise(function(c,d){pb.get(a,c,d)})},Pf:function(a,c,d){a+=d?"?"+pb.Od(d):"";pb.get(a,function(e){c(JSON.parse(e))})},pg:function(a,c,d){var e=new XMLHttpRequest;e.open("POST",a,!0);e.setRequestHeader("Content-type",
"application/x-www-form-urlencoded");e.onreadystatechange=function(){4!==e.readyState||200!==e.status&&0!==e.status||d(e.responseText)};e.send(c)},Od:function(a){return"string"===typeof a?a:Object.keys(a).map(function(c){return encodeURIComponent(c)+"="+encodeURIComponent(a[c])}).join("&")},Df:function(a,c){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){c(d.response)};d.send()}},jc={create:function(a,c){for(var d=Array(c),e=0;e<c;++e)d[e]=a;return d},
gf:function(a,c){for(var d=0;d<a.length;++d)c[d]=a[d]},clone:function(a){for(var c=Array(a.length),d=0;d<a.length;++d)c[d]=a[d];return c},xg:function(a,c,d){a.forEach(function(e,r){c[r]=e*d})},Ig:function(a){for(var c=a.length-1;0<c;--c){var d=Math.floor(Math.random()*(c+1)),e=a[c];a[c]=a[d];a[d]=e}},Jg:function(a){return a.sort(function(c,d){return c-d})},Re:function(a){return Array.isArray(a)||a.constructor===Float32Array||a.constructor===Uint8Array}},Db={Fb:function(a,c){if(0===c||"object"!==typeof a)return a;
a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var d in a)a[d]=Db.Fb(a[d],c);return a},kf:function(a){return JSON.parse(JSON.stringify(a))}},zb={jc:function(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)},kg:function(a,c,d){return Math.min(Math.max((d-a)/(c-a),0),1)},yf:function(a,c,d,e){return Math.pow(Math.min(Math.max((e-a)/(c-a),0),1),d)},Qg:function(){return 0},og:function(){return 1},lg:function(a){return a},vf:function(a){return a*a},Af:function(a){return a*(2-a)},sf:function(a){return.5>
a?2*a*a:-1+(4-2*a)*a},qf:function(a){return a*a*a},zf:function(a){return--a*a*a+1},rf:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},wf:function(a){return a*a*a*a},Bf:function(a){return 1- --a*a*a*a},tf:function(a){return.5>a?8*a*a*a*a:1-8*--a*a*a*a},xf:function(a){return a*a*a*a*a},Cf:function(a){return 1+--a*a*a*a*a},uf:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},kc={Sd:function(a,c,d){switch(a){case "relu":return d+"=max(vec4(0.,0.,0.,0.),"+c+");";case "elu":return d+"=mix(exp(-abs("+
c+"))-vec4(1.,1.,1.,1.),"+c+",step(0.,"+c+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+c+"))-vec4(0.1,0.1,0.1,0.1),"+c+",step(0.,"+c+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}},z=function(){function a(u,p,g){p=u.createShader(p);u.shaderSource(p,g);u.compileShader(p);return u.getShaderParameter(p,u.COMPILE_STATUS)?p:null}function c(u,p,g){p=a(u,u.VERTEX_SHADER,p);g=a(u,u.FRAGMENT_SHADER,g);u===b&&q.push(p,g);var L=
u.createProgram();u.attachShader(L,p);u.attachShader(L,g);u.linkProgram(L);return L}function d(u){return["float","sampler2D","int"].map(function(p){return"precision "+u+" "+p+";\n"}).join("")}function e(u,p){p.C=p.C?!0:!1;if(!p.C){p.ya=p.ya||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";p.wc=p.wc||["a0"];p.Cb=p.Cb||[2];p.precision=p.precision||D;p.id=t++;void 0!==p.kd&&(p.kd.forEach(function(M,O){p.g=p.g.replace(M,p.tb[O])}),
p.kd.splice(0));p.rc=0;p.Cb.forEach(function(M){p.rc+=4*M});var g=d(p.precision);p.qa=c(u,g+p.ya,g+p.g);p.B={};p.j.forEach(function(M){p.B[M]=u.getUniformLocation(p.qa,M)});p.attributes={};p.Ca=[];p.wc.forEach(function(M){var O=u.getAttribLocation(p.qa,M);p.attributes[M]=O;p.Ca.push(O)});if(p.l){u.useProgram(p.qa);l=p;h=p.id;for(var L in p.l)u.uniform1i(p.B[L],p.l[L])}p.ua=!0}}function r(u){za.Me(S);h!==u.id&&(S.P(),h=u.id,l=u,b.useProgram(u.qa),u.Ca.forEach(function(p){0!==p&&b.enableVertexAttribArray(p)}))}
function m(u,p,g){e(u,p,g);u.useProgram(p.qa);u.enableVertexAttribArray(p.attributes.a0);h=-1;return l=p}function n(){return{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",j:["u1"],l:{u1:0}}}var q=[],h=-1,l=null,t=0,x=!1,D="highp",J=["u1"],v=["u0"],y={u1:0},f={u0:0},G={u1:0,u2:1},F={u1:0,u3:1},k=["u1","u3","u4"],H={u5:0},E={s0:n(),s1:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",j:J,l:y,precision:"lowp"},s2:{g:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
j:["u1","u2"],l:G},s3:{g:"uniform sampler2D u1;uniform vec2 u6,u7;varying vec2 vv0;void main(){vec2 a=vv0*u6+u7;gl_FragColor=texture2D(u1,a);}",j:["u1","u6","u7"],l:y,C:!0},s4:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",j:J,l:y},s5:{g:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",j:["u1","u2"],l:G},s6:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",
j:J,l:y},s7:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",j:J,l:y},s8:{g:"uniform sampler2D u0;uniform float u6;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u6;}",j:["u0","u6"],l:f},s9:{g:"uniform sampler2D u0;uniform float u6;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u6,f);gl_FragColor=b*g;}",j:["u0","u6"],l:f},s10:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
j:J,l:y},s11:{g:"uniform sampler2D u1,u8;uniform float u9;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u8,vv0);gl_FragColor=mix(b,a,u9*f);}",j:["u1","u8","u9"],l:{u1:0,u8:1}},s12:{g:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u10)+texture2D(u1,vv0+u10*vec2(1.,-1.))+texture2D(u1,vv0+u10*vec2(-1.,-1.))+texture2D(u1,vv0+u10*vec2(-1.,1.)));}",j:["u1","u10"],l:y},s13:{g:"uniform sampler2D u1;uniform vec4 u11;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u11);gl_FragColor=j(a);}",
j:["u1","u11"],l:y},s14:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",j:v,l:f,C:!0},s15:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",j:v,l:f},s16:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",j:v,l:f},
s17:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",j:v,l:f},s18:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",j:v,l:f},s19:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",j:v,l:f,C:!0},s20:{g:"uniform sampler2D u0,u12;uniform float u13;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u12,e);float b=u13*u13;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",
j:["u0","u12","u13"],l:{u0:0,u12:1},C:!0},s21:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),f=floor(u14.x*fract(b*u14.y)),g=(f*u14.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",j:["u1","u14"],l:y},s22:{g:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),f=texture2D(u16,c);gl_FragColor=d*f;}",j:["u15","u16","u17"],l:{u16:0,u15:1,
u17:2},C:!0},s23:{g:"uniform float u18,u19;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 c=fract(vv0*u18),a=vv0;float b=u18*u19;a=(.5+floor(b*vv0))/b;vec4 d=texture2D(u15,a),f=texture2D(u16,c);gl_FragColor=d*f;}",j:["u16","u15","u18","u19"],l:{u16:0,u15:1}},s24:{g:"uniform float u18,u19;uniform sampler2D u15,u16,u20,u21,u22,u23;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u18),d=vv0;float h=u18*u19;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u15,d),m=texture2D(u16,c),a=texture2D(u23,d);a=floor(.5+a*255.);vec4 n=texture2D(u20,c),o=texture2D(u21,c),p=texture2D(u22,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
j:"u15 u16 u18 u19 u23 u20 u21 u22".split(" "),l:{u16:0,u15:1,u23:3,u20:4,u21:5,u22:6},C:!0},s25:{g:"uniform sampler2D u15,u16,u3;uniform float u18,u24,u25,u19;uniform vec2 u26;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u24*vv0),d=u24*vv0-c;float g=u18/u24;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u24;float m=u24*u19/u18;vec2 b=m*h;b=floor(u26*b+.5*(u19-1.)*(f-u26));vec2 a=(b+i*u25)/u19;a+=.25/u19;vec2 k=step(a,f)*step(l,a);vec4 n=texture2D(u15,j),o=texture2D(u16,a),p=n*o,q=texture2D(u3,j);gl_FragColor=(p*u25*u25+q)*k.x*k.y;}",
j:"u15 u16 u18 u24 u25 u19 u3 u26".split(" "),l:{u16:0,u15:1,u3:2}},s26:{g:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",j:["u15","u16"],l:{u16:0,u15:1},C:!0},s27:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",j:k,l:F},s28:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
j:k,l:F,C:!0},s29:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",j:k,l:F,C:!0},s30:{g:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
j:J,l:y,precision:"lowp"},s31:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",j:["u1","u27"],l:y,precision:"lowp"},s32:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
j:["u1","u27"],l:y,precision:"lowp"},s33:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
j:["u1","u2","u28"],l:G,C:!0},s34:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u28,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",j:["u1","u2","u28"],l:G,C:!0},s35:{g:"uniform sampler2D u5;uniform vec2 u10;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u10*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u10*h),d=texture2D(u5,a+u10*i),j=texture2D(u5,a+u10),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
j:["u5","u10"],l:H},s36:{g:"uniform sampler2D u5;uniform vec2 u10;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u10*k),d=texture2D(u5,a+u10*l),g=texture2D(u5,a+u10),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u10*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u10*m),d=f(a+u10*2.),g=f(a+u10*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",j:["u5","u10"],
l:H,C:!0},s37:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",j:["u1"],l:y,precision:"lowp",C:!0},s38:{g:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u10)+2002./e*texture2D(u1,vv0-2.*u10)+3003./e*texture2D(u1,vv0-u10)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u10)+2002./e*texture2D(u1,vv0+2.*u10)+1001./e*texture2D(u1,vv0+3.*u10);gl_FragColor=a;}",j:["u10","u1"],
l:y,precision:"lowp",C:!0},s39:{g:"uniform sampler2D u1,u12,u29;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u12,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",j:["u1","u12","u29"],l:{u1:0,u12:1,u29:2},C:!0}},B={s40:{g:"uniform float u18,u30;uniform sampler2D u15,u16,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u18,xyTo=floor(vv0*u18+eps2);float weightSize=toSparsity*u18;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u18,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
j:["u18","u15","u16","u3","u30"],tb:["1.1111","gl_FragColor\\*=2.2222;"]},s41:{g:"uniform float u18,u30,u19;uniform sampler2D u15,u16,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u19,xyTo=floor(vv0*u18+eps2);float weightSize=fromSparsity*u19;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u18;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u19,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
j:"u18 u19 u15 u16 u3 u30".split(" "),tb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},A=null,I=null,S={jb:function(){return x},D:function(){if(!x){A=Db.Fb(E,2);I=Db.Fb(B,2);D="highp";b.getShaderPrecisionFormat&&(b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT),b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.LOW_FLOAT));for(var u in A)e(b,A[u],u);z.set("s0");b.enableVertexAttribArray(0);x=!0}},Ta:function(u){u.forEach(function(p){S.vc(p)})},vc:function(u){A[u.id]=u;e(b,u,u.id)},he:function(u,
p,g){p||(p=u);A[p]=Object.create(I[u]);A[p].oe=!0;I[u].tb&&I[u].tb.forEach(function(L,M){A[p].g=A[p].g.replace(new RegExp(L,"g"),g[M])});e(b,A[p],p)},set:function(u){var p=A[u];p.C&&(p.C=!1,e(b,p,u));r(p)},Na:function(u){return m(u,n(),"s42")},hc:function(u){return m(u,{g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",j:[],precision:D},"s43")},Qd:function(u){return"undefined"===typeof A[u]?!1:A[u].ua},P:function(){-1!==h&&(h=-1,l.Ca.forEach(function(u){0!==u&&b.disableVertexAttribArray(u)}))},ic:function(){var u=
0;l.Ca.forEach(function(p,g){g=l.Cb[g];b.vertexAttribPointer(p,g,b.FLOAT,!1,l.rc,u);u+=4*g})},Nd:function(){b.enableVertexAttribArray(0)},Oa:function(){S.vb(b)},vb:function(u){u.vertexAttribPointer(l.Ca[0],2,u.FLOAT,!1,8,0)},Cg:function(u,p){b.uniform1i(l.B[u],p)},X:function(u,p){b.uniform1f(l.B[u],p)},S:function(u,p,g){b.uniform2f(l.B[u],p,g)},Ne:function(u,p){b.uniform2fv(l.B[u],p)},Eg:function(u,p){b.uniform3fv(l.B[u],p)},Dg:function(u,p,g,L){b.uniform3f(l.B[u],p,g,L)},Oe:function(u,p,g,L,M){b.uniform4f(l.B[u],
p,g,L,M)},ub:function(u,p){b.uniform4fv(l.B[u],p)},Fg:function(u,p){b.uniformMatrix2fv(l.B[u],!1,p)},Gg:function(u,p){b.uniformMatrix3fv(l.B[u],!1,p)},Hg:function(u,p){b.uniformMatrix4fv(l.B[u],!1,p)},N:function(u,p){S.set(u);p.forEach(function(g){switch(g.type){case "4f":b.uniform4fv(l.B[g.name],g.value);break;case "3f":b.uniform3fv(l.B[g.name],g.value);break;case "2f":b.uniform2fv(l.B[g.name],g.value);break;case "1f":b.uniform1f(l.B[g.name],g.value);break;case "1i":b.uniform1i(l.B[g.name],g.value);
break;case "mat2":b.uniformMatrix2fv(l.B[g.name],!1,g.value);break;case "mat3":b.uniformMatrix3fv(l.B[g.name],!1,g.value);break;case "mat4":b.uniformMatrix4fv(l.B[g.name],!1,g.value)}})},Qf:function(){return"lowp"},u:function(){S.P();b.disableVertexAttribArray(0);for(var u in A){var p=A[u];p.ua&&(p.ua=!1,b.deleteProgram(p.qa));p.oe&&delete A[u]}q.forEach(function(g){b.deleteShader(g)});q.splice(0);t=0;x=!1;l=null;h=-1}};return S}(),b=null,qb=function(){function a(v){console.log("ERROR in ContextFF: ",
v);return!1}function c(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(v,y,f){v.setAttribute("width",y);v.setAttribute("height",f)}function e(v){function y(){Ia.u();da.reset();G.getExtension("WEBGL_lose_context").loseContext()}if(c())return!1;var f=document.createElement("canvas");d(f,5,5);var G=null;try{G=f.getContext("webgl2",v)}catch(F){return!1}if(!G)return!1;r(G);da.Dc(G);v=da.Gb(G);if(!v.ca&&!v.da)return y(),!1;v=Ia.yc(G,v);y();return v?!0:!1}function r(v){v.clearColor(0,
0,0,0);v.disable(v.DEPTH_TEST);v.disable(v.BLEND);v.disable(v.DITHER);v.disable(v.STENCIL_TEST);v.disable(v.CULL_FACE);v.GENERATE_MIPMAP_HINT&&v.FASTEST&&v.hint(v.GENERATE_MIPMAP_HINT,v.FASTEST);v.disable(v.SAMPLE_ALPHA_TO_COVERAGE);v.disable(v.SAMPLE_COVERAGE);v.depthFunc(v.LEQUAL);v.clearDepth(1)}var m=null,n=null,q=null,h=null,l=!0,t=null,x=null,D=[],J={K:function(){return m.width},Z:function(){return m.height},Hf:function(){return m},Ff:function(){return b},ea:function(){return l},flush:function(){b.flush()},
$f:function(){Ea.U();J.Ge()},Ge:function(){aa.reset();Y.reset();z.P();z.Nd();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);Y.Ua();z.Oa()},Ud:function(){t||(t=new Uint8Array(m.width*m.height*4));b.readPixels(0,0,m.width,m.height,b.RGBA,b.UNSIGNED_BYTE,t);return t},Jf:function(){return m.toDataURL("image/jpeg")},Kf:function(){Ea.T();n||(n=document.createElement("canvas"),q=n.getContext("2d"));d(n,m.width,m.height);for(var v=J.Ud(),y=q.createImageData(n.width,n.height),f=n.width,G=n.height,F=y.data,k=0;k<
G;++k)for(var H=G-k-1,E=0;E<f;++E){var B=4*(k*f+E),A=4*(H*f+E);F[B]=v[A];F[B+1]=v[A+1];F[B+2]=v[A+2];F[B+3]=v[A+3]}q.putImageData(y,0,0);return n.toDataURL("image/png")},If:function(v){!n&&v&&(n=document.createElement("canvas"),q=n.getContext("2d"));var y=v?n:document.createElement("canvas");d(y,m.width,m.height);(v?q:y.getContext("2d")).drawImage(m,0,0);return y},D:function(v){v=Object.assign({Mb:null,Xb:null,Ya:null,Bc:null,width:512,height:512,premultipliedAlpha:!1,ke:!0,antialias:!1,debug:!1,
jf:!1},v);v.Mb?(b=v.Mb,m=v.Mb.canvas):v.Bc&&!v.Ya?m=document.getElementById(v.Bc):v.Ya&&(m=v.Ya);m||(m=document.createElement("canvas"));m.width=v.width;m.height=v.height;if(b)l=b instanceof WebGL2RenderingContext;else{l=!0;var y={antialias:v.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:v.premultipliedAlpha,stencil:!1,depth:v.ke,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(y.antialias=!1);var f=e(y);f||!y.antialias||c()||(y.antialias=!1,f=e(y));f&&(b=m.getContext("webgl2",y));b?l=!0:((b=m.getContext("webgl",y))||(b=m.getContext("experimental-webgl",y)),l=!1)}if(!b)return a("WebGL1 and 2 are not enabled");v.Xb&&m.addEventListener&&(h=b.getExtension("WEBGL_lose_context"))&&(x=v.Xb,m.addEventListener("webglcontextlost",x,!1));if(!da.D())return a("Not enough GL capabilities");r(b);z.D();Y.D();Ia.yc(b,da.Td());D.forEach(function(G){G(b)});D.splice(0);return!0},$e:function(){return new Promise(function(v){b?
v(b):D.push(v)})},u:function(){b&&(da.u(),z.u(),Ia.u());h&&x&&(m.removeEventListener("webglcontextlost",x,!1),h=x=null);b=t=q=n=m=null;D.splice(0)}};return J}(),za=function(){function a(){null===c&&("undefined"!==typeof z?c=z:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;return{reset:function(){c=null},Me:function(d){c!==d&&(c&&c.P(),c=d)},jb:function(){return c.jb()},Oa:function(){return c.Oa()},vb:function(d){return c.vb(d)},ic:function(){return c.ic()},P:function(){return c.P()},set:function(d){a();
return c.set(d)},Na:function(d){a();return c.Na(d)},hc:function(d){a();return c.hc(d)}}}(),Pa=function(){function a(g){b.bindTexture(b.TEXTURE_2D,g)}function c(g){I[0]=g;g=S[0];var L=g>>16&32768,M=g>>12&2047,O=g>>23&255;return 103>O?L:142<O?L|31744|((255==O?0:1)&&g&8388607):113>O?(M|=2048,L|(M>>114-O)+(M>>113-O&1)):L=(L|O-112<<10|M>>1)+(M&1)}function d(g){var L=new Uint16Array(g.length);g.forEach(function(M,O){L[O]=c(M)});return L}function e(){if(null!==u.Nb)return u.Nb;var g=m(d([.5,.5,.5,.5]),!0);
return null===g?!0:u.Nb=g}function r(){if(null!==u.Ob)return u.Ob;var g=m(new Uint8Array([127,127,127,127]),!1);return null===g?!0:u.Ob=g}function m(g,L){if(!za.jb()||!y)return null;var M=null,O=Math.sqrt(g.length/4);try{var ba=b.getError();if("FUCKING_BIG_ERROR"===ba)return!1;M=p.instance({isFloat:!1,O:L,array:g,width:O});ba=b.getError();if(ba!==b.NO_ERROR)return!1}catch(Aa){return!1}oa.T();b.viewport(0,0,O,O);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);za.set("s0");M.xc(0);pa.m(!0,!0);g=4*
O*O;L=new Uint8Array(g);b.readPixels(0,0,O,O,b.RGBA,b.UNSIGNED_BYTE,L);O=!0;for(ba=0;ba<g;++ba)O=O&&3>Math.abs(L[ba]-127);M.remove();oa.U();return O}var n=0,q=null,h=0,l=null,t=null,x=null,D=null,J=null,v=null,y=!1,f=[],G={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,F:null,Pc:null,me:!1,O:!1,la:null,mb:4,Sb:0},F=!1,k=null,H=null,E=[[1,0,0,0],[0,1,0,0],[0,0,1,0],
[0,0,0,1]],B=!1,A=!1,I=new Float32Array(1),S=new Int32Array(I.buffer),u={Nb:null,Ob:null},p={D:function(){y||(J=[b.RGBA,null,b.RGBA,b.RGBA],v=[b.RGBA,null,b.RGBA,b.RGBA],q=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7],B="undefined"!==typeof JEContext,A="undefined"!==typeof da,B&&JEContext.jg()&&q.push(b.TEXTURE8,b.TEXTURE9),l=[-1,-1,-1,-1,-1,-1,-1,-1],D=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT],y=!0)},ge:function(){if(!t){for(var g=new Float32Array(16384),L=0;16384>
L;++L)g[L]=2*Math.random()-1;t={random:p.instance({isFloat:!0,isPot:!0,array:g,width:64}),qd:p.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}p.Ve()},Yf:function(){return t.qd},Ve:function(){D[1]=da.Kb(b)},Ke:function(){v=J=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},gd:function(g){z.set("s1");oa.T();var L=g.K(),M=g.Z();b.viewport(0,0,L,M);g.i(0);pa.m(!1,!1)},rg:function(g,L){p.gd(g);b.readPixels(0,0,g.K(),g.Z(),b.RGBA,b.UNSIGNED_BYTE,L)},sg:function(g,L){p.gd(g);return da.dc(0,0,g.K(),
g.Z(),L)},Kc:function(g,L,M,O,ba,Aa,Ba){g.activeTexture(g.TEXTURE0);var Ja=g.createTexture();g.bindTexture(g.TEXTURE_2D,Ja);ba=ba instanceof Float32Array?ba:new Float32Array(ba);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,Aa);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,
M,O,0,g.RGBA,g.FLOAT,ba);g.bindTexture(g.TEXTURE_2D,null);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!1);Ba&&(oa.U(),z.Na(g));g.viewport(0,0,M,O);g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,L,0);g.bindTexture(g.TEXTURE_2D,Ja);Ba?pa.m(!0,!0):Y.bb(g);g.deleteTexture(Ja);y&&(l[0]=-1,x=null,n=0)},Bb:function(g){g!==n&&(b.activeTexture(q[g]),n=g)},instance:function(g){var L;function M(){R=void 0!==w.F.videoWidth?w.F.videoWidth:w.F.width;T=void 0!==w.F.videoHeight?w.F.videoHeight:w.F.height}
function O(C){var P=b.getError();if("FUCKING_BIG_ERROR"===P)return!1;b.texImage2D(b.TEXTURE_2D,0,la,ja,ka,C);P=b.getError();P!==b.NO_ERROR&&ja!==b.RGBA&&(ja=b.RGBA,b.texImage2D(b.TEXTURE_2D,0,la,ja,ka,C));return!0}function ba(){if(!Xb){a(xa);Fa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,Fa);w.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,w.isMirrorX?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,w.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,
b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));w.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.Mf().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.Xe);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,w.isLinear?b.LINEAR:b.NEAREST);w.isLinear?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,w.isMipmap&&!Ta?b.NEAREST_MIPMAP_LINEAR:b.LINEAR):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,w.isMipmap&&!Ta?b.NEAREST_MIPMAP_NEAREST:
b.NEAREST);ja=J[w.mb-1];la=v[w.mb-1];ka=D[Eb];if(da.ea()){var C=da.Vd();ja===b.RGBA&&ka===b.FLOAT?w.isMipmap||w.isLinear?la=Ia.Xd(b):da.zc()?C&&(la=C):la=b.RGBA16F||b.RGBA:ja===b.RGB&&ka===b.FLOAT&&C&&(la=C,ja=b.RGBA)}if(w.O&&!w.isFloat||w.isFloat&&w.isMipmap&&Ia.re())la=da.Wd(),ka=da.Kb(b);w.Sb&&(rb=w.Sb);w.isSrgb&&4===w.mb&&(ja=JEContext.Wf());if(w.F)O(w.F);else if(w.url)O(Oa);else if(ya){C=ya;try{"FUCKING_BIG_ERROR"!==b.getError()&&(b.texImage2D(b.TEXTURE_2D,0,la,R,T,0,ja,ka,C),b.getError()!==
b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,la,R,T,0,ja,ka,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,R,T,0,b.RGBA,b.UNSIGNED_BYTE,null)))}catch(xc){b.texImage2D(b.TEXTURE_2D,0,la,R,T,0,ja,ka,null)}w.isKeepArray||(ya=null)}else C=b.getError(),"FUCKING_BIG_ERROR"!==C&&(b.texImage2D(b.TEXTURE_2D,0,la,R,T,0,ja,ka,null),C=b.getError(),C!==b.NO_ERROR&&(ja=b.RGBA,w.O&&ka!==b.FLOAT&&(ka=b.FLOAT,b.texImage2D(b.TEXTURE_2D,0,la,R,T,0,ja,ka,null))));if(w.isMipmap)if(!Ta&&ca)ca.Jb(),sb=
!0;else if(Ta){C=Math.log2(Math.min(R,T));bb=Array(1+C);bb[0]=xa;for(var P=1;P<=C;++P){var ma=Math.pow(2,P),X=R/ma;ma=T/ma;var Ua=b.createTexture();a(Ua);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,la,X,ma,0,ja,ka,null);a(null);bb[P]=Ua}sb=!0}a(null);l[n]=-1;Fa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);gb=!0;w.la&&ca&&(w.la(ca),w.la=null)}}function Aa(){for(var C=R*T,P=2*C,ma=3*C,X=0;X<C;++X)Ca[0][X]=
hb[X],Ca[1][X]=hb[X+C],Ca[2][X]=hb[X+P],Ca[3][X]=hb[X+ma]}function Ba(){var C=R*T*4;Ka=[new Uint8Array(C),new Uint8Array(C),new Uint8Array(C),new Uint8Array(C)];Ca=[new Float32Array(Ka[0].buffer),new Float32Array(Ka[1].buffer),new Float32Array(Ka[2].buffer),new Float32Array(Ka[3].buffer)];tb=new Uint8Array(4*C);hb=new Float32Array(tb.buffer);ib=!0}function Ja(){L=new Uint8Array(R*T*4);Yb=new Float32Array(L.buffer);Fb=!0}var w=Object.assign({},G,g),jb=h++;null===w.isFlipY&&(w.isFlipY=w.url?!0:!1);
w.data&&(w.array="string"===typeof w.data?Qa(w.data):w.isFloat?new Float32Array(w.data):new Uint8Array(w.data),w.isFlipY=!1);var Eb=0,Zb=w.F?!0:!1,kb=null,Gb=null,$b=!1;w.O=w.O||w.isFloat;w.O&&(Eb=1);!w.me&&w.isFloat&&A&&!da.zc()&&(w.isFloat=!1);w.isFloat&&(Eb=2);w.isAnisotropicFiltering&&B&&!JEContext.cg()&&(w.isAnisotropicFiltering=!1);var xa=w.Pc||b.createTexture(),Oa=null,ya=!1,R=0,T=0,gb=!1,Xb=!1,ib=!1,Ca=null,Ka=null,tb=null,hb=null,la=null,ja=null,ka=null,Fa=w.isFlipY,lc=(g=w.O&&w.isMipmap)&&
Ia.Ad(),Ta=g&&!lc?!0:!1,bb=null,rb=-1,ac=-1,sb=!1;var Fb=!1;var Yb=L=null;w.width&&(R=w.width,T=w.height?w.height:R);var ca={get:function(){return xa},K:function(){return R},Z:function(){return T},Zf:function(){return w.url},dg:function(){return w.isFloat},fg:function(){return w.O},gg:function(){return w.isLinear},Jb:function(){b.generateMipmap(b.TEXTURE_2D)},yd:function(C,P){Ta?(C||(C=ca.Oc()),p.Bb(P),a(bb[C]),l[P]=-1):ca.i(P)},Oc:function(){-1===rb&&(rb=Math.log(R)/Math.log(2));return rb},Rd:function(C){C||
(C=ca.Oc());if(Ta){z.set("s12");p.Bb(0);for(var P=R,ma=T,X=1;X<=C;++X)P/=2,ma/=2,z.S("u10",.25/P,.25/ma),b.viewport(0,0,P,ma),a(bb[X-1]),b.framebufferTexture2D(oa.fb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,bb[X],0),pa.m(!1,1===X);l[0]=-1}else C!==ac&&(ac=C,b.TEXTURE_MAX_LEVEL&&b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAX_LEVEL,C)),ca.Jb()},Bg:function(C){(Zb=!jc.Re(C))?(ya=null,w.F=C,M()):ya=C},i:function(C){if(!gb)return!1;p.Bb(C);if(l[C]===jb)return!1;a(xa);l[C]=jb;return!0},xc:function(C){b.activeTexture(q[C]);
n=C;a(xa);l[C]=jb},v:function(){x=ca;b.framebufferTexture2D(oa.fb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,xa,0)},W:function(){x=ca;b.viewport(0,0,R,T);b.framebufferTexture2D(oa.fb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,xa,0)},qc:p.qc,Ie:function(C,P){R=C;T=P},resize:function(C,P){ca.Ie(C,P);ba()},clone:function(C){C=p.instance({width:R,height:T,O:w.O,isFloat:w.isFloat,isLinear:w.isLinear,isMirrorY:w.isMirrorY,isFlipY:C?!Fa:Fa,isPot:w.isPot});za.set("s0");oa.U();C.v();b.viewport(0,0,R,T);ca.i(0);pa.m(!0,!0);
return C},Pe:function(){b.viewport(0,0,R,T)},remove:function(){b.deleteTexture(xa);Xb=!0;f.splice(f.indexOf(ca),1);ca=null},refresh:function(){ca.xc(0);Fa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Zb?b.texImage2D(b.TEXTURE_2D,0,la,ja,ka,w.F):b.texImage2D(b.TEXTURE_2D,0,la,R,T,0,ja,ka,ya);Fa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},fd:function(){ib||Ba();b.readPixels(0,0,R,4*T,b.RGBA,b.UNSIGNED_BYTE,tb);Aa();return Ca},Ce:function(){ib||Ba();return da.dc(0,0,R,4*T,tb).then(function(){Aa();return Ca})},
Ee:function(){Fb||Ja();b.readPixels(0,0,R,T,b.RGBA,b.UNSIGNED_BYTE,L);return Yb},De:function(){Fb||Ja();return da.dc(0,0,R,T,L)},Cc:function(C){oa.T();z.set("s13");ca.i(0);if(C)b.viewport(0,0,R,T),z.Oe("u11",.25,.25,.25,.25),pa.m(!1,!0);else for(C=0;4>C;++C)b.viewport(0,T*C,R,T),z.ub("u11",E[C]),pa.m(!1,0===C)},rd:function(C){var P=ka===D[0]&&!r();a(xa);Fa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);P?($b||(kb=document.createElement("canvas"),kb.width=R,kb.height=T,Gb=kb.getContext("2d"),Gb.createImageData(R,
T),$b=!0),null.data.set(C),Gb.putImageData(null,0,0),b.texImage2D(b.TEXTURE_2D,0,la,ja,ka,kb)):b.texImage2D(b.TEXTURE_2D,0,la,R,T,0,ja,ka,C);l[n]=jb;Fa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Pg:function(C,P){a(xa);P&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,la,ja,ka,C);l[n]=jb;P&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},yg:function(C,P){var ma=R*T,X=4*ma;C=w.O?C?"RGBE":"JSON":"RGBA";P&&(C=P);P=da.ea()&&!1;var Ua=null;switch(C){case "RGBE":Ua="s44";break;case "JSON":Ua=
P?"s0":"s13";break;case "RGBA":case "RGBAARRAY":Ua="s7"}ib||("RGBA"===C||"RGBE"===C||"RGBAARRAY"===C?(Ka=new Uint8Array(X),ib=!0):"JSON"!==C||P||Ba());oa.T();z.set(Ua);ca.i(0);X=null;if("RGBA"===C||"RGBE"===C||"RGBAARRAY"===C){b.viewport(0,0,R,T);pa.m(!0,!0);b.readPixels(0,0,R,T,b.RGBA,b.UNSIGNED_BYTE,Ka);if("RGBAARRAY"===C)return{data:Ka};F||(k=document.createElement("canvas"),H=k.getContext("2d"),F=!0);k.width=R;k.height=T;ma=H.createImageData(R,T);ma.data.set(Ka);H.putImageData(ma,0,0);X=k.toDataURL("image/png")}else if("JSON"===
C)if(P)X=new Float32Array(ma),b.viewport(0,0,R,T),pa.m(!0,!0),b.readPixels(0,0,R,T,b.RGBA,b.FLOAT,X);else{for(X=0;4>X;++X)b.viewport(0,T*X,R,T),z.ub("u11",E[X]),pa.m(!X,!X);ca.fd();X=Array(ma);for(P=0;P<ma;++P)X[4*P]=Ca[0][P],X[4*P+1]=Ca[1][P],X[4*P+2]=Ca[2][P],X[4*P+3]=Ca[3][P]}return{format:C,data:X,width:R,height:T,isMirrorY:w.isMirrorY,isFlipY:"RGBA"===C?w.isFlipY:!w.isFlipY}}};w.isMipmap&&!Ta&&gb&&!sb&&(ca.Jb(),sb=!0);if(w.url)a(xa),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,
null),Oa=new Image,Oa.hf="Anonymous",Oa.crossOrigin="Anonymous",Oa.src=w.url,Oa.onload=function(){R=Oa.width;T=Oa.height;ba()};else if(w.F){var bc=function(){M();R?ba():setTimeout(bc,1)};bc()}else w.array?(w.O&&!w.isFloat?w.array instanceof Uint16Array?(ya=w.array,ba()):e()?(ya=d(w.array),ba()):(ba(),p.Kc(b,xa,ca.K(),ca.Z(),w.array,Fa,!0)):(ya=w.isFloat?w.array instanceof Float32Array?w.array:new Float32Array(w.array):w.array instanceof Uint8Array?w.array:new Uint8Array(w.array),ba()),w.isKeepArray||
(ya&&ya!==w.array&&(ya=null),delete w.array)):w.Pc?gb=!0:ba();ca.Vf=ca.K;w.la&&gb&&(w.la(ca),w.la=null);f.push(ca);return ca},T:function(g){g!==n&&(b.activeTexture(q[g]),n=g);l[g]=-1;a(null)},Ze:function(g){t.random.i(g)},qc:function(){x=null;b.framebufferTexture2D(oa.fb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},reset:function(){0!==n&&b.activeTexture(q[0]);for(var g=0;g<q.length;++g)l[g]=-1;n=-1},vg:function(){n=-1},Se:function(){for(var g=0;g<q.length;++g)p.T(g)},Mc:function(){t&&(t.random.remove(),
t.qd.remove())},Ng:function(g,L){if("RGBA"===g.format||"RGBE"===g.format){var M=new Image;M.src=g.data;M.onload=function(){p.instance({isMirrorY:g.isMirrorY,isFlipY:g.isFlipY,isFloat:!1,F:M,la:function(O){if("RGBA"===g.format)L(O);else{var ba=g.width,Aa=g.height,Ba=p.instance({isMirrorY:g.isMirrorY,isFloat:!0,width:ba,height:Aa,isFlipY:g.isFlipY});oa.U();b.viewport(0,0,ba,Aa);z.set("s45");Ba.v();O.i(0);pa.m(!0,!0);p.T(0);L(Ba);da.flush();setTimeout(O.remove,50)}}})}}else"JSON"===g.format?L(p.instance({isFloat:!0,
isFlipY:g.isFlipY,width:g.width,height:g.height,array:new Float32Array(g.data)})):L(!1)},Ed:d,u:function(){x&&(Ea.U(),p.qc(),Ea.T());p.Se();f.slice(0).forEach(function(g){g.remove()});f.splice(0);y=!1;h=0;"undefined"!==typeof Ia&&Ia.u();t=null}};return p}(),pa=function(){function a(h){var l={$:null,indices:null};l.$=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,l.$);h.bufferData(h.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),h.STATIC_DRAW);l.indices=h.createBuffer();h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,
l.indices);h.bufferData(h.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),h.STATIC_DRAW);return l}var c=null,d=0,e=!1,r=[],m=-2,n=-2,q={reset:function(){n=m=-2},D:function(){e||(c=a(b),q.Ua(),e=!0)},instance:function(h){var l=d++,t=h.indices?h.indices.length:0,x="undefined"===typeof h.mode?b.STATIC_DRAW:h.mode,D=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,D);b.bufferData(b.ARRAY_BUFFER,h.$ instanceof Float32Array?h.$:new Float32Array(h.$),x);m=l;var J=null,v=null,y=null;if(h.indices){J=b.createBuffer();
b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,J);var f=null;65536>h.indices.length?(f=Uint16Array,v=b.UNSIGNED_SHORT,y=2):(f=Uint32Array,v=b.UNSIGNED_INT,y=4);f=h.indices instanceof f?h.indices:new f(h.indices);b.bufferData(b.ELEMENT_ARRAY_BUFFER,f,x);n=l}var G={zd:function(F){m!==l&&(b.bindBuffer(b.ARRAY_BUFFER,D),m=l);F&&za.ic()},wd:function(){n!==l&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,J),n=l)},bind:function(F){G.zd(F);G.wd()},mf:function(){b.drawElements(b.TRIANGLES,t,v,0)},pf:function(F,k){b.drawElements(b.TRIANGLES,
F,v,k*y)},remove:function(){b.deleteBuffer(D);h.indices&&b.deleteBuffer(J);G=null}};r.push(G);return G},Ua:function(){-1!==m&&(b.bindBuffer(b.ARRAY_BUFFER,c.$),m=-1);-1!==n&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.indices),n=-1)},m:function(h,l){h&&pa.Ua();l&&za.Oa();b.drawElements(b.TRIANGLES,3,b.UNSIGNED_SHORT,0)},bb:function(h){h=h||b;var l=a(h);h.bindBuffer(h.ARRAY_BUFFER,l.$);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,l.indices);za.vb(h);h.clear(h.COLOR_BUFFER_BIT);h.drawElements(h.TRIANGLES,3,h.UNSIGNED_SHORT,
0);h.flush();h.bindBuffer(h.ARRAY_BUFFER,null);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null);h.deleteBuffer(l.$);h.deleteBuffer(l.indices);q.reset();e&&(q.Ua(),za.Oa())},Mc:function(){var h=b,l=c;h.deleteBuffer(l.$);h.deleteBuffer(l.indices)},u:function(){q.Mc();r.forEach(function(h){h.remove()});b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);q.reset();e=!1;r.splice(0);d=0}};return q}(),oa=function(){var a=null,c=null,d=null,e=!1,r=[],m={J:-2,Jc:1},n={jb:function(){return e},
D:function(){if(!e){a=b.createFramebuffer();var q=da.ea();c=q&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=q&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;e=!0}},Nf:function(){return c},Yd:function(){return d},fb:function(){return b.FRAMEBUFFER},Uf:function(){return m},Ef:function(){return a},instance:function(q){void 0===q.Sc&&(q.Sc=!1);var h=q.L?q.L:null,l=q.width,t=void 0!==q.height?q.height:q.width,x=a,D=null,J=!1,v=!1,y=0;h&&(l=l?l:h.K(),t=t?t:h.Z());var f={ld:function(){J||
(x=b.createFramebuffer(),J=!0,y=m.Jc++)},ud:function(){f.ld();f.v();D=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,D);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,l,t);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,D);b.clearDepth(1)},bind:function(G,F){y!==m.J&&(b.bindFramebuffer(c,x),m.J=y);h&&h.v();F&&b.viewport(0,0,l,t);G&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},Ye:function(){y!==m.J&&(b.bindFramebuffer(c,x),m.J=y)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|
b.DEPTH_BUFFER_BIT)},df:function(){b.clear(b.COLOR_BUFFER_BIT)},ef:function(){b.clear(b.DEPTH_BUFFER_BIT)},Pe:function(){b.viewport(0,0,l,t)},v:function(){y!==m.J&&(b.bindFramebuffer(c,x),m.J=y)},rtt:function(G){h=G;m.J!==y&&(b.bindFramebuffer(b.FRAMEBUFFER,x),m.J=y);G.v()},T:function(){b.bindFramebuffer(c,null);m.J=-1},resize:function(G,F){l=G;t=F;D&&(b.bindRenderbuffer(b.RENDERBUFFER,D),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,l,t))},remove:function(){x===a||v||(b.bindFramebuffer(c,
x),b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0),D&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null),b.bindFramebuffer(c,null),b.deleteFramebuffer(x),D&&b.deleteRenderbuffer(D));v=!0}};q.Sc&&f.ud();r.push(f);return f},T:function(){b.bindFramebuffer(c,null);m.J=-1},Te:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);da.md();m.J=-1},reset:function(){m.J=-2},U:function(){0!==m.J&&(b.bindFramebuffer(c,a),m.J=0)},clear:function(){da.md();
b.clear(b.COLOR_BUFFER_BIT)},u:function(){n.T();r.forEach(function(q){q.remove()});null!==a&&(b.deleteFramebuffer(a),a=null);n.reset();e=!1;r.splice(0);m.Jc=1}};return n}(),da=function(){function a(){q="undefined"===typeof qb?JEContext:qb;h=!0}function c(k,H){for(var E=0;E<k.length;++E){var B=H.getExtension(k[E]);if(B)return B}return null}function d(){null!==f.zb&&(clearTimeout(f.zb),f.zb=null);f.va=!1}function e(k){if(0===f.ma.length){f.na=b.PIXEL_PACK_BUFFER;f.ma.splice(0);f.gb.splice(0);for(var H=
0;H<f.Fa;++H)f.ma.push(b.createBuffer()),f.gb.push(-1);f.ba=0;f.Ub=0}b.bindBuffer(f.na,f.ma[f.ba]);k.byteLength!==f.gb[f.ba]&&(b.bufferData(f.na,k.byteLength,b.STREAM_READ),f.gb[f.ba]=k.byteLength);f.ag=!0}function r(){b.bindBuffer(f.na,null)}function m(){f.sa.forEach(function(k){b.deleteSync(k)});f.sa.splice(0)}function n(){f.ba=(f.ba+1)%f.Fa;++f.Ub}var q=null,h=!1,l={Tc:!1,lc:null,mc:null,Vc:!1,qe:!1,nc:null,Wc:!1,oc:null,Uc:!1,Db:null,ie:!1,Eb:null,je:!1},t=null,x={ca:!0,da:!0,Ib:!0,ed:!1},D=null,
J=!0,v=null,y=null,f={Fd:1,Fa:-1,ba:0,Ub:0,va:!1,ma:[],sa:[],gb:[],na:null,zb:null},G="undefined"===typeof window?{}:window,F={D:function(){if(h)return!0;F.reset();h||a();var k=b;if(!t.Tc){t.lc=F.Gc(k);G.GL_EXT_FLOAT=t.lc;t.Vc=t.lc?!0:!1;if(t.Vc||F.ea())t.mc=F.Hc(k),t.qe=t.mc?!0:!1,G.GL_EXT_FLOATLINEAR=t.mc;t.Tc=!0}if(!t.Uc){t.nc=F.ab(k);t.nc&&(t.Wc=!0,G.GL_EXT_HALFFLOAT=t.nc);if(t.Wc||F.ea())t.oc=F.Ic(k),G.GL_EXT_HALFFLOATLINEAR=t.oc;t.bg=t.oc?!0:!1;t.Uc=!0}t.Db=F.Ec(k);t.ie=t.Db?!0:!1;G.GL_EXT_COLORBUFFERFLOAT=
t.Db;t.Eb=F.Fc(k);t.je=t.Eb?!0:!1;G.GL_EXT_COLORBUFFERHALFFLOAT=t.Eb;oa.D();Pa.D();if(!F.Hd())return!1;pa.D();Pa.ge();return!0},reset:function(){t=Object.assign({},l);D=Object.assign({},x)},K:function(){h||a();return q.K()},Z:function(){h||a();return q.Z()},ea:function(){h||a();return q.ea()},Dc:function(k){F.Ec(k);F.Fc(k);F.Gc(k);F.Hc(k);F.ab(k);F.Ic(k)},Ec:c.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),Fc:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float",
"OES_color_buffer_half_float"]),Gc:c.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),Hc:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),ab:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),Ic:c.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),Kb:function(k){var H=F.ab(k);return H&&H.HALF_FLOAT_OES?
H.HALF_FLOAT_OES:k.HALF_FLOAT||k.FLOAT},Vd:function(){return y||b.RGBA32F||b.RGBA},Wd:function(){return v||b.RGBA16F||b.RGBA},Td:function(){return D},zc:function(){return D.ca},bf:function(){return D.da},af:function(){return D.Ib},Bd:function(){return D.ed&&J},Lg:function(k){J=k;!k&&f.va&&(m(),b.bindBuffer(f.na,null),f.va=!1)},hg:function(){return f.va},wb:function(k,H,E){function B(){k.bindTexture(k.TEXTURE_2D,null);k.bindFramebuffer(A,null);k.deleteTexture(u);k.deleteFramebuffer(S)}var A=k.FRAMEBUFFER,
I=k.NEAREST,S=k.createFramebuffer();k.bindFramebuffer(A,S);var u=k.createTexture();k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,u);k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,!1);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,I);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,I);k.texImage2D(k.TEXTURE_2D,0,H,3,3,0,k.RGBA,E,null);k.framebufferTexture2D(k.FRAMEBUFFER,
k.COLOR_ATTACHMENT0,k.TEXTURE_2D,u,0);if(k.checkFramebufferStatus(k.READ_FRAMEBUFFER||k.FRAMEBUFFER)!==k.FRAMEBUFFER_COMPLETE)return B(),!1;za.hc(k);k.clearColor(0,0,0,0);k.viewport(0,0,3,3);k.disable(k.DEPTH_TEST);k.clear(k.COLOR_BUFFER_BIT);pa.bb(k);k.bindFramebuffer(A,null);za.Na(k);k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,u);pa.bb(k);H=new Uint8Array(36);k.readPixels(0,0,3,3,k.RGBA,k.UNSIGNED_BYTE,H);B();for(E=0;36>E;++E)if(3!==E%4&&3<Math.abs(H[E]-127))return!1;return!0},Gb:function(k){var H=
{ca:!1,da:!1};k.disable(k.BLEND);k.clearColor(0,0,0,0);k.clear(k.COLOR_BUFFER_BIT);k.RGBA32F&&F.wb(k,k.RGBA32F,k.FLOAT)&&(H.ca=!0,y=k.RGBA32F);!H.ca&&F.wb(k,k.RGBA,k.FLOAT)&&(H.ca=!0,y=k.RGBA);var E=F.Kb(k);v=null;k.RGBA16F&&F.wb(k,k.RGBA16F,E)&&(H.da=!0,v=k.RGBA16F);!H.da&&F.wb(k,k.RGBA,E)&&(H.da=!0,v=k.RGBA);return H},Id:function(){var k=oa.instance({width:2});k.ld();var H=Pa.instance({width:2,isFloat:!0,mb:3});k.v();H.v();F.flush();b.checkFramebufferStatus(oa.Yd())!==b.FRAMEBUFFER_COMPLETE?(Pa.Ke(),
D.Ib=!1):D.Ib=!0;k.remove();H.remove()},Jd:function(){var k=!1;F.ea()&&(k="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(H){return"undefined"!==typeof b[H]}));D.ed=k},Hd:function(){var k=F.Gb(b);Object.assign(D,k);if(!D.ca&&!D.da)return!1;F.Id();F.Jd();return!0},Fe:function(k,H,E,B,A){b.readPixels(k,H,E,B,b.RGBA,b.UNSIGNED_BYTE,A);return Promise.resolve(A,!1)},dc:function(k,H,E,B,A,I,S){if(!F.Bd())return F.Fe(k,H,
E,B,A);f.Fa=S||f.Fd;e(A);b.readPixels(k,H,E,B,b.RGBA,b.UNSIGNED_BYTE,0);f.sa[f.ba]=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);F.flush();var u=!1;return new Promise(function(p,g){function L(){if(!f.va)return d(),r(),n(),g(),!1;var M=(f.ba+1)%f.Fa;switch(b.clientWaitSync(f.sa[M],0,0)){case b.TIMEOUT_EXPIRED:case b.WAIT_FAILED:break;default:return d(),b.deleteSync(f.sa[M]),f.sa[M]=null,b.bindBuffer(f.na,f.ma[M]),b.getBufferSubData(f.na,0,A),r(),n(),p(A,u),!0}f.zb=setTimeout(L,0);return!1}d();f.Ub+1<
f.Fa?(r(),n(),p(A,!1)):(f.va=!0,L()||!I||u||(u=!0,I()))})},md:function(){b.viewport(0,0,F.K(),F.Z())},flush:function(){b.flush()},u:function(){d();m();Pa.u();oa.u();pa.u();f.ma.forEach(function(k){b.deleteBuffer(k)});f.ma.splice(0);za.reset();h=!1}};return F}(),Y=pa,Ea=oa,aa=Pa,Ia=function(){function a(E,B,A,I){f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,I?f.NEAREST_MIPMAP_NEAREST:f.LINEAR);var S=null;if(null!==A)try{S=f.getError();if("FUCKING_BIG_ERROR"===S)return!1;f.texImage2D(f.TEXTURE_2D,
0,E,4,4,0,f.RGBA,B,A);S=f.getError();if(S!==f.NO_ERROR)return!1}catch(u){return!1}I&&f.generateMipmap(f.TEXTURE_2D);f.clear(f.COLOR_BUFFER_BIT);Y.bb(f);S=f.getError();if("FUCKING_BIG_ERROR"===S)return!1;f.readPixels(0,0,2,2,f.RGBA,f.UNSIGNED_BYTE,t);S=f.getError();S===f.INVALID_OPERATION&&"undefined"!==typeof f.PIXEL_PACK_BUFFER&&(f.bindBuffer(f.PIXEL_PACK_BUFFER,null),f.readPixels(0,0,2,2,f.RGBA,f.UNSIGNED_BYTE,t),S=f.getError());if(S!==f.NO_ERROR)return!1;A=!0;for(I=0;16>I;++I)A=A&&4>Math.abs(t[I]-
127);A&&(h.dd=B,h.Rc=E);return A}function c(E,B){return G.ca&&a(E,f.FLOAT,new Float32Array(x),B)?(q=n.uc,!0):!1}function d(E,B,A){if(!G.da)return!1;var I=Pa.Ed(x),S=da.ab(f);if(S&&S.HALF_FLOAT_OES&&a(E,S.HALF_FLOAT_OES,I,B)||f.HALF_FLOAT&&a(E,f.HALF_FLOAT,I,B))return q=n.za,!0;I=new Float32Array(x);if(a(E,f.FLOAT,I,B))return q=n.za,!0;f.bindTexture(f.TEXTURE_2D,A);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,2,2,0,f.RGBA,f.UNSIGNED_BYTE,null);f.bindFramebuffer(h.Za,H);Pa.Kc(f,A,2,2,I,!1,!1);f.bindFramebuffer(h.Za,
null);f.bindTexture(f.TEXTURE_2D,A);return a(E,null,null,B)?(q=n.za,!0):!1}function e(E,B,A){l=!0;if(d(E,!0,A)||c(B,!0))return!0;l=!1;return d(E,!1,A)||c(B,!1)?!0:!1}function r(E){if(q===n.P){f=E||b;q=n.RGBA8;l=!0;da.Dc(f);G||(G=da.Gb(f));Ea.reset();H=f.createFramebuffer();h.Za=f.DRAW_FRAMEBUFFER||f.FRAMEBUFFER;f.bindFramebuffer(h.Za,null);f.clearColor(0,0,0,0);f.viewport(0,0,2,2);z.P();F=z.Na(f);E=f.createTexture();f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,E);f.texParameteri(f.TEXTURE_2D,
f.TEXTURE_WRAP_S,f.REPEAT);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);k=E;var B=E=f.RGBA,A=f.RGBA16F,I=f.RGBA32F;I&&(E=I);A&&(B=A);if((A||I)&&e(B,E,k))return m(),!0;E=B=f.RGBA;if(e(B,E,k))return m(),!0;q=n.RGBA8;m();return!1}}function m(){f.deleteProgram(F.qa);f.deleteTexture(k);k=F=null}for(var n={P:-1,uc:3,za:2,RGBA8:0},q=n.P,h={dd:null,Rc:null,Za:null},l=!0,t=new Uint8Array(16),x=Array(64),D=0;4>D;++D)for(var J=0;4>J;++J){var v=
0===(J+D)%2?1:0,y=4*D+J;x[4*y]=v;x[4*y+1]=v;x[4*y+2]=v;x[4*y+3]=v}var f=null,G=null,F=null,k=null,H=null;return{Ad:function(E){r(E);return l},yc:function(E,B){q===n.P&&(typeof("undefined"!==B)&&(G=B),r(E));return q!==n.RGBA8},eg:function(E){r(E);return q===n.uc},re:function(E){r(E);return q===n.za},Of:function(E){r(E);return h.dd},Xd:function(E){r(E);return h.Rc},u:function(){f=null;l=!0;q=n.P;G=null}}}(),dc=function(){return{instance:function(a){var c=null,d=!1,e=!1,r=null,m=!1,n=!1,q=null,h="undefined"===
typeof a.preprocessing?!1:a.preprocessing,l="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(d=!0,SETTINGS&&void 0!==SETTINGS.vd&&(a.mask=SETTINGS.vd+a.mask),c=aa.instance({isFloat:!1,url:a.mask}));var t=!1;a.customInputShader&&(t="s46",z.vc({name:"_",id:t,g:a.customInputShader,Mg:["uSource"],precision:"lowp"}),z.N(t,[{type:"1i",name:"_",value:0}]));switch(h){case "sobel":q="s33";m=!0;break;case "meanNormalization":q="s34";m=!0;break;case "grayScale":q="s30";m=!1;break;
case "grayScaleTilt":q="s31";n=!0;m=!1;break;case "rgbGrayTilt":q="s32";n=!0;m=!1;break;case "copy":q=t?t:"s0";break;case "inputLightRegulation":q=t?t:"s30";r=mc.instance({Qc:l,cd:a.size,Yc:a.nBlurPass,V:!1});e=!0;break;case "inputMix0":q="none";r=nc.instance({A:l,ia:a.varianceMin,aa:a.blurKernelSizePx,gain:a.gain||1,V:!1});e=!0;break;case "inputMix1":q="none";r=oc.instance({A:l,ia:a.varianceMin,aa:a.blurKernelSizePx,gain:a.gain||1,V:!1});e=!0;break;case "inputCut4":q="none";r=pc.instance({A:l,ia:a.varianceMin,
aa:a.blurKernelSizePx,gain:a.gain||1,Ia:a.isNormalized||!1,cc:a.overlap||0,V:!1});l*=r.Zd();e=!0;break;case "direct":case "none":q="abort";break;default:q="s4"}l=Math.ceil(l);n&&z.N(q,[{name:"u27",type:"1f",value:a.tilt}]);d&&(q+="Mask");var x=aa.instance({isFloat:!1,isPot:!1,width:a.size}),D={K:function(){return a.size},$d:function(){return l},Lb:function(){return D.K()},de:function(){return e?r.Ha():x},M:function(J){Ea.U();"abort"!==q&&("none"!==q&&(z.set(q),m&&z.X("u28",1/a.size),x.W(),d&&c.i(1),
Y.m(!1,!1),x.i(0),J=x),e&&r.process(J))},u:function(){x.remove();d&&c.remove()}};return D}}}(),ec=function(){return{instance:function(a){function c(B){r.forEach(function(A,I){m[I][0]=B[0][A];m[I][1]=B[1][A];m[I][2]=B[2][A];m[I][3]=B[3][A]});return m}a.normalize=a.normalize||!1;var d={input:null,bias:null,Qb:null,wa:null,ac:null,Zb:null,$b:null},e=null,r=[],m=[],n=!1,q=null,h=!0,l=-1,t=a.isReorganize?a.isReorganize:!1,x=a.kernelsCount?!0:!1,D=["s27","s28","s29"][a.shiftRGBAMode||0],J={isEnabled:!1};
a.pe?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.sb.Lb(),h=!1):"full"===a.connectivityUp&&(a.sparsity=a.sb.Lb());var v={elu:"s16",elu01:"s17",relu:"s15",arctan:"s18",arctan2:"s19",sigmoid:"s14",copy:"s0"}[a.activation],y=a.sparsity*a.sparsity,f=!1,G=a.size,F="";if(a.maxPooling){switch(a.maxPooling.size){case 2:F="s35";break;case 4:F="s36"}f=!0;G/=a.maxPooling.size;d.Zb=aa.instance({isFloat:!0,isPot:!1,width:G})}var k=-1,H=null;h&&(d.wa=aa.instance({isFloat:!0,isPot:!1,width:a.size}));
d.bias=aa.instance(a.bias);var E={K:function(){return a.size},Lb:function(){return G},Nc:function(){return a.classesCount},xd:function(B){e.i(B)},ye:function(){a.remap&&a.remap.isEnabled&&(J={isEnabled:!0,te:aa.instance(a.remap.maskTexture),kb:a.remap.layers.map(function(B){return a.parent.be(B)}),depth:a.remap.depth})},Le:function(){switch(a.connectivityUp){case "direct":H=qc.instance(a.connectivity);break;case "square":H=rc.instance(a.connectivity);break;case "squareFast":H=sc.instance(a.connectivity,
a.activation);break;case "full":H=tc.instance(a.connectivity);break;case "conv":l=a.kernelsCount,H=uc.instance(a.connectivity),t&&(d.ac=aa.instance({width:G,isFloat:!0,isFlipY:!1,isPot:!1}))}if(H.xa){var B=a.size*a.sparsity;k=Math.log(B/a.size)/Math.log(2);d.input=aa.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:B,Sb:k});d.Qb=aa.instance({isFloat:!0,isPot:!0,width:a.size})}},M:function(B,A){e=B;H.xa?(d.input.W(),x&&d.bias.i(2),H.M(J),d.input.i(0),d.input.Rd(k),d.Qb.W(),x?z.set("s0"):(z.set(D),z.X("u4",
y),d.bias.i(1)),d.input.yd(k,0),Y.m(!1,!1),z.set(v),d.wa.v(),d.Qb.i(0),Y.m(!1,!1)):(d.wa.W(),d.bias.i(1),H.M());if(h)return A=d.wa,f&&(d.Zb.W(),A.i(0),z.set(F),z.S("u10",1/a.size,1/a.size),Y.m(!1,!1),A=d.Zb),t&&(d.ac.v(),z.set("s21"),z.S("u14",l,G/l),A.i(0),Y.m(!1,!1),A=d.ac),A.i(0),A;var I=d.wa;a.normalize&&(B=I,z.set("gpuRawAvg"===n?"s9":"s8"),z.X("u6",1/a.size),d.$b.W(),B.i(0),Y.m(!1,!1),I=d.$b);B=null;switch(n){case "cpuRGBA2Float":I.Cc(!1);A?B=E.Ae(I).then(q):(I=E.Be(I),q(I));break;case "cpuMeanFloat":I.Cc(!0);
if(A)B=I.De().then(q);else{I=I.Ee();for(var S=0;S<I.length;++S);q(I)}break;case "gpuRawAvg":case "gpuRaw":I.i(0);case "none":null!==q&&q(I)}A&&null===B&&(B=Promise.resolve());return B},Gd:function(B){var A=!1;B&&(n=B.bc||"none",q=B.Yb||null,A=B.ad?!0:!1);d.wa=aa.instance({isFloat:!0,isPot:!0,isLinear:A,isMipmap:!1,width:a.size});B="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var I=A=0,S=0;A<B;++A)r.push(I+(a.size-1-S)*a.size),m.push([-1,-1,-1,-1]),++I,I===a.size&&
(I=0,++S);a.normalize&&(d.$b=aa.instance({isFloat:!0,isPot:!0,width:a.size}))},Ae:function(B){return B.Ce().then(c)},Be:function(B){B=B.fd();c(B);return m},u:function(){for(var B in d){var A=d[B];A&&A.remove()}H&&(H.u(),H=null)}};a.sb&&E.Le(a.sb);return E}}}(),qc=function(){return{instance:function(a){var c=aa.instance(a.weights);return{xa:!0,eb:function(){return 1},u:function(){c.remove()},fe:function(){return c},M:function(){z.set("s26");c.i(1);Y.m(!1,!1)}}}}}(),tc=function(){return{instance:function(a){var c=
a.fromLayerSize,d=aa.instance(a.weights);return{xa:!0,eb:function(){return c},u:function(){d.remove()},M:function(e){if(e.isEnabled){z.set("s24");e.te.i(3);for(var r=Math.min(e.kb.length,e.depth),m=0;m<r;++m)e.kb[m].xd(4+m)}else z.set("s23");z.X("u18",a.toLayerSize);z.X("u19",a.fromLayerSize);d.i(1);Y.m(!1,!1)}}}}}(),rc=function(){return{instance:function(a){for(var c=a.fromLayerSize,d=a.toLayerSize,e=a.toSparsity,r=e*d,m=r/c,n=c/d,q=0,h=0,l=0,t=Array(e*d*e*d*4),x=Array(e*d*e*d*4),D=Array(c*c),J=
0;J<D.length;++J)D[J]=0;J=Math.floor(e/2);for(var v=.5/d,y=.5/c,f=.5/r,G=0;G<d;++G)for(var F=Math.round(G*n),k=0;k<d;++k){var H=Math.round(k*n),E=G/d,B=k/d;E+=v;B+=v;for(var A=0;A<e;++A){var I=F+A-J;0>I&&(I+=c);I>=c&&(I-=c);for(var S=0;S<e;++S){var u=q/r,p=h/r,g=H+S-J;0>g&&(g+=c);g>=c&&(g-=c);var L=I/c,M=g/c;p=1-p-1/r;L+=y;M+=y;u+=f;p+=f;var O=G*e+A,ba=k*e+S;ba=d*e-ba-1;O=ba*d*e+O;t[4*O]=u;t[4*O+1]=p;t[4*O+2]=L;t[4*O+3]=M;M=D[g*c+I]++;O=M%m;L=I*m+O;g=g*m+(M-O)/m;g=c*m-1-g;g=g*c*m+L;x[4*g]=u;x[4*g+
1]=p;x[4*g+2]=E;x[4*g+3]=B;++q>=r&&(q=0,++h);++l}}}D=null;var Aa=aa.instance(a.weights);delete a.weights.data;var Ba=aa.instance({width:r,isFloat:!0,array:new Float32Array(x),isPot:!0});x=null;var Ja=aa.instance({width:r,isFloat:!0,array:new Float32Array(t),isPot:!0});t=null;return{xa:!0,eb:function(){return m},u:function(){Ba.remove();Ja.remove();Aa.remove()},M:function(){z.set("s22");Aa.i(1);Ja.i(2);Y.m(!1,!1)}}}}}(),uc=function(){return{instance:function(a){var c=a.kernelsCount,d=a.toSparsity,
e=d*a.toLayerSize/a.fromLayerSize,r=a.inputScale||[1,1],m=aa.instance(a.weights);return{xa:!0,eb:function(){return e},Xf:function(){return d},fe:function(){return m},u:function(){m.remove()},M:function(){z.set("s25");z.Ne("u26",r);z.X("u24",c);z.X("u25",d);z.X("u18",a.toLayerSize);z.X("u19",a.fromLayerSize);m.i(1);Y.m(!1,!1)}}}}}(),sc=function(){return{instance:function(a,c){var d=a.fromLayerSize,e=a.toLayerSize,r=a.toSparsity,m=a.stride?a.stride:1,n=r*e/d,q=e<d,h=d/e,l=aa.instance(a.weights),t="s47"+
[d.toString(),e.toString(),r.toString(),m.toString(),c].join("_");z.Qd(t)||(a=kc.Sd(c,"gl_FragColor","gl_FragColor"),e=[{type:"1f",name:"u18",value:e},{type:"1f",name:"u30",value:m}],q&&e.push({type:"1f",name:"u19",value:d}),d=[(q?n:r).toFixed(1),a],q&&d.push(h.toFixed(1)),z.he(q?"s41":"s40",t,d),z.N(t,e.concat([{type:"1i",name:"u16",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u15",value:3}])));return{xa:!1,eb:function(){return n},u:function(){l.remove()},M:function(){z.set(t);l.i(3);
Y.m(!1,!1)}}}}}(),mc=function(){return{instance:function(a){var c=a.Yc?a.Yc:3,d=a.Qc?a.Qc:64,e=a.cd?a.cd:64,r=a.V?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var m=aa.instance(a),n=aa.instance(a),q=aa.instance(a),h=aa.instance(a),l=aa.instance({isFloat:!0,width:e,isPot:!1,isFlipY:!1}),t=1/d;return{process:function(x){z.set("s37");h.v();Y.m(r,!1);z.set("s38");for(var D=0;D<c;++D)m.v(),z.S("u10",t,0),Y.m(r,!1),q.v(),h.i(0),Y.m(r,!1),n.v(),m.i(0),z.S("u10",0,t),Y.m(r,!1),h.v(),q.i(0),Y.m(r,!1),
D!==c-1&&n.i(0);z.set("s39");l.v();x.i(0);n.i(1);h.i(2);Y.m(r,!1);l.i(0)},Ha:function(){return l}}}}}(),nc=function(){return{instance:function(a){function c(t){return aa.instance({isFloat:t,width:d.A,isPot:!1,isFlipY:!1})}var d=Object.assign({ia:.1,aa:9,A:128,gain:1,V:!1},a),e=c(!1),r=[c(!1),c(!1),c(!1)],m=[c(!1),c(!1),c(!1)],n=c(!0),q=[e,m[0],m[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u31;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u31*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.aa-1)/2).toFixed(2)).replace("2.2222",(1/d.A).toFixed(6));var h="uniform sampler2D u32,u33,u34,u35;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u32,vv0).rgb;float c=texture2D(u33,vv0).r,d=texture2D(u34,vv0).r,i=texture2D(u35,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.ia.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),l={u1:0};z.Ta([{id:"s49",
name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",l:l,j:["u1"],precision:"lowp"},{id:"s50",name:"_",g:a,l:l,j:["u1","u31"],precision:"lowp"},{id:"s51",name:"_",g:h,l:{u32:0,u33:1,u34:2,u35:3},j:["u32","u33","u34","u35"],precision:"highp"}]);return{process:function(){z.set("s49");e.W();Y.m(d.V,!1);z.set("s50");for(var t=0;3>t;++t)z.S("u31",1,0),r[t].v(),q[t].i(0),
Y.m(!1,!1),z.S("u31",0,1),m[t].v(),r[t].i(0),Y.m(!1,!1);z.set("s51");n.v();e.i(0);m[0].i(1);m[1].i(2);m[2].i(3);Y.m(!1,!1);n.i(0)},Ha:function(){return n}}}}}(),oc=function(){return{instance:function(a){function c(l){return aa.instance({isFloat:l,width:d.A,isPot:!1,isFlipY:!1})}var d=Object.assign({ia:.1,aa:9,A:128,gain:1,V:!1},a),e=c(!1),r=c(!1),m=c(!1),n=c(!0);a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u31;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u31*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((d.aa-1)/2).toFixed(2)).replace("2.2222",(1/d.A).toFixed(6));var q="uniform sampler2D u0,u36;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u36,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",d.ia.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),h={u1:0};z.Ta([{id:"s52",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",
l:h,j:["u1"],precision:"lowp"},{id:"s53",name:"_",g:a,l:h,j:["u1","u31"],precision:"lowp"},{id:"s54",name:"_",g:q,l:{u0:0,u36:1},j:["u0","u36"],precision:"highp"}]);return{process:function(){z.set("s52");e.W();Y.m(d.V,!1);z.set("s53");z.S("u31",1,0);r.v();e.i(0);Y.m(!1,!1);z.S("u31",0,1);m.v();r.i(0);Y.m(!1,!1);z.set("s54");n.v();e.i(0);m.i(1);Y.m(!1,!1);n.i(0)},Ha:function(){return n}}}}}(),pc=function(){return{instance:function(a){function c(t){return aa.instance({isFloat:t,width:d.A,isPot:!1,isFlipY:!1})}
var d=Object.assign({ia:.1,aa:9,A:128,gain:1,cc:0,Ia:!1,V:!1},a),e=c(!1),r=null,m=null,n=null;d.Ia&&(r=c(!1),m=c(!1),n=c(!0));a={u1:0};var q=[{id:"s55",name:"_",g:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",
d.cc.toFixed(4)),l:a,j:["u1"],precision:"lowp"}];if(d.Ia){var h="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u31;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u31*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",Math.round((d.aa-1)/2).toFixed(2)).replace("2.2222",(1/d.A).toFixed(6)),l="uniform sampler2D u0,u36;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u36,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",
d.ia.toFixed(4)).replace("2.2222",d.gain.toFixed(4));q.push({id:"s56",name:"_",g:h,l:a,j:["u1","u31"],precision:"lowp"},{id:"s57",name:"_",g:l,l:{u0:0,u36:1},j:["u0","u36"],precision:"highp"})}z.Ta(q);return{process:function(){z.set("s55");e.W();Y.m(d.V,!1);d.Ia?(z.set("s56"),z.S("u31",1,0),r.v(),e.i(0),Y.m(!1,!1),z.S("u31",0,1),m.v(),r.i(0),Y.m(!1,!1),z.set("s57"),n.v(),e.i(0),m.i(1),Y.m(!1,!1),n.i(0)):e.i(0)},Zd:function(){return 2-d.cc},Ha:function(){return d.Ia?n:e}}}}}(),Cb=function(){function a(y,
f,G,F,k,H,E){if(!J)if(E===H.length)k();else{switch(H[E]){case "A":G();break;case "D":y();break;case "S":f().then(function(B,A){v.od();a(y,f,G,A?null:F,k,H,++E)}).catch(function(B){console.log("An error occurred in the WebAR loop: ",B);k()});return;case "R":F&&F()}a(y,f,G,F,k,H,++E)}}var c={n:5,Tb:1,se:0,cb:[35,49],$a:[2,200],k:.7,Ue:200,we:.05},d=-1,e=null,r=-1,m=-1,n=0,q=-1,h=-1,l=0,t=0,x=c.$a[1],D=Math.log(2),J=!0,v={ce:function(){switch(d){case -1:return-1;case 0:return h+e.se;case 1:return l}},
Gf:function(y){return Math.pow(Math.min(Math.max(q,0),e.n-1)/(e.n-1),y||1)},D:function(y){e=Object.assign({},c,y);q=h=e.Tb;d=0;v.reset()},od:function(y){y=("undefined"===typeof y?Date.now():y)||0;var f=Math.min(Math.max(y-t,e.$a[0]),e.$a[1]);x=f;t=y;var G=-1===r?0:e.k;r=Math.min(Math.max(1E3/f,5),120)*(1-G)+r*G;y-m>e.Ue&&5<++n&&(f=e.k,q=q*(1-f)+(r<e.cb[0]?h-1:r>e.cb[1]?h+1:h)*f,Math.abs(q-h)>1-e.we&&(f=Math.min(Math.max(Math.round(q),0),e.n-1),f!==h&&(q=h=f,r=(e.cb[1]-e.cb[0])/2)),m=y)},wg:function(y,
f,G,F,k,H){J=!1;a(y,f,G,F,k,H,0)},stop:function(){J=!0},zg:function(y){l=y;d=1},Og:function(){d=0;v.reset()},reset:function(){x=c.$a[1];m=r=-1;n=0},Kg:function(y,f,G){G=Math.exp(-D*x/G);return(1-G)*y+G*f},Lf:function(){return x}};return v}(),Mb=function(){function a(x,D){var J=x[0]-.5;x=x[1]-.5;var v=D[0]-.5;D=D[1]-.5;return J*J+x*x-(v*v+D*D)}var c={Zc:4,rb:[1.5,1.5,2],G:[.1,.1,.1],jd:1,A:-1,R:-1,Qe:2,bd:1,fc:!0,Md:.8},d=null,e=[],r=[],m=[],n=[0],q=[.5,.5,1],h=null,l=0,t=[0,0,0];return{D:function(x){d=
Object.assign({},c,x);e.splice(0);r.splice(0);m.splice(0);l=0;x=d.rb[0]*d.G[0];var D=d.rb[1]*d.G[1],J=1/(1+d.rb[2]*d.G[2]),v=d.jd*Math.min(d.A,d.R),y=v/d.A;v/=d.R;var f=.5*d.Md;f*=f;for(var G=0;G<d.Zc;++G){var F=[];r.push(F);var k=Math.pow(J,G),H=y*k,E=v*k;k=H*d.bd;m.push(k);var B=H*x,A=E*D;H/=2;E/=2;for(var I=1+(1-H-H)/B,S=1+(1-E-E)/A,u=0;u<S;++u)for(var p=E+u*A,g=p-.5,L=0;L<I;++L){var M=H+L*B,O=M-.5;O*O+g*g>f||(M=[M,p,k],e.push(M),F.push(M))}d.fc&&F.sort(a);h=e}d.fc&&e.sort(a)},get:function(x){var D=
h.length;if(0===D)return q;for(;x>=n.length;)n.push(0);n[x]>=D&&(n[x]=0);var J=h[Math.floor(n[x])%D];n[x]=(n[x]+1/d.Qe)%D;if(0===l)return J;t[0]=J[0];t[1]=J[1];t[2]=l;return t},qg:function(x){x>=n.length||(n[x]=Math.floor(Math.random()*h.length))},Ag:function(x){l=x;if(0===l)h=e;else{for(var D=m.length,J=D-1,v=0;v<D;++v)if(m[v]<=x){J=v;break}h=r[J]}},reset:function(){for(var x=e.length/n.length,D=0;D<n.length;++D)n[D]=Math.floor(D*x);l=0;h=e}}}(),fa={Va:512,G:[.05,.05,.15],He:{nScaleLevels:3,scale0Factor:.8,
scaleFactor:1,overlapFactors:[2,2,3],scanCenterFirst:!0,scaleXRange:[1/15,.9],lockStabilizeEnabled:!0,rawNNOutputTranslationScalingOffsets:[0,0,0],lockStabilizeDxysRanges:[[.5,1],[.5,1],[.5,1]]},ue:3,pc:.68,qb:10,lb:.03,pa:8,xb:-.02,Wa:.02,Pa:.7,ob:20,Xa:.3,Ra:[.02,10],pb:[1,6],ve:3},ua=Object.create(fa.He),Ab=0,Nb=0,Xa=0,Bb=!1,U={width:-1,Rb:!0,Ja:!1,ib:!1,hd:null,kc:!1,pitchRange:null,G:fa.G},va={sc:0,pitch:0,ec:0,Wb:!0},Sa=null,wa=null,ab=!1,Va=!1,Ga=0,db=null,K=null,vc={aspectRatio:1,Pb:1,ta:[1,
1],A:0,R:0,ha:0,ga:0,Ga:"s58",I:{Da:[0,0],scale:[1,1]}},V={L:null,o:[0,0,0,0]},ia={ka:-2,LOADING:-1,Aa:0,Ab:1,tc:2,Sa:3},qa=ia.ka,Za={ka:-2,LOADING:1,IDLE:0},fb=Za.ka,Ha=null;var Ob=ea=0;var eb=-1;var Z={n:0,$c:0,Vb:0,H:-1,Y:[0,0]},$a={video:0,sd:1},Na={undefined:0,video:1,Ac:2,Hb:3},Q=null,wc={current:$a.video,element:null,L:null,ua:!1,type:Na.undefined,time:-1,ra:null},Wb=!1,ha={distance:0,label:!1,positionScale:[0,0,0,0],detectScore:0,yaw:0,pitch:0,roll:0,NNInputWidth:-1},yb=1,ic={cutShader:null,
thresholdDetectFactor:1,thresholdDetectFactorUnstitch:1,isSkipConfirmation:!1,isKeepTracking:!1,trackingFactors:[2,2,2],secondNeighborFactor:fa.Pa,nLocateAutomoves:fa.qb,locateMoveNoiseAmplitude:fa.lb,nConfirmAutoMoves:fa.pa,nConfirmUnstitchMoves:fa.ob,confirmMoveNoiseAmplitude:fa.Wa,thresholdConfirmOffset:fa.xb,tiltPosAngleIfAmbiguousDetection:fa.Ra,confirmScoreMinFactorDuringAutoMove:fa.Xa},na={},W={yb:1,nd:1,La:!1,hb:!1,pd:null,Pa:fa.Pa,qb:-1,lb:-1,pa:-1,xb:-1,Wa:-1,ob:-1,Ra:null,Xa:-1},Qb=[{type:"1f",
name:"u37",value:0}],ob={VERSION:"1.3.7",init:function(a){function c(d){a.callbackReady&&a.callbackReady(d)}if(qa!==ia.ka)return c("ALREADY_INITIALIZED");qa=ia.LOADING;K=Object.assign({},vc);Q=Object.assign({},wc);if("undefined"!==typeof a.canvas)wa=a.canvas,ab=!1;else if("undefined"===typeof a.canvasId)wa=document.createElement("canvas"),ab=!1;else{wa=document.getElementById(a.canvasId);if(!wa)return c("INVALID_CANVASID"),!1;ab=!0}"undefined"!==typeof a.isDebugRender&&(ab=a.isDebugRender);ab&&(wa.style.display=
"block");a.scanSettings&&Object.assign(ua,a.scanSettings);a.canvasSize&&(fa.Va=a.canvasSize);Cb.D({n:fa.pb[1]-fa.pb[0]+1,Tb:fa.ve-fa.pb[0]});Va="undefined"===typeof a.followZRot?!1:a.followZRot;db="undefined"===typeof a.ZRotRange?null:a.ZRotRange;Wb="undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope;-1!==fa.Va&&(wa.width=fa.Va,wa.height=fa.Va);ob.set_source(a.video,a.videoCrop);if(!qb.D({Ya:wa,width:wa.width,height:wa.height,debug:!1,Xb:c.bind(null,
"GLCONTEXT_LOST"),premultipliedAlpha:!1}))return c("GL_INCOMPATIBLE"),!1;Q.current===$a.video&&(Rb(Q.element),Ya());hc();wb();qa=ia.Aa;c(!1);return!0},set_source:function(a,c){"undefined"!==typeof a&&a?(Q.element=a,Q.current=$a.video,Q.element.isFakeVideo?(K.ha=Q.element.videoWidth,K.ga=Q.element.videoHeight,Q.type=Na.Hb):"VIDEO"===a.tagName?(K.ha=Q.element.videoWidth,K.ga=Q.element.videoHeight,Q.type=Na.video):(K.ha=Q.element.width,K.ga=Q.element.height,Q.type=Na.Ac),Jb(c)):Q.current=$a.sd;-1===
[ia.ka,ia.LOADING].indexOf(qa)&&(Q.ra&&Q.ra.F&&(Q.ra.F=a),Ya(),wb(),Q.type===Na.Ac&&Q.L.refresh())},set_NN:function(a,c,d){if(fb===Za.LOADING)c&&c("NN_LOADING");else{var e=function(r){fb=Za.IDLE;c&&c(r)};fb=Za.LOADING;"string"===typeof a?pb.get(a,function(r){if(!r)return e("INVALID_NN");var m=null;try{m=JSON.parse(r)}catch(n){return e("INVALID_NN")}Sb(m,e,d)},function(){e("NOTFOUND_NN")}):Sb(a,e,d)}},reset_state:function(){Pb();qa=ia.Aa},destroy:function(){ob.reset_state();Sa&&Sa.u();qb.u();fb=Za.ka;
qa=ia.ka;return Promise.resolve()},detect_async:function(a,c,d){var e,r;return cc(new Ib(new mb(function(m){switch(m.fa){case 1:e=Tb(a,c,d);if(-1===e)return m.return(ha);r=0;case 2:if(!(r<e)){m.fa=4;break}Ub(r,e);var n=Sa.xe(V.L);m.fa=5;return{value:n};case 5:Ea.U();++r;m.fa=2;break;case 4:return m.return(Vb())}})))},detect:function(a,c,d){a=Tb(a,c,d);if(-1===a)return ha;for(c=0;c<a;++c)Ub(c,a),Sa.M(V.L),Ea.U();return Vb()},get_aspectRatio:function(){return K.A/K.R},set_scanSettings:function(a){Object.assign(ua,
a);Ya()},set_videoCrop:function(a){Jb(a);wb();Ya()}};return ob}();
if(typeof(module)!=='undefined'){module.exports=WEBARROCKSOBJECT;}
