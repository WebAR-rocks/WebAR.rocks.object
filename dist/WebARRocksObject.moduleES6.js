/**
 * WebAR.rocks.object
 *
 * Copyright (c) 2020 WebAR.rocks ( https://webar.rocks )
 * This code is released under dual licensing:
 *   - GPLv3 
 *   - Nominative commercial license
 * Please read https://github.com/WebAR-rocks/WebAR.rocks.object/blob/master/LICENSE
 * 
*//* eslint-enable */
/* prettier-ignore */
function cb(){this.Ga=!1;this.ha=null;this.rd=void 0;this.ca=1;this.Jc=this.Ad=0;this.za=null}function lb(N){if(N.Ga)throw new TypeError("Generator is already running");N.Ga=!0}cb.prototype.Ia=function(N){this.rd=N};cb.prototype.Ma=function(N){this.za={Nd:N,he:!0};this.ca=this.Ad||this.Jc};cb.prototype.return=function(N){this.za={return:N};this.ca=this.Jc};function mb(N){this.s=new cb;this.ve=N}
mb.prototype.Ia=function(N){lb(this.s);if(this.s.ha)return ub(this,this.s.ha.next,N,this.s.Ia);this.s.Ia(N);return vb(this)};function Hb(N,ea){lb(N.s);var sa=N.s.ha;if(sa)return ub(N,"return"in sa?sa["return"]:function(ta){return{value:ta,done:!0}},ea,N.s.return);N.s.return(ea);return vb(N)}mb.prototype.Ma=function(N){lb(this.s);if(this.s.ha)return ub(this,this.s.ha["throw"],N,this.s.Ia);this.s.Ma(N);return vb(this)};
function ub(N,ea,sa,ta){try{var Da=ea.call(N.s.ha,sa);if(!(Da instanceof Object))throw new TypeError("Iterator result "+Da+" is not an object");if(!Da.done)return N.s.Ga=!1,Da;var La=Da.value}catch(Qa){return N.s.ha=null,N.s.Ma(Qa),vb(N)}N.s.ha=null;ta.call(N.s,La);return vb(N)}
function vb(N){for(;N.s.ca;)try{var ea=N.ve(N.s);if(ea)return N.s.Ga=!1,{value:ea.value,done:!1}}catch(sa){N.s.rd=void 0,N.s.Ma(sa)}N.s.Ga=!1;if(N.s.za){ea=N.s.za;N.s.za=null;if(ea.he)throw ea.Nd;return{value:ea.return,done:!0}}return{value:void 0,done:!0}}function Ib(N){this.next=function(ea){return N.Ia(ea)};this.throw=function(ea){return N.Ma(ea)};this.return=function(ea){return Hb(N,ea)};this[Symbol.iterator]=function(){return this}}
function bc(N){function ea(ta){return N.next(ta)}function sa(ta){return N.throw(ta)}return new Promise(function(ta,Da){function La(Qa){Qa.done?ta(Qa.value):Promise.resolve(Qa.value).then(ea,sa).then(La,Da)}La(N.next())})}
const WEBARROCKSOBJECT=function(){function N(a){var c=null,d=null,e=null,m=0,p=this;this.C=function(r){this.Fe(r.gb);e.Ed({Zb:r.Zb,Wb:r.Wb})};this.Yd=function(r){return c[r]};this.Fe=function(r){var q=null;m=r.length;c=r.map(function(h,l){h=Object.assign({},h,{index:l,parent:p,pb:q,ke:l===m-1});return q=l=0===l?cc.instance(h):dc.instance(h)});d=c[0];e=c[m-1];c.forEach(function(h,l){0!==l&&h.ue()})};this.N=function(r){r.j(0);var q=r;c.forEach(function(h){q=h.N(q,!1)});return q};this.te=function(r){var q,
h,l;return bc(new Ib(new mb(function(v){r.j(0);q=r;for(h=0;h<m-1;++h)l=c[h],q=l.N(q,!1);var x=c[m-1].N(q,!0);v.ca=0;return{value:x}})))};this.Xd=function(){return d.G()};this.ae=function(){return e.G()};this.Jb=function(){return e.$d()};this.Lc=function(){return e.Lc()};this.u=function(){c&&(c.forEach(function(r){r.u()}),e=d=c=null,m=0)};"undefined"!==typeof a&&this.C(a)}var ea;function sa(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}function ta(a,c,d){var e=1,m=0;for(d=c+d-1;d>=c;--d)m+=e*sa(a,d),e*=
2;return m}function Da(a){a=a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var c=a.length,d=new Uint8Array(c),e=0;e<c;++e)d[e]=a.charCodeAt(e);return d}function La(a){return"string"===typeof a?JSON.parse(a):a}function Qa(a){if("undefined"===typeof La(a).nb){var c=La(a);a=c.ne;var d=c.nf,e=c.n;c=Da(c);for(var m=new Float32Array(e),p=new Float32Array(d),r=a+d+1,q=0;q<e;++q){var h=r*q,l=0===sa(c,h)?1:-1,v=ta(c,h+1,a);h=h+1+a;for(var x=p.length,B=0,t=h;t<h+x;++t)p[B]=
sa(c,t,!0),++B;for(x=h=0;x<d;++x)h+=p[x]*Math.pow(2,-x-1);m[q]=0===h&&0===v?0:l*(1+h)*Math.pow(2,1+v-Math.pow(2,a-1))}a=m}else if(e=La(a),a=e.nb,0===a)a=new Uint8Array(e.nb);else{d=e.n;e=Da(e);c=new Uint32Array(d);for(m=0;m<d;++m)c[m]=ta(e,m*a,a);a=c}return a}function Jb(a){if(a){var c=a.w,d=a.h;K.J.Ba[0]=-1+2*(a.x+c/2)/K.ga;K.J.Ba[1]=-1+2*(a.y+d/2)/K.fa;K.J.scale[0]=c/K.ga;K.J.scale[1]=d/K.fa}else K.J.Ba[0]=0,K.J.Ba[1]=0,K.J.scale[0]=1,K.J.scale[1]=1;K.I=K.ga*K.J.scale[0];K.S=K.fa*K.J.scale[1]}function wb(){var a=
[{type:"2f",name:"u37",value:K.J.Ba},{type:"2f",name:"u38",value:K.J.scale}],c=a.concat([{type:"1f",name:"u39",value:K.ga/K.fa}]);E.O("s52",c);E.O("s53",c.concat([{name:"u10",type:"2f",value:[1/K.ga,1/K.fa]}]));E.O("s54",a)}function Ra(a,c,d){var e=ua.rawNNOutputTranslationScalingOffsets,m=-e[0]+Ma(a,c,"dx")*K.sa[0],p=-e[1]+Ma(a,c,"dy")*K.sa[1];a=-e[2]+d[2]*Ma(a,c,"ds");if(Va){c=Math.cos(Ga);e=Math.sin(Ga);var r=-e*m+c*p;m=c*m+e*p;p=r}m*=d[0];p*=d[1];d=V.m[2];c=V.m[3];V.m[0]-=m*d*U.F[0];V.m[1]-=p*
c*U.F[1];V.m[2]-=a*d*U.F[2];V.m[2]=ra.Ca(V.m[2],ua.scaleXRange[0]*K.sa[0],ua.scaleXRange[1]*K.sa[0]);V.m[0]=ra.Ca(V.m[0],0,1);V.m[3]=V.m[2]*K.aspectRatio/K.Nb;V.m[1]=ra.Ca(V.m[1],0,1)}function xb(a){var c=V.m[2],d=V.m[3],e=(2*Math.random()-1)*a,m=.5*(2*Math.random()-1)*a;V.m[0]+=(2*Math.random()-1)*a*c;V.m[1]+=e*d;V.m[2]+=m*c;V.m[3]=V.m[2]*K.aspectRatio/K.Nb}function Ma(a,c,d){c=Ha[c].Vc[d];return(a[c][0]+a[c][1]+a[c][2]+a[c][3])/4}function Kb(a,c){if(U.Pb){if(U.fc){var d=Ma(a,c,"yaw");a=-Ma(a,c,
"notHere");return Math.atan2(ra.Ca(a,-1,1),ra.Ca(d,-1,1))}return Math.PI*Ma(a,c,"yaw")}return 0}function Lb(a,c,d,e){c=Ha[c].Vc[d];return(a[c][0]+a[c][1]+a[c][2]+a[c][3])/4*(1-e)+e*Math.min(a[c][0],a[c][1],a[c][2],a[c][3])}function nb(a,c,d){var e=Lb(a,c,"here",d),m=0;0<yb&&!U.fc&&(m=yb*Lb(a,c,"notHere",d));return(e-m)/Ha[c].lc}function Wa(){Ga=0;Va&&null!==db&&(Ga=db[0]+Math.random()*(db[1]-db[0]));qa=ia.ya;var a=Mb.get(0);a&&(V.m[0]=a[0],V.m[1]=a[1],V.m[2]=a[2],V.m[3]=a[2]*K.aspectRatio)}function ec(a,
c){var d=.5+(V.m[0]-.5)/K.J.scale[0],e=.5+(V.m[1]-.5)/K.J.scale[1],m=V.m[2],p=V.m[3],r=ha.positionScale[0],q=ha.positionScale[1],h=ha.positionScale[2],l=1;!va.Ub&&ua.lockStabilizeEnabled&&(l=ua.lockStabilizeDxysRanges,l=Math.max(zb.ec(l[0][0],l[0][1],Math.abs(r-d)/m*Xa*U.F[0]),zb.ec(l[1][0],l[1][1],Math.abs(q-e)/p*Xa*U.F[1]),zb.ec(l[2][0],l[2][1],Math.abs(h-m)/m*Xa*U.F[2])));U.Fa&&(va.ac=ra.ma(va.ac,Va?Ga:Ab,l),ha.roll=va.ac);U.cb&&(va.pitch=ra.ma(va.pitch,Nb,l),ha.pitch=va.pitch);U.Pb&&(va.oc=ra.ma(va.oc,
a,l),ha.yaw=va.oc);ha.label=Ha[Y.H].label;ha.distance=Ha[Y.H].Jd;ha.positionScale[0]=ra.ma(r,d,l);ha.positionScale[1]=ra.ma(q,e,l);ha.positionScale[2]=ra.ma(h,m,l);ha.positionScale[3]=ra.ma(ha.positionScale[3],p,l);ha.detectScore=c}function fc(a){var c=-1,d=-1E12;-1!==[ia.ya,ia.xb].indexOf(qa)&&Ha.forEach(function(h,l){h=nb(a,l,0);h>d&&(d=h,c=l)});va.Ub=!0;switch(qa){case ia.ya:qa=ia.xb;Ra(a,c,[1,1,1]);ea=0;break;case ia.xb:++ea;d>W.vb?(W.Ha?(qa=ia.Oa,eb=c,Y.H=c,Y.Tb=0):(qa=ia.pc,Ob=0,eb=c),Ra(a,
eb,[1,1,1])):ea>fa.qe?Wa():Ra(a,c,[1,1,1]);break;case ia.pc:++Ob>W.lb&&(qa=ia.Oa,Y.n=0,Y.Yc=0,Y.H=eb,Y.W[0]=0,Y.W[1]=0);Ra(a,eb,[1,1,1]);xb(W.hb);break;case ia.Oa:if(va.Ub=!1,W.Ha||++Y.n>W.na){var e=nb(a,Y.H,1);if(W.Ha||e>W.vb+W.ub||W.bb){U.Fa&&(Ab=U.ed*Ma(a,Y.H,"roll"),Va&&(Ga+=Ab));if(Bb){var m=-1;m=W.Ha||W.bb?Kb(a,Y.H):Math.atan2(Y.W[1],Y.W[0]);if(U.cb){var p=.5+.5*Ma(a,Y.H,"pitch");Nb=U.pitchRange[0]+(U.pitchRange[1]-U.pitchRange[0])*p}ec(m,e)}W.bb?(Ra(a,Y.H,W.md),e>W.kd?(Y.Tb=0,ha.label||(ha.label=
Ha[Y.H].label)):++Y.Tb>W.jb&&Wa()):Bb?Wa():Ra(a,Y.H,[.5,.5,.5])}else Wa()}else{var r=1-(W.na-Y.n)/(W.na-1);e=1.5-1*r;Ra(a,Y.H,[e,e,e]);xb(W.Ra*(1-r));var q=nb(a,Y.H,r);q<W.vb*r*W.Sa?Wa():++Y.Yc>10*W.na?Wa():Ha.some(function(h,l){return Y.H===l?!1:nb(a,l,r)>q*(W.La*r+(1-r))?!0:!1})?(xb(W.Na[0]),Ga+=(2*Math.random()-1)*W.Na[1]*Math.PI/180,Y.n=0,Y.W[0]=0,Y.W[1]=0):(e=Kb(a,Y.H),Y.W[0]+=Math.cos(e),Y.W[1]+=Math.sin(e))}}}function gc(){E.sc([{id:"s53",name:"_",wa:"attribute vec2 a0;uniform vec4 u40;uniform vec2 u37,u38;uniform float u36,u39;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.);float a=u39*(u40.z/u40.w);a*=u38.x/u38.y;float b=cos(u36),c=sin(u36);vec2 f=mat2(b,-c*a,c/a,b)*a0,g=u37+f*u38,d=u40.xy+.5*u40.zw*g;vv0=vec2(d.x,1.-d.y);}",
g:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;const vec3 g=vec3(1.,1.,1.);vec3 c[9];void main(){vec2 d=vv0+.5*u10;c[0]=texture2D(u1,d-u10*vec2(-1.,-1.)).rgb,c[1]=texture2D(u1,d-u10*vec2(-1.,0.)).rgb,c[2]=texture2D(u1,d-u10*vec2(-1.,1.)).rgb,c[3]=texture2D(u1,d-u10*vec2(0.,-1.)).rgb,c[4]=texture2D(u1,d-u10).rgb,c[5]=texture2D(u1,d-u10*vec2(0.,1.)).rgb,c[6]=texture2D(u1,d-u10*vec2(1.,-1.)).rgb,c[7]=texture2D(u1,d-u10*vec2(1.,0.)).rgb,c[8]=texture2D(u1,d-u10*vec2(1.,1.)).rgb;vec3 a,b;a=min(c[0],c[1]),b=max(c[0],c[1]),c[0]=a,c[1]=b,a=min(c[0],c[2]),b=max(c[0],c[2]),c[0]=a,c[2]=b,a=min(c[0],c[3]),b=max(c[0],c[3]),c[0]=a,c[3]=b,a=min(c[0],c[4]),b=max(c[0],c[4]),c[0]=a,c[4]=b,a=min(c[0],c[5]),b=max(c[0],c[5]),c[0]=a,c[5]=b,a=min(c[0],c[6]),b=max(c[0],c[6]),c[0]=a,c[6]=b,a=min(c[0],c[7]),b=max(c[0],c[7]),c[0]=a,c[7]=b,a=min(c[0],c[8]),b=max(c[0],c[8]),c[0]=a,c[8]=b,a=min(c[1],c[2]),b=max(c[1],c[2]),c[1]=a,c[2]=b,a=min(c[1],c[3]),b=max(c[1],c[3]),c[1]=a,c[3]=b,a=min(c[1],c[4]),b=max(c[1],c[4]),c[1]=a,c[4]=b,a=min(c[1],c[5]),b=max(c[1],c[5]),c[1]=a,c[5]=b,a=min(c[1],c[6]),b=max(c[1],c[6]),c[1]=a,c[6]=b,a=min(c[1],c[7]),b=max(c[1],c[7]),c[1]=a,c[7]=b,a=min(c[1],c[8]),b=max(c[1],c[8]),c[1]=a,c[8]=b,a=min(c[2],c[3]),b=max(c[2],c[3]),c[2]=a,c[3]=b,a=min(c[2],c[4]),b=max(c[2],c[4]),c[2]=a,c[4]=b,a=min(c[2],c[5]),b=max(c[2],c[5]),c[2]=a,c[5]=b,a=min(c[2],c[6]),b=max(c[2],c[6]),c[2]=a,c[6]=b,a=min(c[2],c[7]),b=max(c[2],c[7]),c[2]=a,c[7]=b,a=min(c[2],c[8]),b=max(c[2],c[8]),c[2]=a,c[8]=b,a=min(c[3],c[4]),b=max(c[3],c[4]),c[3]=a,c[4]=b,a=min(c[3],c[5]),b=max(c[3],c[5]),c[3]=a,c[5]=b,a=min(c[3],c[6]),b=max(c[3],c[6]),c[3]=a,c[6]=b,a=min(c[3],c[7]),b=max(c[3],c[7]),c[3]=a,c[7]=b,a=min(c[3],c[8]),b=max(c[3],c[8]),c[3]=a,c[8]=b,a=min(c[4],c[5]),b=max(c[4],c[5]),c[4]=a,c[5]=b,a=min(c[4],c[6]),b=max(c[4],c[6]),c[4]=a,c[6]=b,a=min(c[4],c[7]),b=max(c[4],c[7]),c[4]=a,c[7]=b,a=min(c[4],c[8]),b=max(c[4],c[8]),c[4]=a,c[8]=b,gl_FragColor=vec4(c[4]*g,1.);}",
i:"u1 u40 u38 u37 u36 u39 u10".split(" "),precision:"lowp"},{id:"s52",name:"_",wa:"attribute vec2 a0;uniform vec4 u40;uniform vec2 u37,u38;uniform float u36,u39;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.);float a=u39*(u40.z/u40.w);a*=u38.x/u38.y;float b=cos(u36),c=sin(u36);vec2 f=mat2(b,-c*a,c/a,b)*a0,g=u37+f*u38,d=u40.xy+.5*u40.zw*g;vv0=vec2(d.x,1.-d.y);}",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:"u1 u40 u38 u37 u36 u39".split(" "),precision:"lowp"},
{id:"s55",name:"_",wa:"attribute vec2 a0;uniform vec4 u40;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.);vec2 a=u40.xy+.5*u40.zw*a0;vv0=vec2(a.x,1.-a.y);}",g:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;const vec3 g=vec3(1.,1.,1.);float c[5];void main(){c[0]=texture2D(u1,vv0-u10*vec2(-1.,0.)).r,c[1]=texture2D(u1,vv0-u10*vec2(0.,-1.)).r,c[2]=texture2D(u1,vv0-u10).r,c[3]=texture2D(u1,vv0-u10*vec2(0.,1.)).r,c[4]=texture2D(u1,vv0-u10*vec2(1.,0.)).r;float a,b;a=min(c[0],c[1]),b=max(c[0],c[1]),c[0]=a,c[1]=b,a=min(c[0],c[2]),b=max(c[0],c[2]),c[0]=a,c[2]=b,a=min(c[0],c[3]),b=max(c[0],c[3]),c[0]=a,c[3]=b,a=min(c[0],c[4]),b=max(c[0],c[4]),c[0]=a,c[4]=b,a=min(c[1],c[2]),b=max(c[1],c[2]),c[1]=a,c[2]=b,a=min(c[1],c[3]),b=max(c[1],c[3]),c[1]=a,c[3]=b,a=min(c[1],c[4]),b=max(c[1],c[4]),c[1]=a,c[4]=b,a=min(c[2],c[3]),b=max(c[2],c[3]),c[2]=a,c[3]=b,a=min(c[2],c[4]),b=max(c[2],c[4]),c[2]=a,c[4]=b,gl_FragColor=vec4(c[2]*g,1.);}",
i:["u1","u40","u10"],precision:"lowp"},{id:"s54",name:"_",wa:"attribute vec2 a0;uniform vec2 u37,u38;varying vec2 vv0;const vec2 f=vec2(1.,1.);void main(){gl_Position=vec4(a0,0.,1.);vec2 a=u37+a0*u38,b=(a+f)/2.;vv0=b;}",g:"uniform sampler2D u1;uniform vec4 u40;varying vec2 vv0;void main(){vec2 b=u40.xy-.5*u40.zw,c=u40.xy+.5*u40.zw,a=step(b,vv0)*step(vv0,c);vec4 d=texture2D(u1,vec2(vv0.x,1.-vv0.y));gl_FragColor=mix(d,vec4(0.,1.,0.,1.),a.x*a.y*.5);}",i:["u1","u40","u38","u37"],precision:"lowp"}]);var a=
[{type:"1i",name:"u1",value:0}];E.O("s53",a);E.O("s52",a);E.O("s55",a);E.O("s54",a);Pb()}function Pb(){Ga=0;E.O("s52",Qb);E.O("s53",Qb);ha.roll=0}function Ya(){K.aspectRatio=K.I/K.S;Mb.C({ob:ua.overlapFactors,Xc:ua.nScaleLevels,Zc:ua.scaleFactor,I:K.I,S:K.S,fd:ua.scale0Factor,F:U.F,bc:ua.scanCenterFirst})}function Rb(a){Q.qa={isFlipY:!1,isLinear:!0,width:K.I,height:K.S,isPot:!1,isFloat:!1};Q.type===Na.Eb?Object.assign(Q.qa,{isKeepArray:!0,array:a.arrayBuffer}):Object.assign(Q.qa,{D:a});Q.M=ba.instance(Q.qa);
Q.ta=!0}function Sb(a,c,d){if(!a.exportData||!a.exportData.labels)return c("INVALID_NN");var e=a.exportData;"undefined"===typeof e.paramsPerLabel&&(e.paramsPerLabel={});"undefined"!==typeof d&&d.paramsPerLabel&&(e.paramsPerLabel=Object.assign(e.paramsPerLabel,d.paramsPerLabel));ob.reset_state();Sa=new N({gb:a.layers,Zb:"cpuRGBA2Float",Wb:fc});Xa=Sa.Xd();ha.NNInputWidth=Xa;V.M=ba.instance({isFloat:!1,isPot:!1,width:Xa});U.F=e.translationScalingFactors?e.translationScalingFactors:fa.F;e.rollMax?(U.ed=
e.rollMax,U.Fa=!0):U.Fa=!1;e.pitchRange?(U.pitchRange=e.pitchRange,U.cb=!0):U.cb=!1;e.splitYawComponents&&(U.fc=!0);"undefined"!==typeof e.isYaw&&(U.Pb=e.isYaw);U.width=Sa.ae();a="undefined"===typeof d?{}:d;yb="undefined"===typeof a.notHereFactor?1:a.notHereFactor;a=e.labels;d="undefined"===typeof e.paramsPerLabel?!1:e.paramsPerLabel;var m="undefined"===typeof e.inputAspectRatio?1:e.inputAspectRatio,p=Math.sqrt(m);K.sa[0]=p;K.sa[1]=1/p;K.Nb=m;Ya();m=Array(a.length);for(p=0;p<U.width/8;++p)for(var r=
0;r<U.width;++r){var q=r+p*U.width;if(q>=a.length)break;var h=r,l=8*p,v=a[q];m[q]={lc:d&&d[v]&&d[v].thresholdDetect?d[v].thresholdDetect:fa.lc,label:v,Jd:e.distances&&e.distances[q]?e.distances[q]:3,Vc:{here:h+l*U.width,notHere:h+(l+1)*U.width,yaw:h+(l+2)*U.width,dx:h+(l+3)*U.width,dy:h+(l+4)*U.width,ds:h+(l+5)*U.width,roll:h+(l+6)*U.width,pitch:h+(l+7)*U.width}}}Ha=m;c(!1)}function Tb(a,c,d){if(qa===ia.LOADING||fb!==Za.IDLE)return-1;Object.assign(na,hc,d?d:{});W.vb=na.thresholdDetectFactor;W.kd=
na.thresholdDetectFactorUnstitch;W.Ha=na.isSkipConfirmation;W.bb=na.isKeepTracking;W.md=na.trackingFactors;W.La=na.secondNeighborFactor;W.lb=na.nLocateAutomoves;W.hb=na.locateMoveNoiseAmplitude;W.na=na.nConfirmAutoMoves;W.ub=na.thresholdConfirmOffset;W.Ra=na.confirmMoveNoiseAmplitude;W.jb=na.nConfirmUnstitchMoves;W.Na=na.tiltPosAngleIfAmbiguousDetection;W.Sa=na.confirmScoreMinFactorDuringAutoMove;Ea.U();ha.label=!1;switch(Q.current){case $a.video:Q.type===Na.video&&Q.time!==Q.element.currentTime?
(Q.M.refresh(),Q.time=Q.element.currentTime):Q.type===Na.Eb&&Q.element.needsUpdate&&(Q.M.od(Q.element.arrayBuffer),Q.element.needsUpdate=!1);switch(na.cutShader){case "median":K.Ea="s53";break;default:K.Ea="s52"}break;case $a.qd:if(!Q.ta){K.I=c.size.width;K.S=c.size.height;switch(na.cutShader){case "IOS":K.Ea="s55";E.O("s55",[{name:"u10",type:"2f",value:[1/K.I,1/K.S]}]);break;default:K.Ea="s52"}Rb(null);Ya()}Q.M.od(c.buffer)}a||(a=Cb.Zd()+fa.kb[0],Cb.ld());return a}function Ub(a,c){V.M.ea();E.set(K.Ea);
Va&&U.Fa&&E.V("u36",qa===ia.Oa?Ga:0);Q.M.j(0);E.rb("u40",V.m);aa.o(!1,!1);Bb=a===c-1}function Vb(){Ea.Pe();ab&&(b.viewport(0,0,wa.width,wa.height),E.set("s54"),Q.M.j(0),E.rb("u40",V.m),aa.o(!1,!1),Wb&&b.commit?b.commit():b.flush());return ha}var ra={Nf:function(a){return Math.ceil(Math.log2(a))},ig:function(a){return Math.log2(a)},eg:function(a){return 0===Math.log2(a)%1},Ze:function(a){var c=[0,0,0,0];a.forEach(function(d){c[0]+=d[0];c[1]+=d[1];c[2]+=d[2];c[3]+=d[3]});return c},Ca:function(a,c,d){return Math.min(Math.max(a,
c),d)},bf:function(a){return a*Math.PI/180},pg:function(a,c){c=Math.pow(10,c);return Math.round(a*c)/c},qg:function(a){return Math.round(1E6*a)/1E6},Of:function(a,c){return(100*a/c).toFixed(3)},ma:function(a,c,d){return a*(1-d)+c*d},jg:function(a,c){return a[0]*(1-c)+a[1]*c},Id:function(a,c){return ra.Bd(a-c)},Bd:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},gf:function(a,c){return Math.abs(ra.Id(a,c))},Se:function(a,c){return Math.atan2(Math.sin(a)+Math.sin(c),
Math.cos(a)+Math.cos(c))}},pb={get:function(a,c,d){var e=new XMLHttpRequest;e.open("GET",a,!0);e.withCredentials=!1;e.onreadystatechange=function(){4===e.readyState&&(200===e.status||0===e.status?c(e.responseText):"undefined"!==typeof d&&d(e.status))};e.send()},Pf:function(a){return new Promise(function(c,d){pb.get(a,c,d)})},Lf:function(a,c,d){a+=d?"?"+pb.Md(d):"";pb.get(a,function(e){c(JSON.parse(e))})},lg:function(a,c,d){var e=new XMLHttpRequest;e.open("POST",a,!0);e.setRequestHeader("Content-type",
"application/x-www-form-urlencoded");e.onreadystatechange=function(){4!==e.readyState||200!==e.status&&0!==e.status||d(e.responseText)};e.send(c)},Md:function(a){return"string"===typeof a?a:Object.keys(a).map(function(c){return encodeURIComponent(c)+"="+encodeURIComponent(a[c])}).join("&")},zf:function(a,c){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){c(d.response)};d.send()}},ic={create:function(a,c){for(var d=Array(c),e=0;e<c;++e)d[e]=a;return d},
cf:function(a,c){for(var d=0;d<a.length;++d)c[d]=a[d]},clone:function(a){for(var c=Array(a.length),d=0;d<a.length;++d)c[d]=a[d];return c},tg:function(a,c,d){a.forEach(function(e,m){c[m]=e*d})},Eg:function(a){for(var c=a.length-1;0<c;--c){var d=Math.floor(Math.random()*(c+1)),e=a[c];a[c]=a[d];a[d]=e}},Fg:function(a){return a.sort(function(c,d){return c-d})},Ne:function(a){return Array.isArray(a)||a.constructor===Float32Array||a.constructor===Uint8Array}},Db={Cb:function(a,c){if(0===c||"object"!==typeof a)return a;
a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var d in a)a[d]=Db.Cb(a[d],c);return a},ff:function(a){return JSON.parse(JSON.stringify(a))}},zb={ec:function(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)},gg:function(a,c,d){return Math.min(Math.max((d-a)/(c-a),0),1)},uf:function(a,c,d,e){return Math.pow(Math.min(Math.max((e-a)/(c-a),0),1),d)},Mg:function(){return 0},kg:function(){return 1},hg:function(a){return a},rf:function(a){return a*a},wf:function(a){return a*(2-a)},mf:function(a){return.5>
a?2*a*a:-1+(4-2*a)*a},kf:function(a){return a*a*a},vf:function(a){return--a*a*a+1},lf:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},sf:function(a){return a*a*a*a},xf:function(a){return 1- --a*a*a*a},pf:function(a){return.5>a?8*a*a*a*a:1-8*--a*a*a*a},tf:function(a){return a*a*a*a*a},yf:function(a){return 1+--a*a*a*a*a},qf:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},jc={Qd:function(a,c,d){switch(a){case "relu":return d+"=max(vec4(0.,0.,0.,0.),"+c+");";case "elu":return d+"=mix(exp(-abs("+
c+"))-vec4(1.,1.,1.,1.),"+c+",step(0.,"+c+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+c+"))-vec4(0.1,0.1,0.1,0.1),"+c+",step(0.,"+c+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}},E=function(){function a(u,n,g){n=u.createShader(n);u.shaderSource(n,g);u.compileShader(n);return u.getShaderParameter(n,u.COMPILE_STATUS)?n:null}function c(u,n,g){n=a(u,u.VERTEX_SHADER,n);g=a(u,u.FRAGMENT_SHADER,g);u===b&&q.push(n,g);var L=
u.createProgram();u.attachShader(L,n);u.attachShader(L,g);u.linkProgram(L);return L}function d(u){return["float","sampler2D","int"].map(function(n){return"precision "+u+" "+n+";\n"}).join("")}function e(u,n){n.A=n.A?!0:!1;if(!n.A){n.wa=n.wa||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";n.tc=n.tc||["a0"];n.zb=n.zb||[2];n.precision=n.precision||B;n.id=v++;void 0!==n.gd&&(n.gd.forEach(function(M,O){n.g=n.g.replace(M,n.qb[O])}),
n.gd.splice(0));n.nc=0;n.zb.forEach(function(M){n.nc+=4*M});var g=d(n.precision);n.oa=c(u,g+n.wa,g+n.g);n.v={};n.i.forEach(function(M){n.v[M]=u.getUniformLocation(n.oa,M)});n.attributes={};n.Aa=[];n.tc.forEach(function(M){var O=u.getAttribLocation(n.oa,M);n.attributes[M]=O;n.Aa.push(O)});if(n.l){u.useProgram(n.oa);l=n;h=n.id;for(var L in n.l)u.uniform1i(n.v[L],n.l[L])}n.ta=!0}}function m(u){za.Ie(S);h!==u.id&&(S.R(),h=u.id,l=u,b.useProgram(u.oa),u.Aa.forEach(function(n){0!==n&&b.enableVertexAttribArray(n)}))}
function p(u,n,g){e(u,n,g);u.useProgram(n.oa);u.enableVertexAttribArray(n.attributes.a0);h=-1;return l=n}function r(){return{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],l:{u1:0}}}var q=[],h=-1,l=null,v=0,x=!1,B="highp",t=["u1"],I=["u0"],y={u1:0},f={u0:0},H={u1:0,u2:1},F={u1:0,u3:1},k=["u1","u3","u4"],G={u5:0},C={s0:r(),s1:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:t,l:y,precision:"lowp"},s2:{g:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
i:["u1","u2"],l:H},s3:{g:"uniform sampler2D u1;uniform vec2 u6,u7;varying vec2 vv0;void main(){vec2 a=vv0*u6+u7;gl_FragColor=texture2D(u1,a);}",i:["u1","u6","u7"],l:y,A:!0},s4:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:t,l:y},s5:{g:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],l:H},s6:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",
i:t,l:y},s7:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:t,l:y},s8:{g:"uniform sampler2D u0;uniform float u6;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u6;}",i:["u0","u6"],l:f},s9:{g:"uniform sampler2D u0;uniform float u6;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u6,f);gl_FragColor=b*g;}",i:["u0","u6"],l:f},s10:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
i:t,l:y},s11:{g:"uniform sampler2D u1,u8;uniform float u9;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u8,vv0);gl_FragColor=mix(b,a,u9*f);}",i:["u1","u8","u9"],l:{u1:0,u8:1}},s12:{g:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u10)+texture2D(u1,vv0+u10*vec2(1.,-1.))+texture2D(u1,vv0+u10*vec2(-1.,-1.))+texture2D(u1,vv0+u10*vec2(-1.,1.)));}",i:["u1","u10"],l:y},s13:{g:"uniform sampler2D u1;uniform vec4 u11;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u11);gl_FragColor=j(a);}",
i:["u1","u11"],l:y},s14:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:I,l:f,A:!0},s15:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:I,l:f},s16:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:I,l:f},
s17:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:I,l:f},s18:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:I,l:f},s19:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",i:I,l:f,A:!0},s20:{g:"uniform sampler2D u0,u12;uniform float u13;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u12,e);float b=u13*u13;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",
i:["u0","u12","u13"],l:{u0:0,u12:1},A:!0},s21:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),f=floor(u14.x*fract(b*u14.y)),g=(f*u14.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",i:["u1","u14"],l:y},s22:{g:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),f=texture2D(u16,c);gl_FragColor=d*f;}",i:["u15","u16","u17"],l:{u16:0,u15:1,
u17:2},A:!0},s23:{g:"uniform float u18,u19;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 c=fract(vv0*u18),a=vv0;float b=u18*u19;a=(.5+floor(b*vv0))/b;vec4 d=texture2D(u15,a),f=texture2D(u16,c);gl_FragColor=d*f;}",i:["u16","u15","u18","u19"],l:{u16:0,u15:1}},s24:{g:"uniform float u18,u19;uniform sampler2D u15,u16,u20,u21,u22,u23;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u18),d=vv0;float h=u18*u19;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u15,d),m=texture2D(u16,c),a=texture2D(u23,d);a=floor(.5+a*255.);vec4 n=texture2D(u20,c),o=texture2D(u21,c),p=texture2D(u22,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:"u15 u16 u18 u19 u23 u20 u21 u22".split(" "),l:{u16:0,u15:1,u23:3,u20:4,u21:5,u22:6},A:!0},s25:{g:"uniform sampler2D u15,u16,u3;uniform float u18,u24,u25,u19;uniform vec2 u26;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u24*vv0),d=u24*vv0-c;float g=u18/u24;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u24;float m=u24*u19/u18;vec2 b=m*h;b=floor(u26*b+.5*(u19-1.)*(f-u26));vec2 a=(b+i*u25)/u19;a+=.25/u19;vec2 k=step(a,f)*step(l,a);vec4 n=texture2D(u15,j),o=texture2D(u16,a),p=n*o,q=texture2D(u3,j);gl_FragColor=(p*u25*u25+q)*k.x*k.y;}",
i:"u15 u16 u18 u24 u25 u19 u3 u26".split(" "),l:{u16:0,u15:1,u3:2}},s26:{g:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",i:["u15","u16"],l:{u16:0,u15:1},A:!0},s27:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:k,l:F},s28:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:k,l:F,A:!0},s29:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:k,l:F,A:!0},s30:{g:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:t,l:y,precision:"lowp"},s31:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u27"],l:y,precision:"lowp"},s32:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u27"],l:y,precision:"lowp"},s33:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u28"],l:H,A:!0},s34:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u28,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u28"],l:H,A:!0},s35:{g:"uniform sampler2D u5;uniform vec2 u10;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u10*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u10*h),d=texture2D(u5,a+u10*i),j=texture2D(u5,a+u10),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u5","u10"],l:G},s36:{g:"uniform sampler2D u5;uniform vec2 u10;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u10*k),d=texture2D(u5,a+u10*l),g=texture2D(u5,a+u10),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u10*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u10*m),d=f(a+u10*2.),g=f(a+u10*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u5","u10"],
l:G,A:!0},s37:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],l:y,precision:"lowp",A:!0},s38:{g:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u10)+2002./e*texture2D(u1,vv0-2.*u10)+3003./e*texture2D(u1,vv0-u10)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u10)+2002./e*texture2D(u1,vv0+2.*u10)+1001./e*texture2D(u1,vv0+3.*u10);gl_FragColor=a;}",i:["u10","u1"],
l:y,precision:"lowp",A:!0},s39:{g:"uniform sampler2D u1,u12,u29;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u12,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u12","u29"],l:{u1:0,u12:1,u29:2},A:!0}},z={s40:{g:"uniform float u18,u30;uniform sampler2D u15,u16,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u18,xyTo=floor(vv0*u18+eps2);float weightSize=toSparsity*u18;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u18,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u18","u15","u16","u3","u30"],qb:["1.1111","gl_FragColor\\*=2.2222;"]},s41:{g:"uniform float u18,u30,u19;uniform sampler2D u15,u16,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u19,xyTo=floor(vv0*u18+eps2);float weightSize=fromSparsity*u19;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u18;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u19,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u18 u19 u15 u16 u3 u30".split(" "),qb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},D=null,J=null,S={fb:function(){return x},C:function(){if(!x){D=Db.Cb(C,2);J=Db.Cb(z,2);B="highp";b.getShaderPrecisionFormat&&(b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT),b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.LOW_FLOAT));for(var u in D)e(b,D[u],u);E.set("s0");b.enableVertexAttribArray(0);x=!0}},sc:function(u){u.forEach(function(n){S.rc(n)})},rc:function(u){D[u.id]=u;e(b,u,u.id)},de:function(u,
n,g){n||(n=u);D[n]=Object.create(J[u]);D[n].je=!0;J[u].qb&&J[u].qb.forEach(function(L,M){D[n].g=D[n].g.replace(new RegExp(L,"g"),g[M])});e(b,D[n],n)},set:function(u){var n=D[u];n.A&&(n.A=!1,e(b,n,u));m(n)},Ja:function(u){return p(u,r(),"s42")},cc:function(u){return p(u,{g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:B},"s43")},Od:function(u){return"undefined"===typeof D[u]?!1:D[u].ta},R:function(){-1!==h&&(h=-1,l.Aa.forEach(function(u){0!==u&&b.disableVertexAttribArray(u)}))},dc:function(){var u=
0;l.Aa.forEach(function(n,g){g=l.zb[g];b.vertexAttribPointer(n,g,b.FLOAT,!1,l.nc,u);u+=4*g})},Ld:function(){b.enableVertexAttribArray(0)},Ka:function(){S.sb(b)},sb:function(u){u.vertexAttribPointer(l.Aa[0],2,u.FLOAT,!1,8,0)},yg:function(u,n){b.uniform1i(l.v[u],n)},V:function(u,n){b.uniform1f(l.v[u],n)},pa:function(u,n,g){b.uniform2f(l.v[u],n,g)},Je:function(u,n){b.uniform2fv(l.v[u],n)},Ag:function(u,n){b.uniform3fv(l.v[u],n)},zg:function(u,n,g,L){b.uniform3f(l.v[u],n,g,L)},Ke:function(u,n,g,L,M){b.uniform4f(l.v[u],
n,g,L,M)},rb:function(u,n){b.uniform4fv(l.v[u],n)},Bg:function(u,n){b.uniformMatrix2fv(l.v[u],!1,n)},Cg:function(u,n){b.uniformMatrix3fv(l.v[u],!1,n)},Dg:function(u,n){b.uniformMatrix4fv(l.v[u],!1,n)},O:function(u,n){S.set(u);n.forEach(function(g){switch(g.type){case "4f":b.uniform4fv(l.v[g.name],g.value);break;case "3f":b.uniform3fv(l.v[g.name],g.value);break;case "2f":b.uniform2fv(l.v[g.name],g.value);break;case "1f":b.uniform1f(l.v[g.name],g.value);break;case "1i":b.uniform1i(l.v[g.name],g.value);
break;case "mat2":b.uniformMatrix2fv(l.v[g.name],!1,g.value);break;case "mat3":b.uniformMatrix3fv(l.v[g.name],!1,g.value);break;case "mat4":b.uniformMatrix4fv(l.v[g.name],!1,g.value)}})},Mf:function(){return"lowp"},u:function(){S.R();b.disableVertexAttribArray(0);for(var u in D){var n=D[u];n.ta&&(n.ta=!1,b.deleteProgram(n.oa));n.je&&delete D[u]}q.forEach(function(g){b.deleteShader(g)});q.splice(0);v=0;x=!1;l=null;h=-1}};return S}(),b=null,qb=function(){function a(t){console.log("ERROR in ContextFF: ",
t);return!1}function c(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(t){function I(){Ia.u();da.reset();f.getExtension("WEBGL_lose_context").loseContext()}if(c())return!1;var y=document.createElement("canvas");y.setAttribute("width",5);y.setAttribute("height",5);var f=null;try{f=y.getContext("webgl2",t)}catch(H){return!1}if(!f)return!1;e(f);da.Bc(f);t=da.Db(f);if(!t.$&&!t.aa)return I(),!1;t=Ia.wc(f,t);I();return t?!0:!1}function e(t){t.clearColor(0,0,0,0);
t.disable(t.DEPTH_TEST);t.disable(t.BLEND);t.disable(t.DITHER);t.disable(t.STENCIL_TEST);t.disable(t.CULL_FACE);t.GENERATE_MIPMAP_HINT&&t.hint(t.GENERATE_MIPMAP_HINT,t.FASTEST);t.disable(t.SAMPLE_ALPHA_TO_COVERAGE);t.disable(t.SAMPLE_COVERAGE);t.depthFunc(t.LEQUAL);t.clearDepth(1)}var m=null,p=null,r=null,q=null,h=!0,l=null,v=null,x=[],B={G:function(){return m.width},X:function(){return m.height},Df:function(){return m},Bf:function(){return b},ba:function(){return h},flush:function(){b.flush()},Wf:function(){Ea.U();
B.Ce()},Ce:function(){ba.reset();aa.reset();E.R();E.Ld();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);aa.Pa();E.Ka()},Sd:function(){l||(l=new Uint8Array(m.width*m.height*4));b.readPixels(0,0,m.width,m.height,b.RGBA,b.UNSIGNED_BYTE,l);return l},Ff:function(){return m.toDataURL("image/jpeg")},Gf:function(){Ea.T();p||(p=document.createElement("canvas"),r=p.getContext("2d"));p.width=m.width;p.height=m.height;for(var t=B.Sd(),I=r.createImageData(p.width,p.height),y=p.width,f=p.height,H=I.data,F=0;F<f;++F)for(var k=
f-F-1,G=0;G<y;++G){var C=4*(F*y+G),z=4*(k*y+G);H[C]=t[z];H[C+1]=t[z+1];H[C+2]=t[z+2];H[C+3]=t[z+3]}r.putImageData(I,0,0);return p.toDataURL("image/png")},Ef:function(t){!p&&t&&(p=document.createElement("canvas"),r=p.getContext("2d"));var I=t?p:document.createElement("canvas");I.width=m.width;I.height=m.height;(t?r:I.getContext("2d")).drawImage(m,0,0);return I},C:function(t){t=Object.assign({Kb:null,Vb:null,Ta:null,zc:null,width:512,height:512,premultipliedAlpha:!1,ge:!0,antialias:!1,debug:!1,ef:!1},
t);t.Kb?(b=t.Kb,m=t.Kb.canvas):t.zc&&!t.Ta?m=document.getElementById(t.zc):t.Ta&&(m=t.Ta);m||(m=document.createElement("canvas"));m.width=t.width;m.height=t.height;if(b)h=b instanceof WebGL2RenderingContext;else{h=!0;var I={antialias:t.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:t.premultipliedAlpha,stencil:!1,depth:t.ge,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(I.antialias=
!1);var y=d(I);y||!I.antialias||c()||(I.antialias=!1,y=d(I));y&&(b=m.getContext("webgl2",I));b?h=!0:((b=m.getContext("webgl",I))||(b=m.getContext("experimental-webgl",I)),h=!1)}if(!b)return a("WebGL1 and 2 are not enabled");t.Vb&&m.addEventListener&&(q=b.getExtension("WEBGL_lose_context"))&&(v=t.Vb,m.addEventListener("webglcontextlost",v,!1));if(!da.C())return a("Not enough GL capabilities");e(b);E.C();aa.C();Ia.wc(b,da.Rd());x.forEach(function(f){f(b)});x.splice(0);return!0},We:function(){return new Promise(function(t){b?
t(b):x.push(t)})},u:function(){b&&(da.u(),E.u(),Ia.u());q&&v&&(m.removeEventListener("webglcontextlost",v,!1),q=v=null);b=l=r=p=m=null;x.splice(0)}};return B}(),za=function(){function a(){null===c&&("undefined"!==typeof E?c=E:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;return{reset:function(){c=null},Ie:function(d){c!==d&&(c&&c.R(),c=d)},fb:function(){return c.fb()},Ka:function(){return c.Ka()},sb:function(d){return c.sb(d)},dc:function(){return c.dc()},R:function(){return c.R()},set:function(d){a();
return c.set(d)},Ja:function(d){a();return c.Ja(d)},cc:function(d){a();return c.cc(d)}}}(),Pa=function(){function a(g){b.bindTexture(b.TEXTURE_2D,g)}function c(g){J[0]=g;g=S[0];var L=g>>16&32768,M=g>>12&2047,O=g>>23&255;return 103>O?L:142<O?L|31744|((255==O?0:1)&&g&8388607):113>O?(M|=2048,L|(M>>114-O)+(M>>113-O&1)):L=(L|O-112<<10|M>>1)+(M&1)}function d(g){var L=new Uint16Array(g.length);g.forEach(function(M,O){L[O]=c(M)});return L}function e(){if(null!==u.Lb)return u.Lb;var g=p(d([.5,.5,.5,.5]),!0);
return null===g?!0:u.Lb=g}function m(){if(null!==u.Mb)return u.Mb;var g=p(new Uint8Array([127,127,127,127]),!1);return null===g?!0:u.Mb=g}function p(g,L){if(!za.fb()||!y)return null;var M=null,O=Math.sqrt(g.length/4);try{var Z=b.getError();if("FUCKING_BIG_ERROR"===Z)return!1;M=n.instance({isFloat:!1,P:L,array:g,width:O});Z=b.getError();if(Z!==b.NO_ERROR)return!1}catch(Aa){return!1}oa.T();b.viewport(0,0,O,O);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);za.set("s0");M.uc(0);pa.o(!0,!0);g=4*O*O;
L=new Uint8Array(g);b.readPixels(0,0,O,O,b.RGBA,b.UNSIGNED_BYTE,L);O=!0;for(Z=0;Z<g;++Z)O=O&&3>Math.abs(L[Z]-127);M.remove();oa.U();return O}var r=0,q=null,h=0,l=null,v=null,x=null,B=null,t=null,I=null,y=!1,f=[],H={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,D:null,Nc:null,ie:!1,P:!1,ja:null,ib:4,Qb:0},F=!1,k=null,G=null,C=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],
z=!1,D=!1,J=new Float32Array(1),S=new Int32Array(J.buffer),u={Lb:null,Mb:null},n={C:function(){y||(t=[b.RGBA,null,b.RGBA,b.RGBA],I=[b.RGBA,null,b.RGBA,b.RGBA],q=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7],z="undefined"!==typeof JEContext,D="undefined"!==typeof da,z&&JEContext.fg()&&q.push(b.TEXTURE8,b.TEXTURE9),l=[-1,-1,-1,-1,-1,-1,-1,-1],B=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT],y=!0)},ce:function(){if(!v){for(var g=new Float32Array(16384),L=0;16384>L;++L)g[L]=
2*Math.random()-1;v={random:n.instance({isFloat:!0,isPot:!0,array:g,width:64}),nd:n.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}n.Re()},Uf:function(){return v.nd},Re:function(){B[1]=da.Hb(b)},Ge:function(){I=t=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},dd:function(g){E.set("s1");oa.T();var L=g.G(),M=g.X();b.viewport(0,0,L,M);g.j(0);pa.o(!1,!1)},ng:function(g,L){n.dd(g);b.readPixels(0,0,g.G(),g.X(),b.RGBA,b.UNSIGNED_BYTE,L)},og:function(g,L){n.dd(g);return da.$b(0,0,g.G(),g.X(),L)},
Ic:function(g,L,M,O,Z,Aa,Ba){g.activeTexture(g.TEXTURE0);var Ja=g.createTexture();g.bindTexture(g.TEXTURE_2D,Ja);Z=Z instanceof Float32Array?Z:new Float32Array(Z);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,Aa);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,M,O,0,g.RGBA,g.FLOAT,
Z);g.bindTexture(g.TEXTURE_2D,null);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!1);Ba&&(oa.U(),E.Ja(g));g.viewport(0,0,M,O);g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,L,0);g.bindTexture(g.TEXTURE_2D,Ja);Ba?pa.o(!0,!0):aa.Xa(g);g.deleteTexture(Ja);y&&(l[0]=-1,x=null,r=0)},yb:function(g){g!==r&&(b.activeTexture(q[g]),r=g)},instance:function(g){var L;function M(){R=void 0!==w.D.videoWidth?w.D.videoWidth:w.D.width;T=void 0!==w.D.videoHeight?w.D.videoHeight:w.D.height}function O(A){var P=
b.getError();if("FUCKING_BIG_ERROR"===P)return!1;b.texImage2D(b.TEXTURE_2D,0,la,ja,ka,A);P=b.getError();P!==b.NO_ERROR&&ja!==b.RGBA&&(ja=b.RGBA,b.texImage2D(b.TEXTURE_2D,0,la,ja,ka,A));return!0}function Z(){if(!Xb){a(xa);Fa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,Fa);w.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,w.isMirrorX?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,w.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),
b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));w.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.If().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.Te);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,w.isLinear?b.LINEAR:b.NEAREST);w.isLinear?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,w.isMipmap&&!Ta?b.NEAREST_MIPMAP_LINEAR:b.LINEAR):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,w.isMipmap&&!Ta?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);
ja=t[w.ib-1];la=I[w.ib-1];ka=B[Eb];if(da.ba()){var A=da.Td();ja===b.RGBA&&ka===b.FLOAT?w.isMipmap||w.isLinear?la=Ia.Vd(b):da.xc()?A&&(la=A):la=b.RGBA16F||b.RGBA:ja===b.RGB&&ka===b.FLOAT&&A&&(la=A,ja=b.RGBA)}if(w.P&&!w.isFloat||w.isFloat&&w.isMipmap&&Ia.me())la=da.Ud(),ka=da.Hb(b);w.Qb&&(rb=w.Qb);w.isSrgb&&4===w.ib&&(ja=JEContext.Sf());if(w.D)O(w.D);else if(w.url)O(Oa);else if(ya){A=ya;try{"FUCKING_BIG_ERROR"!==b.getError()&&(b.texImage2D(b.TEXTURE_2D,0,la,R,T,0,ja,ka,A),b.getError()!==b.NO_ERROR&&
(b.texImage2D(b.TEXTURE_2D,0,la,R,T,0,ja,ka,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,R,T,0,b.RGBA,b.UNSIGNED_BYTE,null)))}catch(uc){b.texImage2D(b.TEXTURE_2D,0,la,R,T,0,ja,ka,null)}w.isKeepArray||(ya=null)}else A=b.getError(),"FUCKING_BIG_ERROR"!==A&&(b.texImage2D(b.TEXTURE_2D,0,la,R,T,0,ja,ka,null),A=b.getError(),A!==b.NO_ERROR&&(ja=b.RGBA,w.P&&ka!==b.FLOAT&&(ka=b.FLOAT,b.texImage2D(b.TEXTURE_2D,0,la,R,T,0,ja,ka,null))));if(w.isMipmap)if(!Ta&&ca)ca.Gb(),sb=!0;else if(Ta){A=
Math.log2(Math.min(R,T));bb=Array(1+A);bb[0]=xa;for(var P=1;P<=A;++P){var ma=Math.pow(2,P),X=R/ma;ma=T/ma;var Ua=b.createTexture();a(Ua);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,la,X,ma,0,ja,ka,null);a(null);bb[P]=Ua}sb=!0}a(null);l[r]=-1;Fa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);gb=!0;w.ja&&ca&&(w.ja(ca),w.ja=null)}}function Aa(){for(var A=R*T,P=2*A,ma=3*A,X=0;X<A;++X)Ca[0][X]=hb[X],Ca[1][X]=
hb[X+A],Ca[2][X]=hb[X+P],Ca[3][X]=hb[X+ma]}function Ba(){var A=R*T*4;Ka=[new Uint8Array(A),new Uint8Array(A),new Uint8Array(A),new Uint8Array(A)];Ca=[new Float32Array(Ka[0].buffer),new Float32Array(Ka[1].buffer),new Float32Array(Ka[2].buffer),new Float32Array(Ka[3].buffer)];tb=new Uint8Array(4*A);hb=new Float32Array(tb.buffer);ib=!0}function Ja(){L=new Uint8Array(R*T*4);Yb=new Float32Array(L.buffer);Fb=!0}var w=Object.assign({},H,g),jb=h++;null===w.isFlipY&&(w.isFlipY=w.url?!0:!1);w.data&&(w.array=
"string"===typeof w.data?Qa(w.data):w.isFloat?new Float32Array(w.data):new Uint8Array(w.data),w.isFlipY=!1);var Eb=0,Zb=w.D?!0:!1,kb=null,Gb=null,$b=!1;w.P=w.P||w.isFloat;w.P&&(Eb=1);!w.ie&&w.isFloat&&D&&!da.xc()&&(w.isFloat=!1);w.isFloat&&(Eb=2);w.isAnisotropicFiltering&&z&&!JEContext.Zf()&&(w.isAnisotropicFiltering=!1);var xa=w.Nc||b.createTexture(),Oa=null,ya=!1,R=0,T=0,gb=!1,Xb=!1,ib=!1,Ca=null,Ka=null,tb=null,hb=null,la=null,ja=null,ka=null,Fa=w.isFlipY,kc=(g=w.P&&w.isMipmap)&&Ia.yd(),Ta=g&&
kc?!0:!1,bb=null,rb=-1,sb=!1;var Fb=!1;var Yb=L=null;w.width&&(R=w.width,T=w.height?w.height:R);var ca={get:function(){return xa},G:function(){return R},X:function(){return T},Vf:function(){return w.url},$f:function(){return w.isFloat},bg:function(){return w.P},cg:function(){return w.isLinear},Gb:function(){b.generateMipmap(b.TEXTURE_2D)},wd:function(A,P){Ta?(A||(A=ca.Mc()),n.yb(P),a(bb[A]),l[P]=-1):ca.j(P)},Mc:function(){-1===rb&&(rb=Math.log(R)/Math.log(2));return rb},Pd:function(A){if(Ta){A||(A=
ca.Mc());E.set("s12");n.yb(0);for(var P=R,ma=T,X=1;X<=A;++X)P/=2,ma/=2,E.pa("u10",.25/P,.25/ma),b.viewport(0,0,P,ma),a(bb[X-1]),b.framebufferTexture2D(oa.$a(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,bb[X],0),pa.o(!1,1===X);l[0]=-1}else ca.Gb()},xg:function(A){(Zb=!ic.Ne(A))?(ya=null,w.D=A,M()):ya=A},j:function(A){if(!gb)return!1;n.yb(A);if(l[A]===jb)return!1;a(xa);l[A]=jb;return!0},uc:function(A){b.activeTexture(q[A]);r=A;a(xa);l[A]=jb},B:function(){x=ca;b.framebufferTexture2D(oa.$a(),b.COLOR_ATTACHMENT0,
b.TEXTURE_2D,xa,0)},ea:function(){x=ca;b.viewport(0,0,R,T);b.framebufferTexture2D(oa.$a(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,xa,0)},mc:n.mc,Ee:function(A,P){R=A;T=P},resize:function(A,P){ca.Ee(A,P);Z()},clone:function(A){A=n.instance({width:R,height:T,P:w.P,isFloat:w.isFloat,isLinear:w.isLinear,isMirrorY:w.isMirrorY,isFlipY:A?!Fa:Fa,isPot:w.isPot});za.set("s0");oa.U();A.B();b.viewport(0,0,R,T);ca.j(0);pa.o(!0,!0);return A},Le:function(){b.viewport(0,0,R,T)},remove:function(){b.deleteTexture(xa);Xb=
!0;f.splice(f.indexOf(ca),1);ca=null},refresh:function(){ca.uc(0);Fa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Zb?b.texImage2D(b.TEXTURE_2D,0,la,ja,ka,w.D):b.texImage2D(b.TEXTURE_2D,0,la,R,T,0,ja,ka,ya);Fa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},cd:function(){ib||Ba();b.readPixels(0,0,R,4*T,b.RGBA,b.UNSIGNED_BYTE,tb);Aa();return Ca},ye:function(){ib||Ba();return da.$b(0,0,R,4*T,tb).then(function(){Aa();return Ca})},Ae:function(){Fb||Ja();b.readPixels(0,0,R,T,b.RGBA,b.UNSIGNED_BYTE,L);return Yb},
ze:function(){Fb||Ja();return da.$b(0,0,R,T,L)},Ac:function(A){oa.T();E.set("s13");ca.j(0);if(A)b.viewport(0,0,R,T),E.Ke("u11",.25,.25,.25,.25),pa.o(!1,!0);else for(A=0;4>A;++A)b.viewport(0,T*A,R,T),E.rb("u11",C[A]),pa.o(!1,0===A)},od:function(A){var P=ka===B[0]&&!m();a(xa);Fa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);P?($b||(kb=document.createElement("canvas"),kb.width=R,kb.height=T,Gb=kb.getContext("2d"),Gb.createImageData(R,T),$b=!0),null.data.set(A),Gb.putImageData(null,0,0),b.texImage2D(b.TEXTURE_2D,
0,la,ja,ka,kb)):b.texImage2D(b.TEXTURE_2D,0,la,R,T,0,ja,ka,A);l[r]=jb;Fa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Lg:function(A,P){a(xa);P&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,la,ja,ka,A);l[r]=jb;P&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},ug:function(A,P){var ma=R*T,X=4*ma;A=w.P?A?"RGBE":"JSON":"RGBA";P&&(A=P);P=da.ba()&&!1;var Ua=null;switch(A){case "RGBE":Ua="s44";break;case "JSON":Ua=P?"s0":"s13";break;case "RGBA":case "RGBAARRAY":Ua="s7"}ib||("RGBA"===A||"RGBE"===
A||"RGBAARRAY"===A?(Ka=new Uint8Array(X),ib=!0):"JSON"!==A||P||Ba());oa.T();E.set(Ua);ca.j(0);X=null;if("RGBA"===A||"RGBE"===A||"RGBAARRAY"===A){b.viewport(0,0,R,T);pa.o(!0,!0);b.readPixels(0,0,R,T,b.RGBA,b.UNSIGNED_BYTE,Ka);if("RGBAARRAY"===A)return{data:Ka};F||(k=document.createElement("canvas"),G=k.getContext("2d"),F=!0);k.width=R;k.height=T;ma=G.createImageData(R,T);ma.data.set(Ka);G.putImageData(ma,0,0);X=k.toDataURL("image/png")}else if("JSON"===A)if(P)X=new Float32Array(ma),b.viewport(0,0,
R,T),pa.o(!0,!0),b.readPixels(0,0,R,T,b.RGBA,b.FLOAT,X);else{for(X=0;4>X;++X)b.viewport(0,T*X,R,T),E.rb("u11",C[X]),pa.o(!X,!X);ca.cd();X=Array(ma);for(P=0;P<ma;++P)X[4*P]=Ca[0][P],X[4*P+1]=Ca[1][P],X[4*P+2]=Ca[2][P],X[4*P+3]=Ca[3][P]}return{format:A,data:X,width:R,height:T,isMirrorY:w.isMirrorY,isFlipY:"RGBA"===A?w.isFlipY:!w.isFlipY}}};w.isMipmap&&!Ta&&gb&&!sb&&(ca.Gb(),sb=!0);if(w.url)a(xa),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),Oa=new Image,Oa.df="Anonymous",Oa.crossOrigin=
"Anonymous",Oa.src=w.url,Oa.onload=function(){R=Oa.width;T=Oa.height;Z()};else if(w.D){var ac=function(){M();R?Z():setTimeout(ac,1)};ac()}else w.array?(w.P&&!w.isFloat?w.array instanceof Uint16Array?(ya=w.array,Z()):e()?(ya=d(w.array),Z()):(Z(),n.Ic(b,xa,ca.G(),ca.X(),w.array,Fa,!0)):(ya=w.isFloat?w.array instanceof Float32Array?w.array:new Float32Array(w.array):w.array instanceof Uint8Array?w.array:new Uint8Array(w.array),Z()),w.isKeepArray||(ya&&ya!==w.array&&(ya=null),delete w.array)):w.Nc?gb=
!0:Z();ca.Rf=ca.G;w.ja&&gb&&(w.ja(ca),w.ja=null);f.push(ca);return ca},T:function(g){g!==r&&(b.activeTexture(q[g]),r=g);l[g]=-1;a(null)},Ve:function(g){v.random.j(g)},mc:function(){x=null;b.framebufferTexture2D(oa.$a(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},reset:function(){0!==r&&b.activeTexture(q[0]);for(var g=0;g<q.length;++g)l[g]=-1;r=-1},rg:function(){r=-1},Oe:function(){for(var g=0;g<q.length;++g)n.T(g)},Kc:function(){v&&(v.random.remove(),v.nd.remove())},Jg:function(g,L){if("RGBA"===g.format||
"RGBE"===g.format){var M=new Image;M.src=g.data;M.onload=function(){n.instance({isMirrorY:g.isMirrorY,isFlipY:g.isFlipY,isFloat:!1,D:M,ja:function(O){if("RGBA"===g.format)L(O);else{var Z=g.width,Aa=g.height,Ba=n.instance({isMirrorY:g.isMirrorY,isFloat:!0,width:Z,height:Aa,isFlipY:g.isFlipY});oa.U();b.viewport(0,0,Z,Aa);E.set("s45");Ba.B();O.j(0);pa.o(!0,!0);n.T(0);L(Ba);da.flush();setTimeout(O.remove,50)}}})}}else"JSON"===g.format?L(n.instance({isFloat:!0,isFlipY:g.isFlipY,width:g.width,height:g.height,
array:new Float32Array(g.data)})):L(!1)},Cd:d,u:function(){x&&(Ea.U(),n.mc(),Ea.T());n.Oe();f.slice(0).forEach(function(g){g.remove()});f.splice(0);y=!1;h=0;"undefined"!==typeof Ia&&Ia.u();v=null}};return n}(),pa=function(){function a(h){var l={Y:null,L:null};l.Y=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,l.Y);h.bufferData(h.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),h.STATIC_DRAW);l.L=h.createBuffer();h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,l.L);h.bufferData(h.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,
1,2]),h.STATIC_DRAW);return l}var c=null,d=0,e=!1,m=[],p=-2,r=-2,q={reset:function(){r=p=-2},C:function(){e||(c=a(b),q.Pa(),e=!0)},instance:function(h){var l=d++,v=h.L?h.L.length:0,x="undefined"===typeof h.mode?b.STATIC_DRAW:h.mode,B=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,B);b.bufferData(b.ARRAY_BUFFER,h.Y instanceof Float32Array?h.Y:new Float32Array(h.Y),x);p=l;var t=null,I=null,y=null;if(h.L){t=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,t);var f=null;65536>h.L.length?(f=Uint16Array,
I=b.UNSIGNED_SHORT,y=2):(f=Uint32Array,I=b.UNSIGNED_INT,y=4);f=h.L instanceof f?h.L:new f(h.L);b.bufferData(b.ELEMENT_ARRAY_BUFFER,f,x);r=l}var H={xd:function(F){p!==l&&(b.bindBuffer(b.ARRAY_BUFFER,B),p=l);F&&za.dc()},ud:function(){r!==l&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,t),r=l)},bind:function(F){H.xd(F);H.ud()},hf:function(){b.drawElements(b.TRIANGLES,v,I,0)},jf:function(F,k){b.drawElements(b.TRIANGLES,F,I,k*y)},remove:function(){b.deleteBuffer(B);h.L&&b.deleteBuffer(t);H=null}};m.push(H);return H},
Pa:function(){-1!==p&&(b.bindBuffer(b.ARRAY_BUFFER,c.Y),p=-1);-1!==r&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.L),r=-1)},o:function(h,l){h&&pa.Pa();l&&za.Ka();b.drawElements(b.TRIANGLES,3,b.UNSIGNED_SHORT,0)},Xa:function(h){h=h||b;var l=a(h);h.bindBuffer(h.ARRAY_BUFFER,l.Y);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,l.L);za.sb(h);h.clear(h.COLOR_BUFFER_BIT);h.drawElements(h.TRIANGLES,3,h.UNSIGNED_SHORT,0);h.flush();h.bindBuffer(h.ARRAY_BUFFER,null);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null);h.deleteBuffer(l.Y);
h.deleteBuffer(l.L);q.reset();e&&(q.Pa(),za.Ka())},Kc:function(){var h=b,l=c;h.deleteBuffer(l.Y);h.deleteBuffer(l.L)},u:function(){q.Kc();m.forEach(function(h){h.remove()});b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);q.reset();e=!1;m.splice(0);d=0}};return q}(),oa=function(){var a=null,c=null,d=null,e=!1,m=[],p={K:-2,Hc:1},r={fb:function(){return e},C:function(){if(!e){a=b.createFramebuffer();var q=da.ba();c=q&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=
q&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;e=!0}},Jf:function(){return c},Wd:function(){return d},$a:function(){return b.FRAMEBUFFER},Qf:function(){return p},Af:function(){return a},instance:function(q){void 0===q.Qc&&(q.Qc=!1);var h=q.M?q.M:null,l=q.width,v=void 0!==q.height?q.height:q.width,x=a,B=null,t=!1,I=!1,y=0;h&&(l=l?l:h.G(),v=v?v:h.X());var f={hd:function(){t||(x=b.createFramebuffer(),t=!0,y=p.Hc++)},sd:function(){f.hd();f.B();B=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,
B);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,l,v);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,B);b.clearDepth(1)},bind:function(H,F){y!==p.K&&(b.bindFramebuffer(c,x),p.K=y);h&&h.B();F&&b.viewport(0,0,l,v);H&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},Ue:function(){y!==p.K&&(b.bindFramebuffer(c,x),p.K=y)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},$e:function(){b.clear(b.COLOR_BUFFER_BIT)},af:function(){b.clear(b.DEPTH_BUFFER_BIT)},Le:function(){b.viewport(0,
0,l,v)},B:function(){y!==p.K&&(b.bindFramebuffer(c,x),p.K=y)},rtt:function(H){h=H;p.K!==y&&(b.bindFramebuffer(b.FRAMEBUFFER,x),p.K=y);H.B()},T:function(){b.bindFramebuffer(c,null);p.K=-1},resize:function(H,F){l=H;v=F;B&&(b.bindRenderbuffer(b.RENDERBUFFER,B),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,l,v))},remove:function(){x===a||I||(b.bindFramebuffer(c,x),b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0),B&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,
null),b.bindFramebuffer(c,null),b.deleteFramebuffer(x),B&&b.deleteRenderbuffer(B));I=!0}};q.Qc&&f.sd();m.push(f);return f},T:function(){b.bindFramebuffer(c,null);p.K=-1},Pe:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);da.jd();p.K=-1},reset:function(){p.K=-2},U:function(){0!==p.K&&(b.bindFramebuffer(c,a),p.K=0)},clear:function(){da.jd();b.clear(b.COLOR_BUFFER_BIT)},u:function(){r.T();m.forEach(function(q){q.remove()});null!==a&&(b.deleteFramebuffer(a),a=null);
r.reset();e=!1;m.splice(0);p.Hc=1}};return r}(),da=function(){function a(){q="undefined"===typeof qb?JEContext:qb;h=!0}function c(k,G){for(var C=0;C<k.length;++C){var z=G.getExtension(k[C]);if(z)return z}return null}function d(){null!==f.wb&&(clearTimeout(f.wb),f.wb=null);f.ua=!1}function e(k){if(0===f.ka.length){f.la=b.PIXEL_PACK_BUFFER;f.ka.splice(0);f.ab.splice(0);for(var G=0;G<f.Da;++G)f.ka.push(b.createBuffer()),f.ab.push(-1);f.Z=0;f.Sb=0}b.bindBuffer(f.la,f.ka[f.Z]);k.byteLength!==f.ab[f.Z]&&
(b.bufferData(f.la,k.byteLength,b.STREAM_READ),f.ab[f.Z]=k.byteLength);f.Xf=!0}function m(){b.bindBuffer(f.la,null)}function p(){f.ra.forEach(function(k){b.deleteSync(k)});f.ra.splice(0)}function r(){f.Z=(f.Z+1)%f.Da;++f.Sb}var q=null,h=!1,l={Rc:!1,hc:null,ic:null,Tc:!1,le:!1,jc:null,Uc:!1,kc:null,Sc:!1,Ab:null,ee:!1,Bb:null,fe:!1},v=null,x={$:!0,aa:!0,Fb:!0,bd:!1},B=null,t=!0,I=null,y=null,f={Dd:1,Da:-1,Z:0,Sb:0,ua:!1,ka:[],ra:[],ab:[],la:null,wb:null},H="undefined"===typeof window?{}:window,F={C:function(){if(h)return!0;
F.reset();h||a();var k=b;if(!v.Rc){v.hc=F.Ec(k);H.GL_EXT_FLOAT=v.hc;v.Tc=v.hc?!0:!1;if(v.Tc||F.ba())v.ic=F.Fc(k),v.le=v.ic?!0:!1,H.GL_EXT_FLOATLINEAR=v.ic;v.Rc=!0}if(!v.Sc){v.jc=F.Wa(k);v.jc&&(v.Uc=!0,H.GL_EXT_HALFFLOAT=v.jc);if(v.Uc||F.ba())v.kc=F.Gc(k),H.GL_EXT_HALFFLOATLINEAR=v.kc;v.Yf=v.kc?!0:!1;v.Sc=!0}v.Ab=F.Cc(k);v.ee=v.Ab?!0:!1;H.GL_EXT_COLORBUFFERFLOAT=v.Ab;v.Bb=F.Dc(k);v.fe=v.Bb?!0:!1;H.GL_EXT_COLORBUFFERHALFFLOAT=v.Bb;oa.C();Pa.C();if(!F.Fd())return!1;pa.C();Pa.ce();return!0},reset:function(){v=
Object.assign({},l);B=Object.assign({},x)},G:function(){h||a();return q.G()},X:function(){h||a();return q.X()},ba:function(){h||a();return q.ba()},Bc:function(k){F.Cc(k);F.Dc(k);F.Ec(k);F.Fc(k);F.Wa(k);F.Gc(k)},Cc:c.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),Dc:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),Ec:c.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),
Fc:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),Wa:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),Gc:c.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),Hb:function(k){var G=F.Wa(k);return G&&G.HALF_FLOAT_OES?G.HALF_FLOAT_OES:k.HALF_FLOAT||k.FLOAT},Td:function(){return y||b.RGBA32F||b.RGBA},Ud:function(){return I||
b.RGBA16F||b.RGBA},Rd:function(){return B},xc:function(){return B.$},Ye:function(){return B.aa},Xe:function(){return B.Fb},zd:function(){return B.bd&&t},Hg:function(k){t=k;!k&&f.ua&&(p(),b.bindBuffer(f.la,null),f.ua=!1)},dg:function(){return f.ua},tb:function(k,G,C){function z(){k.bindTexture(k.TEXTURE_2D,null);k.bindFramebuffer(D,null);k.deleteTexture(u);k.deleteFramebuffer(S)}var D=k.FRAMEBUFFER,J=k.NEAREST,S=k.createFramebuffer();k.bindFramebuffer(D,S);var u=k.createTexture();k.activeTexture(k.TEXTURE0);
k.bindTexture(k.TEXTURE_2D,u);k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,!1);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,J);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,J);k.texImage2D(k.TEXTURE_2D,0,G,3,3,0,k.RGBA,C,null);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,u,0);if(k.checkFramebufferStatus(k.READ_FRAMEBUFFER||k.FRAMEBUFFER)!==k.FRAMEBUFFER_COMPLETE)return z(),
!1;za.cc(k);k.clearColor(0,0,0,0);k.viewport(0,0,3,3);k.disable(k.DEPTH_TEST);k.clear(k.COLOR_BUFFER_BIT);pa.Xa(k);k.bindFramebuffer(D,null);za.Ja(k);k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,u);pa.Xa(k);G=new Uint8Array(36);k.readPixels(0,0,3,3,k.RGBA,k.UNSIGNED_BYTE,G);z();for(C=0;36>C;++C)if(3!==C%4&&3<Math.abs(G[C]-127))return!1;return!0},Db:function(k){var G={$:!1,aa:!1};k.disable(k.BLEND);k.clearColor(0,0,0,0);k.clear(k.COLOR_BUFFER_BIT);k.RGBA32F&&F.tb(k,k.RGBA32F,k.FLOAT)&&(G.$=
!0,y=k.RGBA32F);!G.$&&F.tb(k,k.RGBA,k.FLOAT)&&(G.$=!0,y=k.RGBA);var C=F.Hb(k);I=null;k.RGBA16F&&F.tb(k,k.RGBA16F,C)&&(G.aa=!0,I=k.RGBA16F);!G.aa&&F.tb(k,k.RGBA,C)&&(G.aa=!0,I=k.RGBA);return G},Gd:function(){var k=oa.instance({width:2});k.hd();var G=Pa.instance({width:2,isFloat:!0,ib:3});k.B();G.B();F.flush();b.checkFramebufferStatus(oa.Wd())!==b.FRAMEBUFFER_COMPLETE?(Pa.Ge(),B.Fb=!1):B.Fb=!0;k.remove();G.remove()},Hd:function(){var k=!1;F.ba()&&(k="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(G){return"undefined"!==
typeof b[G]}));B.bd=k},Fd:function(){var k=F.Db(b);Object.assign(B,k);if(!B.$&&!B.aa)return!1;F.Gd();F.Hd();return!0},Be:function(k,G,C,z,D){b.readPixels(k,G,C,z,b.RGBA,b.UNSIGNED_BYTE,D);return Promise.resolve(D,!1)},$b:function(k,G,C,z,D,J,S){if(!F.zd())return F.Be(k,G,C,z,D);f.Da=S||f.Dd;e(D);b.readPixels(k,G,C,z,b.RGBA,b.UNSIGNED_BYTE,0);f.ra[f.Z]=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);F.flush();var u=!1;return new Promise(function(n,g){function L(){if(!f.ua)return d(),m(),r(),g(),!1;var M=
(f.Z+1)%f.Da;switch(b.clientWaitSync(f.ra[M],0,0)){case b.TIMEOUT_EXPIRED:case b.WAIT_FAILED:break;default:return d(),b.deleteSync(f.ra[M]),f.ra[M]=null,b.bindBuffer(f.la,f.ka[M]),b.getBufferSubData(f.la,0,D),m(),r(),n(D,u),!0}f.wb=setTimeout(L,0);return!1}d();f.Sb+1<f.Da?(m(),r(),n(D,!1)):(f.ua=!0,L()||!J||u||(u=!0,J()))})},jd:function(){b.viewport(0,0,F.G(),F.X())},flush:function(){b.flush()},u:function(){d();p();Pa.u();oa.u();pa.u();f.ka.forEach(function(k){b.deleteBuffer(k)});f.ka.splice(0);za.reset();
h=!1}};return F}(),aa=pa,Ea=oa,ba=Pa,Ia=function(){function a(C,z,D,J){f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,J?f.NEAREST_MIPMAP_NEAREST:f.LINEAR);var S=null;if(null!==D)try{S=f.getError();if("FUCKING_BIG_ERROR"===S)return!1;f.texImage2D(f.TEXTURE_2D,0,C,4,4,0,f.RGBA,z,D);S=f.getError();if(S!==f.NO_ERROR)return!1}catch(u){return!1}J&&f.generateMipmap(f.TEXTURE_2D);f.clear(f.COLOR_BUFFER_BIT);aa.Xa(f);S=f.getError();if("FUCKING_BIG_ERROR"===S)return!1;f.readPixels(0,0,2,2,f.RGBA,f.UNSIGNED_BYTE,
v);S=f.getError();S===f.INVALID_OPERATION&&"undefined"!==typeof f.PIXEL_PACK_BUFFER&&(f.bindBuffer(f.PIXEL_PACK_BUFFER,null),f.readPixels(0,0,2,2,f.RGBA,f.UNSIGNED_BYTE,v),S=f.getError());if(S!==f.NO_ERROR)return!1;D=!0;for(J=0;16>J;++J)D=D&&4>Math.abs(v[J]-127);D&&(h.ad=z,h.Pc=C);return D}function c(C,z){return H.$&&a(C,f.FLOAT,new Float32Array(x),z)?(q=r.qc,!0):!1}function d(C,z,D){if(!H.aa)return!1;var J=Pa.Cd(x),S=da.Wa(f);if(S&&S.HALF_FLOAT_OES&&a(C,S.HALF_FLOAT_OES,J,z)||f.HALF_FLOAT&&a(C,f.HALF_FLOAT,
J,z))return q=r.xa,!0;J=new Float32Array(x);if(a(C,f.FLOAT,J,z))return q=r.xa,!0;f.bindTexture(f.TEXTURE_2D,D);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,2,2,0,f.RGBA,f.UNSIGNED_BYTE,null);f.bindFramebuffer(h.Ua,G);Pa.Ic(f,D,2,2,J,!1,!1);f.bindFramebuffer(h.Ua,null);f.bindTexture(f.TEXTURE_2D,D);return a(C,null,null,z)?(q=r.xa,!0):!1}function e(C,z,D){l=!0;if(d(C,!0,D)||c(z,!0))return!0;l=!1;return d(C,!1,D)||c(z,!1)?!0:!1}function m(C){if(q===r.R){f=C||b;q=r.RGBA8;l=!0;da.Bc(f);H||(H=da.Db(f));Ea.reset();
G=f.createFramebuffer();h.Ua=f.DRAW_FRAMEBUFFER||f.FRAMEBUFFER;f.bindFramebuffer(h.Ua,null);f.clearColor(0,0,0,0);f.viewport(0,0,2,2);E.R();F=E.Ja(f);C=f.createTexture();f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,C);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);k=C;var z=C=f.RGBA,D=f.RGBA16F,J=f.RGBA32F;J&&(C=J);D&&(z=D);if((D||J)&&e(z,C,k))return p(),!0;C=z=f.RGBA;
if(e(z,C,k))return p(),!0;q=r.RGBA8;p();return!1}}function p(){f.deleteProgram(F.oa);f.deleteTexture(k);k=F=null}for(var r={R:-1,qc:3,xa:2,RGBA8:0},q=r.R,h={ad:null,Pc:null,Ua:null},l=!0,v=new Uint8Array(16),x=Array(64),B=0;4>B;++B)for(var t=0;4>t;++t){var I=0===(t+B)%2?1:0,y=4*B+t;x[4*y]=I;x[4*y+1]=I;x[4*y+2]=I;x[4*y+3]=I}var f=null,H=null,F=null,k=null,G=null;return{yd:function(C){m(C);return l},wc:function(C,z){q===r.R&&(typeof("undefined"!==z)&&(H=z),m(C));return q!==r.RGBA8},ag:function(C){m(C);
return q===r.qc},me:function(C){m(C);return q===r.xa},Kf:function(C){m(C);return h.ad},Vd:function(C){m(C);return h.Pc},u:function(){f=null;l=!0;q=r.R;H=null}}}(),cc=function(){return{instance:function(a){var c=null,d=!1,e=!1,m=null,p=!1,r=!1,q=null,h="undefined"===typeof a.preprocessing?!1:a.preprocessing,l="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(d=!0,SETTINGS&&void 0!==SETTINGS.td&&(a.mask=SETTINGS.td+a.mask),c=ba.instance({isFloat:!1,url:a.mask}));var v=!1;
a.customInputShader&&(v="s46",E.rc({name:"_",id:v,g:a.customInputShader,Ig:["uSource"],precision:"lowp"}),E.O(v,[{type:"1i",name:"_",value:0}]));switch(h){case "sobel":q="s33";p=!0;break;case "meanNormalization":q="s34";p=!0;break;case "grayScale":q="s30";p=!1;break;case "grayScaleTilt":q="s31";r=!0;p=!1;break;case "rgbGrayTilt":q="s32";r=!0;p=!1;break;case "copy":q=v?v:"s0";break;case "inputLightRegulation":q=v?v:"s30";m=lc.instance({Oc:l,$c:a.size,Wc:a.nBlurPass,eb:!1});e=!0;break;case "inputMix0":q=
"none";m=mc.instance({I:l,pd:a.varianceMin,vc:a.blurKernelSizePx,gain:a.gain||1,eb:!1});e=!0;break;case "direct":case "none":q="abort";break;default:q="s4"}r&&E.O(q,[{name:"u27",type:"1f",value:a.tilt}]);d&&(q+="Mask");var x=ba.instance({isFloat:!1,isPot:!1,width:a.size}),B={G:function(){return l},Ib:function(){return B.G()},$d:function(){return e?m.Jb():x},N:function(t){Ea.U();"abort"!==q&&("none"!==q&&(E.set(q),p&&E.V("u28",1/a.size),x.ea(),d&&c.j(1),aa.o(!1,!1),x.j(0),t=x),e&&m.process(t))},u:function(){x.remove();
d&&c.remove()}};return B}}}(),dc=function(){return{instance:function(a){function c(z){m.forEach(function(D,J){p[J][0]=z[0][D];p[J][1]=z[1][D];p[J][2]=z[2][D];p[J][3]=z[3][D]});return p}a.normalize=a.normalize||!1;var d={input:null,bias:null,Ob:null,da:null,mb:null,Xb:null,Yb:null},e=null,m=[],p=[],r=!1,q=null,h=!0,l=-1,v=a.isReorganize?a.isReorganize:!1,x=a.kernelsCount?!0:!1,B=["s27","s28","s29"][a.shiftRGBAMode||0],t={isEnabled:!1};a.ke?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.pb.Ib(),
h=!1):"full"===a.connectivityUp&&(a.sparsity=a.pb.Ib());var I={elu:"s16",elu01:"s17",relu:"s15",arctan:"s18",arctan2:"s19",sigmoid:"s14",copy:"s0"}[a.activation],y=a.sparsity*a.sparsity,f=!1,H=a.size,F="";if(a.maxPooling){switch(a.maxPooling.size){case 2:F="s35";break;case 4:F="s36"}f=!0;H/=a.maxPooling.size;d.Xb=ba.instance({isFloat:!0,isPot:!1,width:H})}var k=-1,G=null;h&&(d.da=ba.instance({isFloat:!0,isPot:!1,width:a.size}));d.bias=ba.instance(a.bias);var C={G:function(){return a.size},Ib:function(){return H},
Lc:function(){return a.classesCount},vd:function(z){e.j(z)},ue:function(){a.remap&&a.remap.isEnabled&&(t={isEnabled:!0,pe:ba.instance(a.remap.maskTexture),gb:a.remap.layers.map(function(z){return a.parent.Yd(z)}),depth:a.remap.depth})},He:function(){switch(a.connectivityUp){case "direct":G=nc.instance(a.connectivity);break;case "square":G=oc.instance(a.connectivity);break;case "squareFast":G=pc.instance(a.connectivity,a.activation);break;case "full":G=qc.instance(a.connectivity);break;case "conv":l=
a.kernelsCount,G=rc.instance(a.connectivity),v&&(d.mb=ba.instance({width:H,isFloat:!0,isFlipY:!1,isPot:!1}))}if(G.va){var z=a.size*a.sparsity;k=Math.log(z/a.size)/Math.log(2);d.input=ba.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:z,Qb:k});d.Ob=ba.instance({isFloat:!0,isPot:!0,width:a.size})}},N:function(z,D){e=z;G.va?(d.input.ea(),x&&d.bias.j(2),G.N(t),d.input.j(0),d.input.Pd(k),d.Ob.ea(),x?E.set("s0"):(E.set(B),E.V("u4",y),d.bias.j(1)),d.input.wd(k,0),aa.o(!1,!1),E.set(I),d.da.B(),d.Ob.j(0),
aa.o(!1,!1)):(d.da.ea(),d.bias.j(1),G.N());if(h)return f?(d.Xb.ea(),d.da.j(0),E.set(F),E.pa("u10",1/a.size,1/a.size),aa.o(!1,!1),D=d.Xb):D=d.da,D.j(0),v&&(d.mb.B(),E.set("s21"),E.pa("u14",l,H/l),aa.o(!1,!1),D=d.mb,d.mb.j(0)),D;var J=d.da;a.normalize&&(E.set("gpuRawAvg"===r?"s9":"s8"),E.V("u6",1/a.size),d.Yb.ea(),d.da.j(0),aa.o(!1,!1),J=d.Yb);z=null;switch(r){case "cpuRGBA2Float":J.Ac(!1);D?z=C.we(J).then(q):(J=C.xe(J),q(J));break;case "cpuMeanFloat":J.Ac(!0);if(D)z=J.ze().then(q);else{J=J.Ae();for(var S=
0;S<J.length;++S);q(J)}break;case "gpuRawAvg":case "gpuRaw":J.j(0);case "none":null!==q&&q(J)}D&&null===z&&(z=Promise.resolve());return z},Ed:function(z){z&&(r=z.Zb||"none",q=z.Wb||null);d.da=ba.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:a.size});z="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var D=0,J=0,S=0;D<z;++D)m.push(J+(a.size-1-S)*a.size),p.push([-1,-1,-1,-1]),++J,J===a.size&&(J=0,++S);a.normalize&&(d.Yb=ba.instance({isFloat:!0,isPot:!0,width:a.size}))},
we:function(z){return z.ye().then(c)},xe:function(z){z=z.cd();c(z);return p},u:function(){for(var z in d){var D=d[z];D&&D.remove()}G&&(G.u(),G=null)}};a.pb&&C.He(a.pb);return C}}}(),nc=function(){return{instance:function(a){var c=ba.instance(a.weights);return{va:!0,Za:function(){return 1},u:function(){c.remove()},be:function(){return c},N:function(){E.set("s26");c.j(1);aa.o(!1,!1)}}}}}(),qc=function(){return{instance:function(a){var c=a.fromLayerSize,d=ba.instance(a.weights);return{va:!0,Za:function(){return c},
u:function(){d.remove()},N:function(e){if(e.isEnabled){E.set("s24");e.pe.j(3);for(var m=Math.min(e.gb.length,e.depth),p=0;p<m;++p)e.gb[p].vd(4+p)}else E.set("s23");E.V("u18",a.toLayerSize);E.V("u19",a.fromLayerSize);d.j(1);aa.o(!1,!1)}}}}}(),oc=function(){return{instance:function(a){for(var c=a.fromLayerSize,d=a.toLayerSize,e=a.toSparsity,m=e*d,p=m/c,r=c/d,q=0,h=0,l=0,v=Array(e*d*e*d*4),x=Array(e*d*e*d*4),B=Array(c*c),t=0;t<B.length;++t)B[t]=0;t=Math.floor(e/2);for(var I=.5/d,y=.5/c,f=.5/m,H=0;H<
d;++H)for(var F=Math.round(H*r),k=0;k<d;++k){var G=Math.round(k*r),C=H/d,z=k/d;C+=I;z+=I;for(var D=0;D<e;++D){var J=F+D-t;0>J&&(J+=c);J>=c&&(J-=c);for(var S=0;S<e;++S){var u=q/m,n=h/m,g=G+S-t;0>g&&(g+=c);g>=c&&(g-=c);var L=J/c,M=g/c;n=1-n-1/m;L+=y;M+=y;u+=f;n+=f;var O=H*e+D,Z=k*e+S;Z=d*e-Z-1;O=Z*d*e+O;v[4*O]=u;v[4*O+1]=n;v[4*O+2]=L;v[4*O+3]=M;M=B[g*c+J]++;O=M%p;L=J*p+O;g=g*p+(M-O)/p;g=c*p-1-g;g=g*c*p+L;x[4*g]=u;x[4*g+1]=n;x[4*g+2]=C;x[4*g+3]=z;++q>=m&&(q=0,++h);++l}}}B=null;var Aa=ba.instance(a.weights);
delete a.weights.data;var Ba=ba.instance({width:m,isFloat:!0,array:new Float32Array(x),isPot:!0});x=null;var Ja=ba.instance({width:m,isFloat:!0,array:new Float32Array(v),isPot:!0});v=null;return{va:!0,Za:function(){return p},u:function(){Ba.remove();Ja.remove();Aa.remove()},N:function(){E.set("s22");Aa.j(1);Ja.j(2);aa.o(!1,!1)}}}}}(),rc=function(){return{instance:function(a){var c=a.kernelsCount,d=a.toSparsity,e=d*a.toLayerSize/a.fromLayerSize,m=a.inputScale||[1,1],p=ba.instance(a.weights);return{va:!0,
Za:function(){return e},Tf:function(){return d},be:function(){return p},u:function(){p.remove()},N:function(){E.set("s25");E.Je("u26",m);E.V("u24",c);E.V("u25",d);E.V("u18",a.toLayerSize);E.V("u19",a.fromLayerSize);p.j(1);aa.o(!1,!1)}}}}}(),pc=function(){return{instance:function(a,c){var d=a.fromLayerSize,e=a.toLayerSize,m=a.toSparsity,p=a.stride?a.stride:1,r=m*e/d,q=e<d,h=d/e,l=ba.instance(a.weights),v="s47"+[d.toString(),e.toString(),m.toString(),p.toString(),c].join("_");E.Od(v)||(a=jc.Qd(c,"gl_FragColor",
"gl_FragColor"),e=[{type:"1f",name:"u18",value:e},{type:"1f",name:"u30",value:p}],q&&e.push({type:"1f",name:"u19",value:d}),d=[(q?r:m).toFixed(1),a],q&&d.push(h.toFixed(1)),E.de(q?"s41":"s40",v,d),E.O(v,e.concat([{type:"1i",name:"u16",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u15",value:3}])));return{va:!1,Za:function(){return r},u:function(){l.remove()},N:function(){E.set(v);l.j(3);aa.o(!1,!1)}}}}}(),lc=function(){return{instance:function(a){var c=a.Wc?a.Wc:3,d=a.Oc?a.Oc:64,e=a.$c?
a.$c:64,m=a.eb?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var p=ba.instance(a),r=ba.instance(a),q=ba.instance(a),h=ba.instance(a),l=ba.instance({isFloat:!0,width:e,isPot:!1,isFlipY:!1}),v=1/d;return{process:function(x){E.set("s37");h.B();aa.o(m,!1);E.set("s38");for(var B=0;B<c;++B)p.B(),E.pa("u10",v,0),aa.o(m,!1),q.B(),h.j(0),aa.o(m,!1),r.B(),p.j(0),E.pa("u10",0,v),aa.o(m,!1),h.B(),q.j(0),aa.o(m,!1),B!==c-1&&r.j(0);E.set("s39");l.B();x.j(0);r.j(1);h.j(2);aa.o(m,!1);l.j(0)},Jb:function(){return l}}}}}(),
mc=function(){return{instance:function(a){function c(v){return ba.instance({isFloat:v,width:d.I,isPot:!1,isFlipY:!1})}var d=Object.assign({pd:.1,vc:9,I:128,gain:1,eb:!1},a),e=c(!1),m=[c(!1),c(!1),c(!1)],p=[c(!1),c(!1),c(!1)],r=c(!0),q=[e,p[0],p[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u31;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u31*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.vc-1)/2).toFixed(2)).replace("2.2222",(1/d.I).toFixed(6));var h="uniform sampler2D u32,u33,u34,u35;const float f=1.1111;const vec3 g=vec3(1.,1.,1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u32,vv0).rgb;float c=texture2D(u33,vv0).r,d=texture2D(u34,vv0).r,i=texture2D(u35,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(j-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.pd.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),l={u1:0};E.sc([{id:"s49",
name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.,1.,1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",l:l,i:["u1"],precision:"lowp"},{id:"s50",name:"_",g:a,l:l,i:["u1","u31"],precision:"lowp"},{id:"s51",name:"_",g:h,l:{u32:0,u33:1,u34:2,u35:3},i:["u32","u33","u34","u35"],precision:"highp"}]);return{process:function(){E.set("s49");e.ea();aa.o(d.eb,!1);E.set("s50");for(var v=0;3>v;++v)E.pa("u31",1,0),m[v].B(),
q[v].j(0),aa.o(!1,!1),E.pa("u31",0,1),p[v].B(),m[v].j(0),aa.o(!1,!1);E.set("s51");r.B();e.j(0);p[0].j(1);p[1].j(2);p[2].j(3);aa.o(!1,!1);r.j(0)},Jb:function(){return r}}}}}(),Cb=function(){function a(y,f,H,F,k,G,C){if(!t)if(C===G.length)k();else{switch(G[C]){case "A":H();break;case "D":y();break;case "S":f().then(function(z,D){I.ld();a(y,f,H,D?null:F,k,G,++C)}).catch(function(z){console.log("An error occurred in the WebAR loop: ",z);k()});return;case "R":F&&F()}a(y,f,H,F,k,G,++C)}}var c={n:5,Rb:1,
oe:0,Ya:[35,49],Va:[2,200],k:.7,Qe:200,se:.05},d=-1,e=null,m=-1,p=-1,r=0,q=-1,h=-1,l=0,v=0,x=c.Va[1],B=Math.log(2),t=!0,I={Zd:function(){switch(d){case -1:return-1;case 0:return h+e.oe;case 1:return l}},Cf:function(y){return Math.pow(Math.min(Math.max(q,0),e.n-1)/(e.n-1),y||1)},C:function(y){e=Object.assign({},c,y);q=h=e.Rb;d=0;I.reset()},ld:function(y){y=("undefined"===typeof y?Date.now():y)||0;var f=Math.min(Math.max(y-v,e.Va[0]),e.Va[1]);x=f;v=y;var H=-1===m?0:e.k;m=Math.min(Math.max(1E3/f,5),
120)*(1-H)+m*H;y-p>e.Qe&&5<++r&&(f=e.k,q=q*(1-f)+(m<e.Ya[0]?h-1:m>e.Ya[1]?h+1:h)*f,Math.abs(q-h)>1-e.se&&(f=Math.min(Math.max(Math.round(q),0),e.n-1),f!==h&&(q=h=f,m=(e.Ya[1]-e.Ya[0])/2)),p=y)},sg:function(y,f,H,F,k,G){t=!1;a(y,f,H,F,k,G,0)},stop:function(){t=!0},vg:function(y){l=y;d=1},Kg:function(){d=0;I.reset()},reset:function(){x=c.Va[1];p=m=-1;r=0},Gg:function(y,f,H){H=Math.exp(-B*x/H);return(1-H)*y+H*f},Hf:function(){return x}};return I}(),Mb=function(){function a(x,B){var t=x[0]-.5;x=x[1]-
.5;var I=B[0]-.5;B=B[1]-.5;return t*t+x*x-(I*I+B*B)}var c={Xc:4,ob:[1.5,1.5,2],F:[.1,.1,.1],fd:1,I:-1,S:-1,Me:2,Zc:1,bc:!0,Kd:.8},d=null,e=[],m=[],p=[],r=[0],q=[.5,.5,1],h=null,l=0,v=[0,0,0];return{C:function(x){d=Object.assign({},c,x);e.splice(0);m.splice(0);p.splice(0);l=0;x=d.ob[0]*d.F[0];var B=d.ob[1]*d.F[1],t=1/(1+d.ob[2]*d.F[2]),I=d.fd*Math.min(d.I,d.S),y=I/d.I;I/=d.S;var f=.5*d.Kd;f*=f;for(var H=0;H<d.Xc;++H){var F=[];m.push(F);var k=Math.pow(t,H),G=y*k,C=I*k;k=G*d.Zc;p.push(k);var z=G*x,D=
C*B;G/=2;C/=2;for(var J=1+(1-G-G)/z,S=1+(1-C-C)/D,u=0;u<S;++u)for(var n=C+u*D,g=n-.5,L=0;L<J;++L){var M=G+L*z,O=M-.5;O*O+g*g>f||(M=[M,n,k],e.push(M),F.push(M))}d.bc&&F.sort(a);h=e}d.bc&&e.sort(a)},get:function(x){var B=h.length;if(0===B)return q;for(;x>=r.length;)r.push(0);r[x]>=B&&(r[x]=0);var t=h[Math.floor(r[x])%B];r[x]=(r[x]+1/d.Me)%B;if(0===l)return t;v[0]=t[0];v[1]=t[1];v[2]=l;return v},mg:function(x){x>=r.length||(r[x]=Math.floor(Math.random()*h.length))},wg:function(x){l=x;if(0===l)h=e;else{for(var B=
Infinity,t=-1,I=p.length,y=0;y<I;++y){var f=x-p[y];f*=f;f<B&&(B=f,t=y)}h=m[t]}},reset:function(){for(var x=e.length/r.length,B=0;B<r.length;++B)r[B]=Math.floor(B*x);l=0;h=e}}}(),fa={Qa:512,F:[.05,.05,.15],De:{nScaleLevels:3,scale0Factor:.8,scaleFactor:1,overlapFactors:[2,2,3],scanCenterFirst:!0,scaleXRange:[1/15,.9],lockStabilizeEnabled:!0,rawNNOutputTranslationScalingOffsets:[0,0,0],lockStabilizeDxysRanges:[[.5,1],[.5,1],[.5,1]]},qe:3,lc:.68,lb:10,hb:.03,na:8,ub:-.02,Ra:.02,La:.7,jb:20,Sa:.3,Na:[.02,
10],kb:[1,6],re:3},ua=Object.create(fa.De),Ab=0,Nb=0,Xa=0,Bb=!1,U={width:-1,Pb:!0,Fa:!1,cb:!1,ed:null,fc:!1,pitchRange:null,F:fa.F},va={oc:0,pitch:0,ac:0,Ub:!0},Sa=null,wa=null,ab=!1,Va=!1,Ga=0,db=null,K=null,sc={aspectRatio:1,Nb:1,sa:[1,1],I:0,S:0,ga:0,fa:0,Ea:"s52",J:{Ba:[0,0],scale:[1,1]}},V={M:null,m:[0,0,0,0]},ia={ia:-2,LOADING:-1,ya:0,xb:1,pc:2,Oa:3},qa=ia.ia,Za={ia:-2,LOADING:1,IDLE:0},fb=Za.ia,Ha=null;var Ob=ea=0;var eb=-1;var Y={n:0,Yc:0,Tb:0,H:-1,W:[0,0]},$a={video:0,qd:1},Na={undefined:0,
video:1,yc:2,Eb:3},Q=null,tc={current:$a.video,element:null,M:null,ta:!1,type:Na.undefined,time:-1,qa:null},Wb=!1,ha={distance:0,label:!1,positionScale:[0,0,0,0],detectScore:0,yaw:0,pitch:0,roll:0,NNInputWidth:-1},yb=1,hc={cutShader:null,thresholdDetectFactor:1,thresholdDetectFactorUnstitch:1,isSkipConfirmation:!1,isKeepTracking:!1,trackingFactors:[2,2,2],secondNeighborFactor:fa.La,nLocateAutomoves:fa.lb,locateMoveNoiseAmplitude:fa.hb,nConfirmAutoMoves:fa.na,nConfirmUnstitchMoves:fa.jb,confirmMoveNoiseAmplitude:fa.Ra,
thresholdConfirmOffset:fa.ub,tiltPosAngleIfAmbiguousDetection:fa.Na,confirmScoreMinFactorDuringAutoMove:fa.Sa},na={},W={vb:1,kd:1,Ha:!1,bb:!1,md:null,La:fa.La,lb:-1,hb:-1,na:-1,ub:-1,Ra:-1,jb:-1,Na:null,Sa:-1},Qb=[{type:"1f",name:"u36",value:0}],ob={VERSION:"1.3.6",init:function(a){function c(d){a.callbackReady&&a.callbackReady(d)}if(qa!==ia.ia)return c("ALREADY_INITIALIZED");qa=ia.LOADING;K=Object.assign({},sc);Q=Object.assign({},tc);if("undefined"!==typeof a.canvas)wa=a.canvas,ab=!1;else if("undefined"===
typeof a.canvasId)wa=document.createElement("canvas"),ab=!1;else{wa=document.getElementById(a.canvasId);if(!wa)return c("INVALID_CANVASID"),!1;ab=!0}"undefined"!==typeof a.isDebugRender&&(ab=a.isDebugRender);ab&&(wa.style.display="block");a.scanSettings&&Object.assign(ua,a.scanSettings);a.canvasSize&&(fa.Qa=a.canvasSize);Cb.C({n:fa.kb[1]-fa.kb[0]+1,Rb:fa.re-fa.kb[0]});Va="undefined"===typeof a.followZRot?!1:a.followZRot;db="undefined"===typeof a.ZRotRange?null:a.ZRotRange;Wb="undefined"!==typeof WorkerGlobalScope&&
"undefined"!==typeof self&&self instanceof WorkerGlobalScope;-1!==fa.Qa&&(wa.width=fa.Qa,wa.height=fa.Qa);ob.set_source(a.video,a.videoCrop);if(!qb.C({Ta:wa,width:wa.width,height:wa.height,debug:!1,Vb:c.bind(null,"GLCONTEXT_LOST"),premultipliedAlpha:!1}))return c("GL_INCOMPATIBLE"),!1;Q.current===$a.video&&(Rb(Q.element),Ya());gc();wb();qa=ia.ya;c(!1);return!0},set_source:function(a,c){"undefined"!==typeof a&&a?(Q.element=a,Q.current=$a.video,Q.element.isFakeVideo?(K.ga=Q.element.videoWidth,K.fa=
Q.element.videoHeight,Q.type=Na.Eb):"VIDEO"===a.tagName?(K.ga=Q.element.videoWidth,K.fa=Q.element.videoHeight,Q.type=Na.video):(K.ga=Q.element.width,K.fa=Q.element.height,Q.type=Na.yc),Jb(c)):Q.current=$a.qd;-1===[ia.ia,ia.LOADING].indexOf(qa)&&(Q.qa&&Q.qa.D&&(Q.qa.D=a),Ya(),wb(),Q.type===Na.yc&&Q.M.refresh())},set_NN:function(a,c,d){if(fb===Za.LOADING)c&&c("NN_LOADING");else{var e=function(m){fb=Za.IDLE;c&&c(m)};fb=Za.LOADING;"string"===typeof a?pb.get(a,function(m){if(!m)return e("INVALID_NN");
var p=null;try{p=JSON.parse(m)}catch(r){return e("INVALID_NN")}Sb(p,e,d)},function(){e("NOTFOUND_NN")}):Sb(a,e,d)}},reset_state:function(){Pb();qa=ia.ya},destroy:function(){ob.reset_state();Sa&&Sa.u();qb.u();fb=Za.ia;qa=ia.ia;return Promise.resolve()},detect_async:function(a,c,d){var e,m;return bc(new Ib(new mb(function(p){switch(p.ca){case 1:e=Tb(a,c,d);if(-1===e)return p.return(ha);m=0;case 2:if(!(m<e)){p.ca=4;break}Ub(m,e);var r=Sa.te(V.M);p.ca=5;return{value:r};case 5:Ea.U();++m;p.ca=2;break;
case 4:return p.return(Vb())}})))},detect:function(a,c,d){a=Tb(a,c,d);if(-1===a)return ha;for(c=0;c<a;++c)Ub(c,a),Sa.N(V.M),Ea.U();return Vb()},get_aspectRatio:function(){return K.I/K.S},set_scanSettings:function(a){Object.assign(ua,a);Ya()},set_videoCrop:function(a){Jb(a);wb();Ya()}};return ob}();
export default WEBARROCKSOBJECT;
