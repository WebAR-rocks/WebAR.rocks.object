/**
 * WebAR.rocks.object
 *
 * Copyright (c) 2020 WebAR.rocks ( https://webar.rocks )
 * This code is released under dual licensing:
 *   - GPLv3 
 *   - Nominative commercial license
 * Please read https://github.com/WebAR-rocks/WebAR.rocks.object/blob/master/LICENSE
 * 
*/var WEBARROCKSOBJECT=(function(){function cb(){this.Na=!1;this.la=null;this.Ad=void 0;this.ha=1;this.Rc=this.Kd=0;this.Da=null}function lb(M){if(M.Na)throw new TypeError("Generator is already running");M.Na=!0}cb.prototype.Qa=function(M){this.Ad=M};cb.prototype.Ua=function(M){this.Da={Wd:M,te:!0};this.ha=this.Kd||this.Rc};cb.prototype.return=function(M){this.Da={return:M};this.ha=this.Rc};function mb(M){this.s=new cb;this.Ge=M}
mb.prototype.Qa=function(M){lb(this.s);if(this.s.la)return ub(this,this.s.la.next,M,this.s.Qa);this.s.Qa(M);return vb(this)};function Hb(M,ea){lb(M.s);var ta=M.s.la;if(ta)return ub(M,"return"in ta?ta["return"]:function(va){return{value:va,done:!0}},ea,M.s.return);M.s.return(ea);return vb(M)}mb.prototype.Ua=function(M){lb(this.s);if(this.s.la)return ub(this,this.s.la["throw"],M,this.s.Qa);this.s.Ua(M);return vb(this)};
function ub(M,ea,ta,va){try{var Da=ea.call(M.s.la,ta);if(!(Da instanceof Object))throw new TypeError("Iterator result "+Da+" is not an object");if(!Da.done)return M.s.Na=!1,Da;var La=Da.value}catch(Qa){return M.s.la=null,M.s.Ua(Qa),vb(M)}M.s.la=null;va.call(M.s,La);return vb(M)}
function vb(M){for(;M.s.ha;)try{var ea=M.Ge(M.s);if(ea)return M.s.Na=!1,{value:ea.value,done:!1}}catch(ta){M.s.Ad=void 0,M.s.Ua(ta)}M.s.Na=!1;if(M.s.Da){ea=M.s.Da;M.s.Da=null;if(ea.te)throw ea.Wd;return{value:ea.return,done:!0}}return{value:void 0,done:!0}}function Ib(M){this.next=function(ea){return M.Qa(ea)};this.throw=function(ea){return M.Ua(ea)};this.return=function(ea){return Hb(M,ea)};this[Symbol.iterator]=function(){return this}}
function cc(M){function ea(va){return M.next(va)}function ta(va){return M.throw(va)}return new Promise(function(va,Da){function La(Qa){Qa.done?va(Qa.value):Promise.resolve(Qa.value).then(ea,ta).then(La,Da)}La(M.next())})}
window.WEBARROCKSOBJECT=function(){function M(a){var c=null,d=null,f=null,l=0,p=this,q=null,r={Pa:[],wb:"none",ec:!1,vb:null,grid:null,Ka:[1,1]};this.D=function(){this.Hd(q.Pa);f.Ve({wb:q.wb,ec:q.ec,vb:q.vb})};this.ie=function(h){return c[h]};this.Gb=function(h){["s31","s33","s26"].forEach(function(m){A.M(m,[{type:"2f",name:"u20",value:h}])});c&&c.forEach(function(m){m.Gb(h)})};this.Hd=function(h){var m=null;l=h.length;var t=null!==q.grid&&a.grid.length&&!(1===a.grid[0]&&1===a.grid[1]),w=t?q.grid:
[1,1];t&&this.Gb(w);c=h.map(function(x,F){x=Object.assign({},x,{index:F,parent:p,yb:m,we:F===l-1,wa:t,X:w,Ka:1===F?q.Ka:[1,1]});return m=F=0===F?dc.instance(x):ec.instance(x)});d=c[0];f=c[l-1];c.forEach(function(x,F){0!==F&&x.Fe()})};this.O=function(h){h.j(0);var m=h;c.forEach(function(t){m=t.O(m,!1)});return m};this.Ee=function(h){var m,t,w;return cc(new Ib(new mb(function(x){h.j(0);m=h;for(t=0;t<l-1;++t)w=c[t],m=w.O(m,!1);var F=c[l-1].O(m,!0);x.ha=0;return{value:F}})))};this.he=function(){return d.ge()};
this.le=function(){return f.L()};this.Ja=function(){return f.ke()};this.Tc=function(){return f.Tc()};this.u=function(){c&&(c.forEach(function(h){h.u()}),f=d=c=null,l=0)};"undefined"!==typeof a&&(q=Object.assign({},r,a),this.D())}var ea;function ta(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}function va(a,c,d){var f=1,l=0;for(d=c+d-1;d>=c;--d)l+=f*ta(a,d),f*=2;return l}function Da(a){a=a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var c=a.length,d=new Uint8Array(c),
f=0;f<c;++f)d[f]=a.charCodeAt(f);return d}function La(a){return"string"===typeof a?JSON.parse(a):a}function Qa(a){if("undefined"===typeof La(a).nb){var c=La(a);a=c.ne;var d=c.nf,f=c.n;c=Da(c);for(var l=new Float32Array(f),p=new Float32Array(d),q=a+d+1,r=0;r<f;++r){var h=q*r,m=0===ta(c,h)?1:-1,t=va(c,h+1,a);h=h+1+a;for(var w=p.length,x=0,F=h;F<h+w;++F)p[x]=ta(c,F,!0),++x;for(w=h=0;w<d;++w)h+=p[w]*Math.pow(2,-w-1);l[r]=0===h&&0===t?0:m*(1+h)*Math.pow(2,1+t-Math.pow(2,a-1))}a=l}else if(f=La(a),a=f.nb,
0===a)a=new Uint8Array(f.nb);else{d=f.n;f=Da(f);c=new Uint32Array(d);for(l=0;l<d;++l)c[l]=va(f,l*a,a);a=c}return a}function Jb(a){if(a){var c=a.w,d=a.h;J.J.Fa[0]=-1+2*(a.x+c/2)/J.ja;J.J.Fa[1]=-1+2*(a.y+d/2)/J.ia;J.J.scale[0]=c/J.ja;J.J.scale[1]=d/J.ia}else J.J.Fa[0]=0,J.J.Fa[1]=0,J.J.scale[0]=1,J.J.scale[1]=1;J.B=J.ja*J.J.scale[0];J.S=J.ia*J.J.scale[1]}function wb(){var a=[{type:"2f",name:"u40",value:J.J.Fa},{type:"2f",name:"u41",value:J.J.scale}],c=a.concat([{type:"1f",name:"u42",value:J.ja/J.ia}]);
A.M("s61",c);A.M("s62",c.concat([{name:"u14",type:"2f",value:[1/J.ja,1/J.ia]}]));A.M("s63",a)}function Ra(a,c,d){var f=wa.rawNNOutputTranslationScalingOffsets,l=-f[0]+Ma(a,c,"dx")*J.va[0],p=-f[1]+Ma(a,c,"dy")*J.va[1];a=-f[2]+d[2]*Ma(a,c,"ds");if(Va){c=Math.cos(Ga);f=Math.sin(Ga);var q=-f*l+c*p;l=c*l+f*p;p=q}l*=d[0];p*=d[1];d=V.o[2];c=V.o[3];V.o[0]-=l*d*T.G[0];V.o[1]-=p*c*T.G[1];V.o[2]-=a*d*T.G[2];V.o[2]=sa.Ga(V.o[2],wa.scaleXRange[0]*J.va[0],wa.scaleXRange[1]*J.va[0]);V.o[0]=sa.Ga(V.o[0],0,1);V.o[3]=
V.o[2]*J.aspectRatio/J.Xb;V.o[1]=sa.Ga(V.o[1],0,1)}function xb(a){var c=V.o[2],d=V.o[3],f=(2*Math.random()-1)*a,l=.5*(2*Math.random()-1)*a;V.o[0]+=(2*Math.random()-1)*a*c;V.o[1]+=f*d;V.o[2]+=l*c;V.o[3]=V.o[2]*J.aspectRatio/J.Xb}function Ma(a,c,d){c=Ha[c].cd[d];return(a[c][0]+a[c][1]+a[c][2]+a[c][3])/4}function Kb(a,c){if(T.Yb){if(T.qc){var d=Ma(a,c,"yaw");a=-Ma(a,c,"notHere");return Math.atan2(sa.Ga(a,-1,1),sa.Ga(d,-1,1))}return Math.PI*Ma(a,c,"yaw")}return 0}function Lb(a,c,d,f){c=Ha[c].cd[d];return(a[c][0]+
a[c][1]+a[c][2]+a[c][3])/4*(1-f)+f*Math.min(a[c][0],a[c][1],a[c][2],a[c][3])}function nb(a,c,d){var f=Lb(a,c,"here",d),l=0;0<yb&&!T.qc&&(l=yb*Lb(a,c,"notHere",d));return(f-l)/Ha[c].vc}function Wa(){Ga=0;Va&&null!==db&&(Ga=db[0]+Math.random()*(db[1]-db[0]));ra=ia.Ca;var a=Mb.get(0);a&&(V.o[0]=a[0],V.o[1]=a[1],V.o[2]=a[2],V.o[3]=a[2]*J.aspectRatio)}function fc(a,c){var d=.5+(V.o[0]-.5)/J.J.scale[0],f=.5+(V.o[1]-.5)/J.J.scale[1],l=V.o[2],p=V.o[3],q=ha.positionScale[0],r=ha.positionScale[1],h=ha.positionScale[2],
m=1;!xa.cc&&wa.lockStabilizeEnabled&&(m=wa.lockStabilizeDxysRanges,m=Math.max(zb.pc(m[0][0],m[0][1],Math.abs(q-d)/l*Xa*T.G[0]),zb.pc(m[1][0],m[1][1],Math.abs(r-f)/p*Xa*T.G[1]),zb.pc(m[2][0],m[2][1],Math.abs(h-l)/l*Xa*T.G[2])));T.Ma&&(xa.lc=sa.pa(xa.lc,Va?Ga:Ab,m),ha.roll=xa.lc);T.ob&&(xa.pitch=sa.pa(xa.pitch,Nb,m),ha.pitch=xa.pitch);T.Yb&&(xa.yc=sa.pa(xa.yc,a,m),ha.yaw=xa.yc);ha.label=Ha[Z.I].label;ha.distance=Ha[Z.I].Sd;ha.positionScale[0]=sa.pa(q,d,m);ha.positionScale[1]=sa.pa(r,f,m);ha.positionScale[2]=
sa.pa(h,l,m);ha.positionScale[3]=sa.pa(ha.positionScale[3],p,m);ha.detectScore=c}function gc(a){var c=-1,d=-1E12;-1!==[ia.Ca,ia.Hb].indexOf(ra)&&Ha.forEach(function(h,m){h=nb(a,m,0);h>d&&(d=h,c=m)});xa.cc=!0;switch(ra){case ia.Ca:ra=ia.Hb;Ra(a,c,[1,1,1]);ea=0;break;case ia.Hb:++ea;d>W.Eb?(W.Oa?(ra=ia.Wa,eb=c,Z.I=c,Z.bc=0):(ra=ia.zc,Ob=0,eb=c),Ra(a,eb,[1,1,1])):ea>fa.Be?Wa():Ra(a,c,[1,1,1]);break;case ia.zc:++Ob>W.ub&&(ra=ia.Wa,Z.n=0,Z.fd=0,Z.I=eb,Z.$[0]=0,Z.$[1]=0);Ra(a,eb,[1,1,1]);xb(W.qb);break;
case ia.Wa:if(xa.cc=!1,W.Oa||++Z.n>W.qa){var f=nb(a,Z.I,1);if(W.Oa||f>W.Eb+W.Db||W.mb){T.Ma&&(Ab=T.nd*Ma(a,Z.I,"roll"),Va&&(Ga+=Ab));if(Bb){var l=-1;l=W.Oa||W.mb?Kb(a,Z.I):Math.atan2(Z.$[1],Z.$[0]);if(T.ob){var p=.5+.5*Ma(a,Z.I,"pitch");Nb=T.pitchRange[0]+(T.pitchRange[1]-T.pitchRange[0])*p}fc(l,f)}W.mb?(Ra(a,Z.I,W.wd),f>W.ud?(Z.bc=0,ha.label||(ha.label=Ha[Z.I].label)):++Z.bc>W.sb&&Wa()):Bb?Wa():Ra(a,Z.I,[.5,.5,.5])}else Wa()}else{var q=1-(W.qa-Z.n)/(W.qa-1);f=1.5-1*q;Ra(a,Z.I,[f,f,f]);xb(W.$a*(1-
q));var r=nb(a,Z.I,q);r<W.Eb*q*W.ab?Wa():++Z.fd>10*W.qa?Wa():Ha.some(function(h,m){return Z.I===m?!1:nb(a,m,q)>r*(W.Ta*q+(1-q))?!0:!1})?(xb(W.Va[0]),Ga+=(2*Math.random()-1)*W.Va[1]*Math.PI/180,Z.n=0,Z.$[0]=0,Z.$[1]=0):(f=Kb(a,Z.I),Z.$[0]+=Math.cos(f),Z.$[1]+=Math.sin(f))}}}function hc(){A.Xa([{id:"s62",name:"_",Aa:"attribute vec2 a0;uniform vec4 u43;uniform vec2 u40,u41;uniform float u39,u42;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.);float a=u42*(u43.z/u43.w);a*=u41.x/u41.y;float b=cos(u39),c=sin(u39);vec2 f=mat2(b,-c*a,c/a,b)*a0,g=u40+f*u41,d=u43.xy+.5*u43.zw*g;vv0=vec2(d.x,1.-d.y);}",
g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec3 g=vec3(1.,1.,1.);vec3 c[9];void main(){vec2 d=vv0+.5*u14;c[0]=texture2D(u1,d-u14*vec2(-1.,-1.)).rgb,c[1]=texture2D(u1,d-u14*vec2(-1.,0.)).rgb,c[2]=texture2D(u1,d-u14*vec2(-1.,1.)).rgb,c[3]=texture2D(u1,d-u14*vec2(0.,-1.)).rgb,c[4]=texture2D(u1,d-u14).rgb,c[5]=texture2D(u1,d-u14*vec2(0.,1.)).rgb,c[6]=texture2D(u1,d-u14*vec2(1.,-1.)).rgb,c[7]=texture2D(u1,d-u14*vec2(1.,0.)).rgb,c[8]=texture2D(u1,d-u14*vec2(1.,1.)).rgb;vec3 a,b;a=min(c[0],c[1]),b=max(c[0],c[1]),c[0]=a,c[1]=b,a=min(c[0],c[2]),b=max(c[0],c[2]),c[0]=a,c[2]=b,a=min(c[0],c[3]),b=max(c[0],c[3]),c[0]=a,c[3]=b,a=min(c[0],c[4]),b=max(c[0],c[4]),c[0]=a,c[4]=b,a=min(c[0],c[5]),b=max(c[0],c[5]),c[0]=a,c[5]=b,a=min(c[0],c[6]),b=max(c[0],c[6]),c[0]=a,c[6]=b,a=min(c[0],c[7]),b=max(c[0],c[7]),c[0]=a,c[7]=b,a=min(c[0],c[8]),b=max(c[0],c[8]),c[0]=a,c[8]=b,a=min(c[1],c[2]),b=max(c[1],c[2]),c[1]=a,c[2]=b,a=min(c[1],c[3]),b=max(c[1],c[3]),c[1]=a,c[3]=b,a=min(c[1],c[4]),b=max(c[1],c[4]),c[1]=a,c[4]=b,a=min(c[1],c[5]),b=max(c[1],c[5]),c[1]=a,c[5]=b,a=min(c[1],c[6]),b=max(c[1],c[6]),c[1]=a,c[6]=b,a=min(c[1],c[7]),b=max(c[1],c[7]),c[1]=a,c[7]=b,a=min(c[1],c[8]),b=max(c[1],c[8]),c[1]=a,c[8]=b,a=min(c[2],c[3]),b=max(c[2],c[3]),c[2]=a,c[3]=b,a=min(c[2],c[4]),b=max(c[2],c[4]),c[2]=a,c[4]=b,a=min(c[2],c[5]),b=max(c[2],c[5]),c[2]=a,c[5]=b,a=min(c[2],c[6]),b=max(c[2],c[6]),c[2]=a,c[6]=b,a=min(c[2],c[7]),b=max(c[2],c[7]),c[2]=a,c[7]=b,a=min(c[2],c[8]),b=max(c[2],c[8]),c[2]=a,c[8]=b,a=min(c[3],c[4]),b=max(c[3],c[4]),c[3]=a,c[4]=b,a=min(c[3],c[5]),b=max(c[3],c[5]),c[3]=a,c[5]=b,a=min(c[3],c[6]),b=max(c[3],c[6]),c[3]=a,c[6]=b,a=min(c[3],c[7]),b=max(c[3],c[7]),c[3]=a,c[7]=b,a=min(c[3],c[8]),b=max(c[3],c[8]),c[3]=a,c[8]=b,a=min(c[4],c[5]),b=max(c[4],c[5]),c[4]=a,c[5]=b,a=min(c[4],c[6]),b=max(c[4],c[6]),c[4]=a,c[6]=b,a=min(c[4],c[7]),b=max(c[4],c[7]),c[4]=a,c[7]=b,a=min(c[4],c[8]),b=max(c[4],c[8]),c[4]=a,c[8]=b,gl_FragColor=vec4(c[4]*g,1.);}",
i:"u1 u43 u41 u40 u39 u42 u14".split(" "),precision:"lowp"},{id:"s61",name:"_",Aa:"attribute vec2 a0;uniform vec4 u43;uniform vec2 u40,u41;uniform float u39,u42;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.);float a=u42*(u43.z/u43.w);a*=u41.x/u41.y;float b=cos(u39),c=sin(u39);vec2 f=mat2(b,-c*a,c/a,b)*a0,g=u40+f*u41,d=u43.xy+.5*u43.zw*g;vv0=vec2(d.x,1.-d.y);}",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:"u1 u43 u41 u40 u39 u42".split(" "),precision:"lowp"},
{id:"s64",name:"_",Aa:"attribute vec2 a0;uniform vec4 u43;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.);vec2 a=u43.xy+.5*u43.zw*a0;vv0=vec2(a.x,1.-a.y);}",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec3 g=vec3(1.,1.,1.);float c[5];void main(){c[0]=texture2D(u1,vv0-u14*vec2(-1.,0.)).r,c[1]=texture2D(u1,vv0-u14*vec2(0.,-1.)).r,c[2]=texture2D(u1,vv0-u14).r,c[3]=texture2D(u1,vv0-u14*vec2(0.,1.)).r,c[4]=texture2D(u1,vv0-u14*vec2(1.,0.)).r;float a,b;a=min(c[0],c[1]),b=max(c[0],c[1]),c[0]=a,c[1]=b,a=min(c[0],c[2]),b=max(c[0],c[2]),c[0]=a,c[2]=b,a=min(c[0],c[3]),b=max(c[0],c[3]),c[0]=a,c[3]=b,a=min(c[0],c[4]),b=max(c[0],c[4]),c[0]=a,c[4]=b,a=min(c[1],c[2]),b=max(c[1],c[2]),c[1]=a,c[2]=b,a=min(c[1],c[3]),b=max(c[1],c[3]),c[1]=a,c[3]=b,a=min(c[1],c[4]),b=max(c[1],c[4]),c[1]=a,c[4]=b,a=min(c[2],c[3]),b=max(c[2],c[3]),c[2]=a,c[3]=b,a=min(c[2],c[4]),b=max(c[2],c[4]),c[2]=a,c[4]=b,gl_FragColor=vec4(c[2]*g,1.);}",
i:["u1","u43","u14"],precision:"lowp"},{id:"s63",name:"_",Aa:"attribute vec2 a0;uniform vec2 u40,u41;varying vec2 vv0;const vec2 f=vec2(1.,1.);void main(){gl_Position=vec4(a0,0.,1.);vec2 a=u40+a0*u41,b=(a+f)/2.;vv0=b;}",g:"uniform sampler2D u1;uniform vec4 u43;varying vec2 vv0;void main(){vec2 b=u43.xy-.5*u43.zw,c=u43.xy+.5*u43.zw,a=step(b,vv0)*step(vv0,c);vec4 d=texture2D(u1,vec2(vv0.x,1.-vv0.y));gl_FragColor=mix(d,vec4(0.,1.,0.,1.),a.x*a.y*.5);}",i:["u1","u43","u41","u40"],precision:"lowp"}]);var a=
[{type:"1i",name:"u1",value:0}];A.M("s62",a);A.M("s61",a);A.M("s64",a);A.M("s63",a);Pb()}function Pb(){Ga=0;A.M("s61",Qb);A.M("s62",Qb);ha.roll=0}function Ya(){J.aspectRatio=J.B/J.S;Mb.D({xb:wa.overlapFactors,ed:wa.nScaleLevels,gd:wa.scaleFactor,B:J.B,S:J.S,od:wa.scale0Factor,G:T.G,mc:wa.scanCenterFirst})}function Rb(a){P.ta={isFlipY:!1,isLinear:!0,width:J.B,height:J.S,isPot:!1,isFloat:!1};P.type===Na.Ob?Object.assign(P.ta,{isKeepArray:!0,array:a.arrayBuffer}):Object.assign(P.ta,{F:a});P.N=ba.instance(P.ta);
P.xa=!0}function Sb(a,c,d){if(!a.exportData||!a.exportData.labels)return c("INVALID_NN");var f=a.exportData;"undefined"===typeof f.paramsPerLabel&&(f.paramsPerLabel={});"undefined"!==typeof d&&d.paramsPerLabel&&(f.paramsPerLabel=Object.assign(f.paramsPerLabel,d.paramsPerLabel));ob.reset_state();Sa=new M({Pa:a.layers,wb:"cpuRGBA2Float",vb:gc});Xa=Sa.he();ha.NNInputWidth=Xa;V.N=ba.instance({isFloat:!1,isPot:!1,width:Xa});T.G=f.translationScalingFactors?f.translationScalingFactors:fa.G;f.rollMax?(T.nd=
f.rollMax,T.Ma=!0):T.Ma=!1;f.pitchRange?(T.pitchRange=f.pitchRange,T.ob=!0):T.ob=!1;f.splitYawComponents&&(T.qc=!0);"undefined"!==typeof f.isYaw&&(T.Yb=f.isYaw);T.width=Sa.le();a="undefined"===typeof d?{}:d;yb="undefined"===typeof a.notHereFactor?1:a.notHereFactor;a=f.labels;d="undefined"===typeof f.paramsPerLabel?!1:f.paramsPerLabel;var l="undefined"===typeof f.inputAspectRatio?1:f.inputAspectRatio,p=Math.sqrt(l);J.va[0]=p;J.va[1]=1/p;J.Xb=l;Ya();l=Array(a.length);for(p=0;p<T.width/8;++p)for(var q=
0;q<T.width;++q){var r=q+p*T.width;if(r>=a.length)break;var h=q,m=8*p,t=a[r];l[r]={vc:d&&d[t]&&d[t].thresholdDetect?d[t].thresholdDetect:fa.vc,label:t,Sd:f.distances&&f.distances[r]?f.distances[r]:3,cd:{here:h+m*T.width,notHere:h+(m+1)*T.width,yaw:h+(m+2)*T.width,dx:h+(m+3)*T.width,dy:h+(m+4)*T.width,ds:h+(m+5)*T.width,roll:h+(m+6)*T.width,pitch:h+(m+7)*T.width}}}Ha=l;c(!1)}function Tb(a,c,d){if(ra===ia.LOADING||fb!==Za.IDLE)return-1;Object.assign(na,ic,d?d:{});W.Eb=na.thresholdDetectFactor;W.ud=
na.thresholdDetectFactorUnstitch;W.Oa=na.isSkipConfirmation;W.mb=na.isKeepTracking;W.wd=na.trackingFactors;W.Ta=na.secondNeighborFactor;W.ub=na.nLocateAutomoves;W.qb=na.locateMoveNoiseAmplitude;W.qa=na.nConfirmAutoMoves;W.Db=na.thresholdConfirmOffset;W.$a=na.confirmMoveNoiseAmplitude;W.sb=na.nConfirmUnstitchMoves;W.Va=na.tiltPosAngleIfAmbiguousDetection;W.ab=na.confirmScoreMinFactorDuringAutoMove;Ea.W();ha.label=!1;switch(P.current){case $a.video:P.type===Na.video&&P.time!==P.element.currentTime?
(P.N.refresh(),P.time=P.element.currentTime):P.type===Na.Ob&&P.element.needsUpdate&&(P.N.yd(P.element.arrayBuffer),P.element.needsUpdate=!1);switch(na.cutShader){case "median":J.Ia="s62";break;default:J.Ia="s61"}break;case $a.zd:if(!P.xa){J.B=c.size.width;J.S=c.size.height;switch(na.cutShader){case "IOS":J.Ia="s64";A.M("s64",[{name:"u14",type:"2f",value:[1/J.B,1/J.S]}]);break;default:J.Ia="s61"}Rb(null);Ya()}P.N.yd(c.buffer)}a||(a=Cb.je()+fa.tb[0],Cb.vd());return a}function Ub(a,c){V.N.T();A.set(J.Ia);
Va&&T.Ma&&A.Z("u39",ra===ia.Wa?Ga:0);P.N.j(0);A.Ab("u43",V.o);Y.m(!1,!1);Bb=a===c-1}function Vb(){Ea.Ze();ab&&(b.viewport(0,0,ya.width,ya.height),A.set("s63"),P.N.j(0),A.Ab("u43",V.o),Y.m(!1,!1),Wb&&b.commit?b.commit():b.flush());return ha}var sa={Xf:function(a){return Math.ceil(Math.log2(a))},sg:function(a){return Math.log2(a)},og:function(a){return 0===Math.log2(a)%1},jf:function(a){var c=[0,0,0,0];a.forEach(function(d){c[0]+=d[0];c[1]+=d[1];c[2]+=d[2];c[3]+=d[3]});return c},Ga:function(a,c,d){return Math.min(Math.max(a,
c),d)},mf:function(a){return a*Math.PI/180},zg:function(a,c){c=Math.pow(10,c);return Math.round(a*c)/c},Ag:function(a){return Math.round(1E6*a)/1E6},Yf:function(a,c){return(100*a/c).toFixed(3)},pa:function(a,c,d){return a*(1-d)+c*d},tg:function(a,c){return a[0]*(1-c)+a[1]*c},Rd:function(a,c){return sa.Ld(a-c)},Ld:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},tf:function(a,c){return Math.abs(sa.Rd(a,c))},bf:function(a,c){return Math.atan2(Math.sin(a)+Math.sin(c),
Math.cos(a)+Math.cos(c))}},pb={get:function(a,c,d){var f=new XMLHttpRequest;f.open("GET",a,!0);f.withCredentials=!1;f.onreadystatechange=function(){4===f.readyState&&(200===f.status||0===f.status?c(f.responseText):"undefined"!==typeof d&&d(f.status))};f.send()},Zf:function(a){return new Promise(function(c,d){pb.get(a,c,d)})},Vf:function(a,c,d){a+=d?"?"+pb.Vd(d):"";pb.get(a,function(f){c(JSON.parse(f))})},vg:function(a,c,d){var f=new XMLHttpRequest;f.open("POST",a,!0);f.setRequestHeader("Content-type",
"application/x-www-form-urlencoded");f.onreadystatechange=function(){4!==f.readyState||200!==f.status&&0!==f.status||d(f.responseText)};f.send(c)},Vd:function(a){return"string"===typeof a?a:Object.keys(a).map(function(c){return encodeURIComponent(c)+"="+encodeURIComponent(a[c])}).join("&")},Jf:function(a,c){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){c(d.response)};d.send()}},jc={create:function(a,c){for(var d=Array(c),f=0;f<c;++f)d[f]=a;return d},
pf:function(a,c){for(var d=0;d<a.length;++d)c[d]=a[d]},clone:function(a){for(var c=Array(a.length),d=0;d<a.length;++d)c[d]=a[d];return c},Dg:function(a,c,d){a.forEach(function(f,l){c[l]=f*d})},Pg:function(a){for(var c=a.length-1;0<c;--c){var d=Math.floor(Math.random()*(c+1)),f=a[c];a[c]=a[d];a[d]=f}},Qg:function(a){return a.sort(function(c,d){return c-d})},Xe:function(a){return Array.isArray(a)||a.constructor===Float32Array||a.constructor===Uint8Array}},Db={Mb:function(a,c){if(0===c||"object"!==typeof a)return a;
a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var d in a)a[d]=Db.Mb(a[d],c);return a},sf:function(a){return JSON.parse(JSON.stringify(a))}},zb={pc:function(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)},qg:function(a,c,d){return Math.min(Math.max((d-a)/(c-a),0),1)},Ef:function(a,c,d,f){return Math.pow(Math.min(Math.max((f-a)/(c-a),0),1),d)},Xg:function(){return 0},ug:function(){return 1},rg:function(a){return a},Bf:function(a){return a*a},Gf:function(a){return a*(2-a)},yf:function(a){return.5>
a?2*a*a:-1+(4-2*a)*a},wf:function(a){return a*a*a},Ff:function(a){return--a*a*a+1},xf:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},Cf:function(a){return a*a*a*a},Hf:function(a){return 1- --a*a*a*a},zf:function(a){return.5>a?8*a*a*a*a:1-8*--a*a*a*a},Df:function(a){return a*a*a*a*a},If:function(a){return 1+--a*a*a*a*a},Af:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},kc={Zd:function(a,c,d){switch(a){case "relu":return d+"=max(vec4(0.,0.,0.,0.),"+c+");";case "elu":return d+"=mix(exp(-abs("+
c+"))-vec4(1.,1.,1.,1.),"+c+",step(0.,"+c+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+c+"))-vec4(0.1,0.1,0.1,0.1),"+c+",step(0.,"+c+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}},A=function(){function a(e,n,C){n=e.createShader(n);e.shaderSource(n,C);e.compileShader(n);return e.getShaderParameter(n,e.COMPILE_STATUS)?n:null}function c(e,n,C){n=a(e,e.VERTEX_SHADER,n);C=a(e,e.FRAGMENT_SHADER,C);e===b&&r.push(n,C);var L=
e.createProgram();e.attachShader(L,n);e.attachShader(L,C);e.linkProgram(L);return L}function d(e){return["float","sampler2D","int"].map(function(n){return"precision "+e+" "+n+";\n"}).join("")}function f(e,n){n.v=n.v?!0:!1;if(!n.v){n.Aa=n.Aa||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";n.Cc=n.Cc||["a0"];n.Jb=n.Jb||[2];n.precision=n.precision||x;n.id=t++;void 0!==n.pd&&(n.pd.forEach(function(Q,pa){n.g=n.g.replace(Q,n.zb[pa])}),
n.pd.splice(0));n.xc=0;n.Jb.forEach(function(Q){n.xc+=4*Q});var C=d(n.precision);n.sa=c(e,C+n.Aa,C+n.g);n.C={};n.i.forEach(function(Q){n.C[Q]=e.getUniformLocation(n.sa,Q)});n.attributes={};n.Ea=[];n.Cc.forEach(function(Q){var pa=e.getAttribLocation(n.sa,Q);n.attributes[Q]=pa;n.Ea.push(pa)});if(n.l){e.useProgram(n.sa);m=n;h=n.id;for(var L in n.l)e.uniform1i(n.C[L],n.l[L])}n.xa=!0}}function l(e){Aa.Se(R);h!==e.id&&(R.R(),h=e.id,m=e,b.useProgram(e.sa),e.Ea.forEach(function(n){0!==n&&b.enableVertexAttribArray(n)}))}
function p(e,n,C){f(e,n,C);e.useProgram(n.sa);e.enableVertexAttribArray(n.attributes.a0);h=-1;return m=n}function q(){return{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],l:{u1:0}}}var r=[],h=-1,m=null,t=0,w=!1,x="highp",F=["u1"],u=["u0"],z={u1:0},g={u0:0},G={u1:0,u2:1},E={u1:0,u3:1},k=["u1","u3","u4"],I={u5:0},D=["u6","u7","u8","u9"],y={u6:0,u7:1},H={s0:q(),s1:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
i:F,l:z,precision:"lowp"},s2:{g:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],l:G},s3:{g:"uniform sampler2D u1;uniform vec2 u10,u11;varying vec2 vv0;void main(){vec2 a=vv0*u10+u11;gl_FragColor=texture2D(u1,a);}",i:["u1","u10","u11"],l:z,v:!0},s4:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:F,l:z},s5:{g:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",
i:["u1","u2"],l:G},s6:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:F,l:z},s7:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:F,l:z},s8:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u10;}",i:["u0","u10"],l:g},s9:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;const vec4 f=vec4(.25),g=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u10,f);gl_FragColor=b*g;}",
i:["u0","u10"],l:g},s10:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:F,l:z},s11:{g:"uniform sampler2D u1,u12;uniform float u13;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u12,vv0);gl_FragColor=mix(b,a,u13*f);}",i:["u1","u12","u13"],l:{u1:0,u12:1}},s12:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u14)+texture2D(u1,vv0+u14*vec2(1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,1.)));}",
i:["u1","u14"],l:z},s13:{g:"uniform sampler2D u1;varying vec2 vv0;vec4 f(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),g=exp2(c);vec3 h=clamp(b/g,0.,1.);return vec4(h,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=f(a);}",i:F,l:z,v:!0},s14:{g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",i:F,l:z,v:!0},
s15:{g:"uniform sampler2D u1;uniform vec4 u15;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u15);gl_FragColor=j(a);}",
i:["u1","u15"],l:z},s16:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:u,l:g,v:!0},s17:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:u,l:g},s18:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:u,l:g},
s19:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:u,l:g},s20:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:u,l:g},s21:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",i:u,l:g,v:!0},s22:{g:"uniform sampler2D u0,u16;uniform float u17;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u16,e);float b=u17*u17;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",
i:["u0","u16","u17"],l:{u0:0,u16:1},v:!0},s23:{g:"uniform sampler2D u1;uniform vec2 u18;varying vec2 vv0;void main(){float a=u18.x*u18.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u18.y),f=floor(u18.x*fract(b*u18.y)),g=(f*u18.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",i:["u1","u18"],l:z},s24:{g:"uniform sampler2D u7,u6,u19;varying vec2 vv0;void main(){vec4 a=texture2D(u19,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u7,b),f=texture2D(u6,c);gl_FragColor=d*f;}",i:["u7","u6","u19"],l:Object.assign({u19:2},
y),v:!0},s25:{g:"uniform float u8,u9;uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec2 b=fract(vv0*u8);float a=u8*u9;vec2 c=(vec2(.5)+floor(a*vv0))/a;vec4 d=texture2D(u7,c),f=texture2D(u6,b);gl_FragColor=d*f;}",i:D,l:y},s26:{g:"uniform float u8,u9;uniform vec2 u20,u21;uniform sampler2D u7,u6;varying vec2 vv0;void main(){float a=u8*u9;vec2 b=mod(vv0*u20,vec2(1.)),c=floor(vv0*u20)/u20,d=u20*u21,f=c+.5*(vec2(1.)-u21)/u20,g=f+fract(b*u8)/d,h=(vec2(.5)+floor(a*b))/a;vec4 i=texture2D(u7,h),j=texture2D(u6,g);gl_FragColor=i*j;}",
i:["u20","u21"].concat(D),l:y,v:!0},s27:{g:"uniform float u8,u9;uniform sampler2D u7,u6,u22,u23,u24,u25;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u8),d=vv0;float h=u8*u9;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u7,d),m=texture2D(u6,c),a=texture2D(u25,d);a=floor(.5+a*255.);vec4 n=texture2D(u22,c),o=texture2D(u23,c),p=texture2D(u24,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:["u25","u22","u23","u24"].concat(D),l:Object.assign({u25:3,u22:4,u23:5,u24:6},y),v:!0},s28:{g:"uniform sampler2D u7,u6,u3;uniform float u8,u26,u27,u9;uniform vec2 u28;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u26*vv0),d=u26*vv0-c;float g=u8/u26;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u26;float m=u26*u9/u8;vec2 b=m*h;b=floor(u28*b+.5*(u9-1.)*(f-u28));vec2 a=(b+i*u27)/u9;a+=.25/u9;vec2 k=step(a,f)*step(l,a);vec4 n=texture2D(u7,j),o=texture2D(u6,a),p=n*o,q=texture2D(u3,j);gl_FragColor=(p*u27*u27+q)*k.x*k.y;}",
i:["u26","u27","u3","u28"].concat(D),l:Object.assign({u3:2},y)},s29:{g:"uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec4 a=texture2D(u7,vv0),b=texture2D(u6,vv0);gl_FragColor=a*b;}",i:["u7","u6"],l:y,v:!0},s30:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:k,l:E},s31:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);}",
i:["u20"].concat(k),l:E,v:!0},s32:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",i:k,l:E,v:!0},s33:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:["u20"].concat(k),l:E,v:!0},s34:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:k,l:E,v:!0},s35:{g:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:F,l:z,precision:"lowp"},s36:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u29"],l:z,precision:"lowp"},s37:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u29"],l:z,precision:"lowp"},s38:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u30))*2.,b-=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,b+=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u30))*2.,b+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u30"],l:G,v:!0},s39:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u30,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u30"],l:G,v:!0},s40:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u14*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*h),d=texture2D(u5,a+u14*i),j=texture2D(u5,a+u14),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u5","u14"],l:I},s41:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*k),d=texture2D(u5,a+u14*l),g=texture2D(u5,a+u14),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u14*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u14*m),d=f(a+u14*2.),g=f(a+u14*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u5","u14"],
l:I,v:!0},s42:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],l:z,precision:"lowp",v:!0},s43:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u14)+2002./e*texture2D(u1,vv0-2.*u14)+3003./e*texture2D(u1,vv0-u14)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u14)+2002./e*texture2D(u1,vv0+2.*u14)+1001./e*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u14","u1"],
l:z,precision:"lowp",v:!0},s44:{g:"uniform sampler2D u1,u16,u31;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u16,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u16","u31"],l:{u1:0,u16:1,u31:2},v:!0}},K={s45:{g:"uniform float u8,u32;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u8,xyTo=floor(vv0*u8+eps2);float weightSize=toSparsity*u8;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u8,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u8","u7","u6","u3","u32"],zb:["1.1111","gl_FragColor\\*=2.2222;"]},s46:{g:"uniform float u8,u32,u9;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u9,xyTo=floor(vv0*u8+eps2);float weightSize=fromSparsity*u9;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u8;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u9,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u8 u9 u7 u6 u3 u32".split(" "),zb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},N=null,aa=null,R={pb:function(){return w},D:function(){if(!w){N=Db.Mb(H,2);aa=Db.Mb(K,2);x="highp";b.getShaderPrecisionFormat&&(b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT),b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.LOW_FLOAT));for(var e in N)f(b,N[e],e);A.set("s0");b.enableVertexAttribArray(0);w=!0}},Xa:function(e){e.forEach(function(n){R.Bc(n)})},Bc:function(e){N[e.id]=e;f(b,e,e.id)},pe:function(e,
n,C){n||(n=e);N[n]=Object.create(aa[e]);N[n].ve=!0;aa[e].zb&&aa[e].zb.forEach(function(L,Q){N[n].g=N[n].g.replace(new RegExp(L,"g"),C[Q])});f(b,N[n],n)},set:function(e){var n=N[e];n.v&&(n.v=!1,f(b,n,e));l(n)},Ra:function(e){return p(e,q(),"s47")},nc:function(e){return p(e,{g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:x},"s48")},Xd:function(e){return"undefined"===typeof N[e]?!1:N[e].xa},R:function(){-1!==h&&(h=-1,m.Ea.forEach(function(e){0!==e&&b.disableVertexAttribArray(e)}))},
oc:function(){var e=0;m.Ea.forEach(function(n,C){C=m.Jb[C];b.vertexAttribPointer(n,C,b.FLOAT,!1,m.xc,e);e+=4*C})},Ud:function(){b.enableVertexAttribArray(0)},Sa:function(){R.Bb(b)},Bb:function(e){e.vertexAttribPointer(m.Ea[0],2,e.FLOAT,!1,8,0)},Jg:function(e,n){b.uniform1i(m.C[e],n)},Z:function(e,n){b.uniform1f(m.C[e],n)},U:function(e,n,C){b.uniform2f(m.C[e],n,C)},sd:function(e,n){b.uniform2fv(m.C[e],n)},Lg:function(e,n){b.uniform3fv(m.C[e],n)},Kg:function(e,n,C,L){b.uniform3f(m.C[e],n,C,L)},Te:function(e,
n,C,L,Q){b.uniform4f(m.C[e],n,C,L,Q)},Ab:function(e,n){b.uniform4fv(m.C[e],n)},Mg:function(e,n){b.uniformMatrix2fv(m.C[e],!1,n)},Ng:function(e,n){b.uniformMatrix3fv(m.C[e],!1,n)},Og:function(e,n){b.uniformMatrix4fv(m.C[e],!1,n)},M:function(e,n){R.set(e);n.forEach(function(C){switch(C.type){case "4f":b.uniform4fv(m.C[C.name],C.value);break;case "3f":b.uniform3fv(m.C[C.name],C.value);break;case "2f":b.uniform2fv(m.C[C.name],C.value);break;case "1f":b.uniform1f(m.C[C.name],C.value);break;case "1i":b.uniform1i(m.C[C.name],
C.value);break;case "mat2":b.uniformMatrix2fv(m.C[C.name],!1,C.value);break;case "mat3":b.uniformMatrix3fv(m.C[C.name],!1,C.value);break;case "mat4":b.uniformMatrix4fv(m.C[C.name],!1,C.value)}})},Wf:function(){return"lowp"},u:function(){R.R();b.disableVertexAttribArray(0);for(var e in N){var n=N[e];n.xa&&(n.xa=!1,b.deleteProgram(n.sa));n.ve&&delete N[e]}r.forEach(function(C){b.deleteShader(C)});r.splice(0);t=0;w=!1;m=null;h=-1}};return R}(),b=null,qb=function(){function a(u){console.log("ERROR in ContextFF: ",
u);return!1}function c(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(u,z,g){u.setAttribute("width",z);u.setAttribute("height",g)}function f(u){function z(){Ia.u();da.reset();G.getExtension("WEBGL_lose_context").loseContext()}if(c())return!1;var g=document.createElement("canvas");d(g,5,5);var G=null;try{G=g.getContext("webgl2",u)}catch(E){return!1}if(!G)return!1;l(G);da.Jc(G);u=da.Nb(G);if(!u.ea&&!u.fa)return z(),!1;u=Ia.Ec(G,u);z();return u?!0:!1}function l(u){u.clearColor(0,
0,0,0);u.disable(u.DEPTH_TEST);u.disable(u.BLEND);u.disable(u.DITHER);u.disable(u.STENCIL_TEST);u.disable(u.CULL_FACE);u.GENERATE_MIPMAP_HINT&&u.FASTEST&&u.hint(u.GENERATE_MIPMAP_HINT,u.FASTEST);u.disable(u.SAMPLE_ALPHA_TO_COVERAGE);u.disable(u.SAMPLE_COVERAGE);u.depthFunc(u.LEQUAL);u.clearDepth(1)}var p=null,q=null,r=null,h=null,m=!0,t=null,w=null,x=[],F={L:function(){return p.width},aa:function(){return p.height},Nf:function(){return p},Lf:function(){return b},ga:function(){return m},flush:function(){b.flush()},
fg:function(){Ea.W();F.Ne()},Ne:function(){ba.reset();Y.reset();A.R();A.Ud();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);Y.Ya();A.Sa()},ae:function(){t||(t=new Uint8Array(p.width*p.height*4));b.readPixels(0,0,p.width,p.height,b.RGBA,b.UNSIGNED_BYTE,t);return t},Pf:function(){return p.toDataURL("image/jpeg")},Qf:function(){Ea.V();q||(q=document.createElement("canvas"),r=q.getContext("2d"));d(q,p.width,p.height);for(var u=F.ae(),z=r.createImageData(q.width,q.height),g=q.width,G=q.height,E=z.data,k=0;k<
G;++k)for(var I=G-k-1,D=0;D<g;++D){var y=4*(k*g+D),H=4*(I*g+D);E[y]=u[H];E[y+1]=u[H+1];E[y+2]=u[H+2];E[y+3]=u[H+3]}r.putImageData(z,0,0);return q.toDataURL("image/png")},Of:function(u){!q&&u&&(q=document.createElement("canvas"),r=q.getContext("2d"));var z=u?q:document.createElement("canvas");d(z,p.width,p.height);(u?r:z.getContext("2d")).drawImage(p,0,0);return z},D:function(u){u=Object.assign({Ub:null,dc:null,bb:null,Hc:null,width:512,height:512,premultipliedAlpha:!1,se:!0,antialias:!1,debug:!1,
rf:!1},u);u.Ub?(b=u.Ub,p=u.Ub.canvas):u.Hc&&!u.bb?p=document.getElementById(u.Hc):u.bb&&(p=u.bb);p||(p=document.createElement("canvas"));p.width=u.width;p.height=u.height;if(b)m=b instanceof WebGL2RenderingContext;else{m=!0;var z={antialias:u.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:u.premultipliedAlpha,stencil:!1,depth:u.se,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(z.antialias=!1);var g=f(z);g||!z.antialias||c()||(z.antialias=!1,g=f(z));g&&(b=p.getContext("webgl2",z));b?m=!0:((b=p.getContext("webgl",z))||(b=p.getContext("experimental-webgl",z)),m=!1)}if(!b)return a("WebGL1 and 2 are not enabled");u.dc&&p.addEventListener&&(h=b.getExtension("WEBGL_lose_context"))&&(w=u.dc,p.addEventListener("webglcontextlost",w,!1));if(!da.D())return a("Not enough GL capabilities");l(b);A.D();Y.D();Ia.Ec(b,da.$d());x.forEach(function(G){G(b)});x.splice(0);return!0},ff:function(){return new Promise(function(u){b?
u(b):x.push(u)})},u:function(){b&&(da.u(),A.u(),Ia.u());h&&w&&(p.removeEventListener("webglcontextlost",w,!1),h=w=null);b=t=r=q=p=null;x.splice(0)}};return F}(),Aa=function(){function a(){null===c&&("undefined"!==typeof A?c=A:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;return{reset:function(){c=null},Se:function(d){c!==d&&(c&&c.R(),c=d)},pb:function(){return c.pb()},Sa:function(){return c.Sa()},Bb:function(d){return c.Bb(d)},oc:function(){return c.oc()},R:function(){return c.R()},set:function(d){a();
return c.set(d)},Ra:function(d){a();return c.Ra(d)},nc:function(d){a();return c.nc(d)}}}(),Pa=function(){function a(e){b.bindTexture(b.TEXTURE_2D,e)}function c(e){K[0]=e;e=N[0];var n=e>>16&32768,C=e>>12&2047,L=e>>23&255;return 103>L?n:142<L?n|31744|((255==L?0:1)&&e&8388607):113>L?(C|=2048,n|(C>>114-L)+(C>>113-L&1)):n=(n|L-112<<10|C>>1)+(C&1)}function d(e){var n=new Uint16Array(e.length);e.forEach(function(C,L){n[L]=c(C)});return n}function f(){if(null!==aa.Vb)return aa.Vb;var e=p(d([.5,.5,.5,.5]),
!0);return null===e?!0:aa.Vb=e}function l(){if(null!==aa.Wb)return aa.Wb;var e=p(new Uint8Array([127,127,127,127]),!1);return null===e?!0:aa.Wb=e}function p(e,n){if(!Aa.pb()||!z)return null;var C=null,L=Math.sqrt(e.length/4);try{var Q=b.getError();if("FUCKING_BIG_ERROR"===Q)return!1;C=R.instance({isFloat:!1,P:n,array:e,width:L});Q=b.getError();if(Q!==b.NO_ERROR)return!1}catch(pa){return!1}qa.V();b.viewport(0,0,L,L);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);Aa.set("s0");C.Dc(0);oa.m(!0,!0);
e=4*L*L;n=new Uint8Array(e);b.readPixels(0,0,L,L,b.RGBA,b.UNSIGNED_BYTE,n);L=!0;for(Q=0;Q<e;++Q)L=L&&3>Math.abs(n[Q]-127);C.remove();qa.W();return L}var q=0,r=null,h=0,m=null,t=null,w=null,x=null,F=null,u=null,z=!1,g=[],G={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,F:null,Vc:null,ue:!1,P:!1,H:null,rb:4,Zb:0},E=!1,k=null,I=null,D=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,
0,0,1]],y=!1,H=!1,K=new Float32Array(1),N=new Int32Array(K.buffer),aa={Vb:null,Wb:null},R={D:function(){z||(F=[b.RGBA,null,b.RGBA,b.RGBA],u=[b.RGBA,null,b.RGBA,b.RGBA],r=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7],y="undefined"!==typeof JEContext,H="undefined"!==typeof da,y&&JEContext.pg()&&r.push(b.TEXTURE8,b.TEXTURE9),m=[-1,-1,-1,-1,-1,-1,-1,-1],x=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT],z=!0)},oe:function(){if(!t){for(var e=new Float32Array(16384),n=0;16384>
n;++n)e[n]=2*Math.random()-1;t={random:R.instance({isFloat:!0,isPot:!0,array:e,width:64}),xd:R.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}R.af()},rd:function(e){b.framebufferTexture2D(qa.Sb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,e,0)},dg:function(){return t.xd},af:function(){x[1]=da.Rb(b)},Qe:function(){u=F=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},md:function(e){A.set("s1");qa.V();var n=e.L(),C=e.aa();b.viewport(0,0,n,C);e.j(0);oa.m(!1,!1)},xg:function(e,n){R.md(e);b.readPixels(0,
0,e.L(),e.aa(),b.RGBA,b.UNSIGNED_BYTE,n)},yg:function(e,n){R.md(e);return da.kc(0,0,e.L(),e.aa(),n)},Qc:function(e,n,C,L,Q,pa,Ba){e.activeTexture(e.TEXTURE0);var Ja=e.createTexture();e.bindTexture(e.TEXTURE_2D,Ja);Q=Q instanceof Float32Array?Q:new Float32Array(Q);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,
e.NEAREST);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,pa);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,C,L,0,e.RGBA,e.FLOAT,Q);e.bindTexture(e.TEXTURE_2D,null);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1);Ba&&(qa.W(),A.Ra(e));e.viewport(0,0,C,L);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);e.bindTexture(e.TEXTURE_2D,Ja);Ba?oa.m(!0,!0):Y.gb(e);e.deleteTexture(Ja);z&&(m[0]=-1,w=null,q=0)},Ib:function(e){e!==q&&(b.activeTexture(r[e]),q=e)},instance:function(e){var n;function C(){S=void 0!==v.F.videoWidth?
v.F.videoWidth:v.F.width;U=void 0!==v.F.videoHeight?v.F.videoHeight:v.F.height}function L(B){var O=b.getError();if("FUCKING_BIG_ERROR"===O)return!1;b.texImage2D(b.TEXTURE_2D,0,la,ja,ka,B);O=b.getError();O!==b.NO_ERROR&&ja!==b.RGBA&&(ja=b.RGBA,b.texImage2D(b.TEXTURE_2D,0,la,ja,ka,B));return!0}function Q(){if(!Xb){a(ua);Fa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,Fa);v.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,v.isMirrorX?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,
v.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));v.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.Sf().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.cf);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,v.isLinear?b.LINEAR:b.NEAREST);v.isLinear?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,v.isMipmap&&!Ta?b.NEAREST_MIPMAP_LINEAR:b.LINEAR):
b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,v.isMipmap&&!Ta?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);ja=F[v.rb-1];la=u[v.rb-1];ka=x[Eb];if(da.ga()){var B=da.be();ja===b.RGBA&&ka===b.FLOAT?v.isMipmap||v.isLinear?la=Ia.de(b):da.Fc()?B&&(la=B):la=b.RGBA16F||b.RGBA:ja===b.RGB&&ka===b.FLOAT&&B&&(la=B,ja=b.RGBA)}if(v.P&&!v.isFloat||v.isFloat&&v.isMipmap&&Ia.ye())la=da.ce(),ka=da.Rb(b);v.Zb&&(rb=v.Zb);v.isSrgb&&4===v.rb&&(ja=JEContext.bg());if(v.F)L(v.F);else if(v.url)L(Oa);else if(za){B=za;try{"FUCKING_BIG_ERROR"!==
b.getError()&&(b.texImage2D(b.TEXTURE_2D,0,la,S,U,0,ja,ka,B),b.getError()!==b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,la,S,U,0,ja,ka,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,S,U,0,b.RGBA,b.UNSIGNED_BYTE,null)))}catch(xc){b.texImage2D(b.TEXTURE_2D,0,la,S,U,0,ja,ka,null)}v.isKeepArray||(za=null)}else B=b.getError(),"FUCKING_BIG_ERROR"!==B&&(b.texImage2D(b.TEXTURE_2D,0,la,S,U,0,ja,ka,null),B=b.getError(),B!==b.NO_ERROR&&(ja=b.RGBA,v.P&&ka!==b.FLOAT&&(ka=b.FLOAT,b.texImage2D(b.TEXTURE_2D,
0,la,S,U,0,ja,ka,null))));if(v.isMipmap)if(!Ta&&ca)ca.Qb(),sb=!0;else if(Ta){B=Math.log2(Math.min(S,U));bb=Array(1+B);bb[0]=ua;for(var O=1;O<=B;++O){var ma=Math.pow(2,O),X=S/ma;ma=U/ma;var Ua=b.createTexture();a(Ua);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,la,X,ma,0,ja,ka,null);a(null);bb[O]=Ua}sb=!0}a(null);m[q]=-1;Fa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);gb=!0;v.H&&ca&&(v.H(ca),v.H=null)}}
function pa(){for(var B=S*U,O=2*B,ma=3*B,X=0;X<B;++X)Ca[0][X]=hb[X],Ca[1][X]=hb[X+B],Ca[2][X]=hb[X+O],Ca[3][X]=hb[X+ma]}function Ba(){var B=S*U*4;Ka=[new Uint8Array(B),new Uint8Array(B),new Uint8Array(B),new Uint8Array(B)];Ca=[new Float32Array(Ka[0].buffer),new Float32Array(Ka[1].buffer),new Float32Array(Ka[2].buffer),new Float32Array(Ka[3].buffer)];tb=new Uint8Array(4*B);hb=new Float32Array(tb.buffer);ib=!0}function Ja(){n=new Uint8Array(S*U*4);Yb=new Float32Array(n.buffer);Fb=!0}var v=Object.assign({},
G,e),jb=h++;null===v.isFlipY&&(v.isFlipY=v.url?!0:!1);v.data&&(v.array="string"===typeof v.data?Qa(v.data):v.isFloat?new Float32Array(v.data):new Uint8Array(v.data),v.isFlipY=!1);var Eb=0,Zb=v.F?!0:!1,kb=null,Gb=null,$b=!1;v.P=v.P||v.isFloat;v.P&&(Eb=1);!v.ue&&v.isFloat&&H&&!da.Fc()&&(v.isFloat=!1);v.isFloat&&(Eb=2);v.isAnisotropicFiltering&&y&&!JEContext.ig()&&(v.isAnisotropicFiltering=!1);var ua=v.Vc||b.createTexture(),Oa=null,za=!1,S=0,U=0,gb=!1,Xb=!1,ib=!1,Ca=null,Ka=null,tb=null,hb=null,la=null,
ja=null,ka=null,Fa=v.isFlipY,lc=(e=v.P&&v.isMipmap)&&Ia.Id(),Ta=e&&!lc?!0:!1,bb=null,rb=-1,ac=-1,sb=!1;var Fb=!1;var Yb=n=null;v.width&&(S=v.width,U=v.height?v.height:S);var ca={get:function(){return ua},L:function(){return S},aa:function(){return U},eg:function(){return v.url},jg:function(){return v.isFloat},lg:function(){return v.P},Hg:function(B){ua=B},mg:function(){return v.isLinear},Qb:function(){b.generateMipmap(b.TEXTURE_2D)},Fd:function(B,O){Ta?(B||(B=ca.Uc()),R.Ib(O),a(bb[B]),m[O]=-1):ca.j(O)},
Uc:function(){-1===rb&&(rb=Math.log(S)/Math.log(2));return rb},Yd:function(B){B||(B=ca.Uc());if(Ta){A.set("s12");R.Ib(0);for(var O=S,ma=U,X=1;X<=B;++X)O/=2,ma/=2,A.U("u14",.25/O,.25/ma),b.viewport(0,0,O,ma),a(bb[X-1]),b.framebufferTexture2D(qa.Sb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,bb[X],0),oa.m(!1,1===X);m[0]=-1}else B!==ac&&(ac=B,b.TEXTURE_MAX_LEVEL&&b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAX_LEVEL,B)),ca.Qb()},Ig:function(B){(Zb=!jc.Xe(B))?(za=null,v.F=B,C()):za=B},j:function(B){if(!gb)return!1;
R.Ib(B);if(m[B]===jb)return!1;a(ua);m[B]=jb;return!0},Dc:function(B){b.activeTexture(r[B]);q=B;a(ua);m[B]=jb},A:function(){w=ca;R.rd(ua)},T:function(){b.viewport(0,0,S,U);w=ca;R.rd(ua)},wc:R.wc,Pe:function(B,O){S=B;U=O},resize:function(B,O){ca.Pe(B,O);Q()},clone:function(B){B=R.instance({width:S,height:U,P:v.P,isFloat:v.isFloat,isLinear:v.isLinear,isMirrorY:v.isMirrorY,isFlipY:B?!Fa:Fa,isPot:v.isPot});Aa.set("s0");qa.W();B.T();ca.j(0);oa.m(!0,!0);return B},Ue:function(){b.viewport(0,0,S,U)},remove:function(){b.deleteTexture(ua);
Xb=!0;g.splice(g.indexOf(ca),1);ca=null},refresh:function(){ca.Dc(0);Fa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Zb?b.texImage2D(b.TEXTURE_2D,0,la,ja,ka,v.F):b.texImage2D(b.TEXTURE_2D,0,la,S,U,0,ja,ka,za);Fa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},ld:function(){ib||Ba();b.readPixels(0,0,S,4*U,b.RGBA,b.UNSIGNED_BYTE,tb);pa();return Ca},Je:function(){ib||Ba();return da.kc(0,0,S,4*U,tb).then(function(){pa();return Ca})},Le:function(){Fb||Ja();b.readPixels(0,0,S,U,b.RGBA,b.UNSIGNED_BYTE,n);return Yb},
Ke:function(){Fb||Ja();return da.kc(0,0,S,U,n)},Ic:function(B){qa.V();A.set("s15");ca.j(0);if(B)b.viewport(0,0,S,U),A.Te("u15",.25,.25,.25,.25),oa.m(!1,!0);else for(B=0;4>B;++B)b.viewport(0,U*B,S,U),A.Ab("u15",D[B]),oa.m(!1,0===B)},yd:function(B){var O=ka===x[0]&&!l();a(ua);Fa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);O?($b||(kb=document.createElement("canvas"),kb.width=S,kb.height=U,Gb=kb.getContext("2d"),Gb.createImageData(S,U),$b=!0),null.data.set(B),Gb.putImageData(null,0,0),b.texImage2D(b.TEXTURE_2D,
0,la,ja,ka,kb)):b.texImage2D(b.TEXTURE_2D,0,la,S,U,0,ja,ka,B);m[q]=jb;Fa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Wg:function(B,O){a(ua);O&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,la,ja,ka,B);m[q]=jb;O&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Eg:function(B,O){var ma=S*U,X=4*ma;B=v.P?B?"RGBE":"JSON":"RGBA";O&&(B=O);O=da.ga()&&!1;var Ua=null;switch(B){case "RGBE":Ua="s13";break;case "JSON":Ua=O?"s0":"s15";break;case "RGBA":case "RGBAARRAY":Ua="s7"}ib||("RGBA"===B||"RGBE"===
B||"RGBAARRAY"===B?(Ka=new Uint8Array(X),ib=!0):"JSON"!==B||O||Ba());qa.V();A.set(Ua);ca.j(0);X=null;if("RGBA"===B||"RGBE"===B||"RGBAARRAY"===B){b.viewport(0,0,S,U);oa.m(!0,!0);b.readPixels(0,0,S,U,b.RGBA,b.UNSIGNED_BYTE,Ka);if("RGBAARRAY"===B)return{data:Ka};E||(k=document.createElement("canvas"),I=k.getContext("2d"),E=!0);k.width=S;k.height=U;ma=I.createImageData(S,U);ma.data.set(Ka);I.putImageData(ma,0,0);X=k.toDataURL("image/png")}else if("JSON"===B)if(O)X=new Float32Array(ma),b.viewport(0,0,
S,U),oa.m(!0,!0),b.readPixels(0,0,S,U,b.RGBA,b.FLOAT,X);else{for(X=0;4>X;++X)b.viewport(0,U*X,S,U),A.Ab("u15",D[X]),oa.m(!X,!X);ca.ld();X=Array(ma);for(O=0;O<ma;++O)X[4*O]=Ca[0][O],X[4*O+1]=Ca[1][O],X[4*O+2]=Ca[2][O],X[4*O+3]=Ca[3][O]}return{format:B,data:X,width:S,height:U,isMirrorY:v.isMirrorY,isFlipY:"RGBA"===B?v.isFlipY:!v.isFlipY}}};v.isMipmap&&!Ta&&gb&&!sb&&(ca.Qb(),sb=!0);if(v.url)a(ua),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),Oa=new Image,Oa.qf="Anonymous",Oa.crossOrigin=
"Anonymous",Oa.src=v.url,Oa.onload=function(){S=Oa.width;U=Oa.height;Q()};else if(v.F){var bc=function(){C();S?Q():setTimeout(bc,1)};bc()}else v.array?(v.P&&!v.isFloat?v.array instanceof Uint16Array?(za=v.array,Q()):f()?(za=d(v.array),Q()):(Q(),R.Qc(b,ua,ca.L(),ca.aa(),v.array,Fa,!0)):(za=v.isFloat?v.array instanceof Float32Array?v.array:new Float32Array(v.array):v.array instanceof Uint8Array?v.array:new Uint8Array(v.array),Q()),v.isKeepArray||(za&&za!==v.array&&(za=null),delete v.array)):v.Vc?gb=
!0:Q();ca.ag=ca.L;v.H&&gb&&(v.H(ca),v.H=null);g.push(ca);return ca},V:function(e){e!==q&&(b.activeTexture(r[e]),q=e);m[e]=-1;a(null)},ef:function(e){t.random.j(e)},wc:function(){w=null;b.framebufferTexture2D(qa.Sb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},reset:function(){0!==q&&b.activeTexture(r[0]);for(var e=0;e<r.length;++e)m[e]=-1;q=-1},Bg:function(){q=-1},Ye:function(){for(var e=0;e<r.length;++e)R.V(e)},Sc:function(){t&&(t.random.remove(),t.xd.remove())},Ug:function(e,n){if("RGBA"===e.format||
"RGBE"===e.format){var C=new Image;C.src=e.data;C.onload=function(){R.instance({isMirrorY:e.isMirrorY,isFlipY:e.isFlipY,isFloat:!1,F:C,H:function(L){if("RGBA"===e.format)n(L);else{var Q=e.width,pa=e.height,Ba=R.instance({isMirrorY:e.isMirrorY,isFloat:!0,width:Q,height:pa,isFlipY:e.isFlipY});qa.W();b.viewport(0,0,Q,pa);A.set("s14");Ba.A();L.j(0);oa.m(!0,!0);R.V(0);n(Ba);da.flush();L.remove()}}})}}else"JSON"===e.format?n(R.instance({isFloat:!0,isFlipY:e.isFlipY,width:e.width,height:e.height,array:new Float32Array(e.data)})):
n(!1)},Md:d,u:function(){w&&(Ea.W(),R.wc(),Ea.V());R.Ye();g.slice(0).forEach(function(e){e.remove()});g.splice(0);z=!1;h=0;"undefined"!==typeof Ia&&Ia.u();t=null}};return R}(),oa=function(){function a(h){var m={ba:null,indices:null};m.ba=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,m.ba);h.bufferData(h.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),h.STATIC_DRAW);m.indices=h.createBuffer();h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,m.indices);h.bufferData(h.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),
h.STATIC_DRAW);return m}var c=null,d=0,f=!1,l=[],p=-2,q=-2,r={reset:function(){q=p=-2},D:function(){f||(c=a(b),r.Ya(),f=!0)},instance:function(h){var m=d++,t=h.indices?h.indices.length:0,w="undefined"===typeof h.mode?b.STATIC_DRAW:h.mode,x=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,x);b.bufferData(b.ARRAY_BUFFER,h.ba instanceof Float32Array?h.ba:new Float32Array(h.ba),w);p=m;var F=null,u=null,z=null;if(h.indices){F=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,F);var g=null;65536>h.indices.length?
(g=Uint16Array,u=b.UNSIGNED_SHORT,z=2):(g=Uint32Array,u=b.UNSIGNED_INT,z=4);g=h.indices instanceof g?h.indices:new g(h.indices);b.bufferData(b.ELEMENT_ARRAY_BUFFER,g,w);q=m}var G={Gd:function(E){p!==m&&(b.bindBuffer(b.ARRAY_BUFFER,x),p=m);E&&Aa.oc()},Dd:function(){q!==m&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,F),q=m)},bind:function(E){G.Gd(E);G.Dd()},uf:function(){b.drawElements(b.TRIANGLES,t,u,0)},vf:function(E,k){b.drawElements(b.TRIANGLES,E,u,k*z)},remove:function(){b.deleteBuffer(x);h.indices&&
b.deleteBuffer(F);G=null}};l.push(G);return G},Ya:function(){-1!==p&&(b.bindBuffer(b.ARRAY_BUFFER,c.ba),p=-1);-1!==q&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.indices),q=-1)},m:function(h,m){h&&oa.Ya();m&&Aa.Sa();b.drawElements(b.TRIANGLES,3,b.UNSIGNED_SHORT,0)},gb:function(h){h=h||b;var m=a(h);h.bindBuffer(h.ARRAY_BUFFER,m.ba);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,m.indices);Aa.Bb(h);h.clear(h.COLOR_BUFFER_BIT);h.drawElements(h.TRIANGLES,3,h.UNSIGNED_SHORT,0);h.flush();h.bindBuffer(h.ARRAY_BUFFER,null);
h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null);h.deleteBuffer(m.ba);h.deleteBuffer(m.indices);r.reset();f&&(r.Ya(),Aa.Sa())},Sc:function(){var h=b,m=c;h.deleteBuffer(m.ba);h.deleteBuffer(m.indices)},u:function(){r.Sc();l.forEach(function(h){h.remove()});b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);r.reset();f=!1;l.splice(0);d=0}};return r}(),qa=function(){var a=null,c=null,d=null,f=!1,l=[],p={K:-2,Pc:1},q={pb:function(){return f},D:function(){if(!f){a=b.createFramebuffer();
var r=da.ga();c=r&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=r&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;f=!0}},Tf:function(){return c},ee:function(){return d},Sb:function(){return b.FRAMEBUFFER},$f:function(){return p},Kf:function(){return a},instance:function(r){void 0===r.Yc&&(r.Yc=!1);var h=r.N?r.N:null,m=r.width,t=void 0!==r.height?r.height:r.width,w=a,x=null,F=!1,u=!1,z=0;h&&(m=m?m:h.L(),t=t?t:h.aa());var g={qd:function(){F||(w=b.createFramebuffer(),F=!0,z=p.Pc++)},Bd:function(){g.qd();
g.A();x=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,x);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,m,t);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,x);b.clearDepth(1)},bind:function(G,E){z!==p.K&&(b.bindFramebuffer(c,w),p.K=z);h&&h.A();E&&b.viewport(0,0,m,t);G&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},df:function(){z!==p.K&&(b.bindFramebuffer(c,w),p.K=z)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},kf:function(){b.clear(b.COLOR_BUFFER_BIT)},
lf:function(){b.clear(b.DEPTH_BUFFER_BIT)},Ue:function(){b.viewport(0,0,m,t)},A:function(){z!==p.K&&(b.bindFramebuffer(c,w),p.K=z)},rtt:function(G){h=G;p.K!==z&&(b.bindFramebuffer(b.FRAMEBUFFER,w),p.K=z);G.A()},V:function(){b.bindFramebuffer(c,null);p.K=-1},resize:function(G,E){m=G;t=E;x&&(b.bindRenderbuffer(b.RENDERBUFFER,x),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,m,t))},remove:function(){w===a||u||(b.bindFramebuffer(c,w),b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,
null,0),x&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null),b.bindFramebuffer(c,null),b.deleteFramebuffer(w),x&&b.deleteRenderbuffer(x));u=!0}};r.Yc&&g.Bd();l.push(g);return g},V:function(){b.bindFramebuffer(c,null);p.K=-1},Ze:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);da.td();p.K=-1},reset:function(){p.K=-2},W:function(){0!==p.K&&(b.bindFramebuffer(c,a),p.K=0)},clear:function(){da.td();b.clear(b.COLOR_BUFFER_BIT)},u:function(){q.V();l.forEach(function(r){r.remove()});
null!==a&&(b.deleteFramebuffer(a),a=null);q.reset();f=!1;l.splice(0);p.Pc=1}};return q}(),da=function(){function a(){r="undefined"===typeof qb?JEContext:qb;h=!0}function c(k,I){for(var D=0;D<k.length;++D){var y=I.getExtension(k[D]);if(y)return y}return null}function d(){null!==g.Fb&&(clearTimeout(g.Fb),g.Fb=null);g.ya=!1}function f(k){if(0===g.na.length){g.oa=b.PIXEL_PACK_BUFFER;g.na.splice(0);g.jb.splice(0);for(var I=0;I<g.Ha;++I)g.na.push(b.createBuffer()),g.jb.push(-1);g.da=0;g.ac=0}b.bindBuffer(g.oa,
g.na[g.da]);k.byteLength!==g.jb[g.da]&&(b.bufferData(g.oa,k.byteLength,b.STREAM_READ),g.jb[g.da]=k.byteLength);g.gg=!0}function l(){b.bindBuffer(g.oa,null)}function p(){g.ua.forEach(function(k){b.deleteSync(k)});g.ua.splice(0)}function q(){g.da=(g.da+1)%g.Ha;++g.ac}var r=null,h=!1,m={Zc:!1,rc:null,sc:null,ad:!1,xe:!1,tc:null,bd:!1,uc:null,$c:!1,Kb:null,qe:!1,Lb:null,re:!1},t=null,w={ea:!0,fa:!0,Pb:!0,kd:!1},x=null,F=!0,u=null,z=null,g={Nd:1,Ha:-1,da:0,ac:0,ya:!1,na:[],ua:[],jb:[],oa:null,Fb:null},
G="undefined"===typeof window?{}:window,E={D:function(){if(h)return!0;E.reset();h||a();var k=b;if(!t.Zc){t.rc=E.Mc(k);G.GL_EXT_FLOAT=t.rc;t.ad=t.rc?!0:!1;if(t.ad||E.ga())t.sc=E.Nc(k),t.xe=t.sc?!0:!1,G.GL_EXT_FLOATLINEAR=t.sc;t.Zc=!0}if(!t.$c){t.tc=E.fb(k);t.tc&&(t.bd=!0,G.GL_EXT_HALFFLOAT=t.tc);if(t.bd||E.ga())t.uc=E.Oc(k),G.GL_EXT_HALFFLOATLINEAR=t.uc;t.hg=t.uc?!0:!1;t.$c=!0}t.Kb=E.Kc(k);t.qe=t.Kb?!0:!1;G.GL_EXT_COLORBUFFERFLOAT=t.Kb;t.Lb=E.Lc(k);t.re=t.Lb?!0:!1;G.GL_EXT_COLORBUFFERHALFFLOAT=t.Lb;
qa.D();Pa.D();if(!E.Od())return!1;oa.D();Pa.oe();return!0},reset:function(){t=Object.assign({},m);x=Object.assign({},w)},L:function(){h||a();return r.L()},aa:function(){h||a();return r.aa()},ga:function(){h||a();return r.ga()},Jc:function(k){E.Kc(k);E.Lc(k);E.Mc(k);E.Nc(k);E.fb(k);E.Oc(k)},Kc:c.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),Lc:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),Mc:c.bind(null,
["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),Nc:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),fb:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),Oc:c.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),Rb:function(k){var I=E.fb(k);return I&&I.HALF_FLOAT_OES?I.HALF_FLOAT_OES:k.HALF_FLOAT||k.FLOAT},
be:function(){return z||b.RGBA32F||b.RGBA},ce:function(){return u||b.RGBA16F||b.RGBA},$d:function(){return x},Fc:function(){return x.ea},hf:function(){return x.fa},gf:function(){return x.Pb},Jd:function(){return x.kd&&F},Sg:function(k){F=k;!k&&g.ya&&(p(),b.bindBuffer(g.oa,null),g.ya=!1)},ng:function(){return g.ya},Cb:function(k,I,D){function y(){k.bindTexture(k.TEXTURE_2D,null);k.bindFramebuffer(H,null);k.deleteTexture(aa);k.deleteFramebuffer(N)}var H=k.FRAMEBUFFER,K=k.NEAREST,N=k.createFramebuffer();
k.bindFramebuffer(H,N);var aa=k.createTexture();k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,aa);k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,!1);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,K);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,K);k.texImage2D(k.TEXTURE_2D,0,I,3,3,0,k.RGBA,D,null);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,aa,
0);if(k.checkFramebufferStatus(k.READ_FRAMEBUFFER||k.FRAMEBUFFER)!==k.FRAMEBUFFER_COMPLETE)return y(),!1;Aa.nc(k);k.clearColor(0,0,0,0);k.viewport(0,0,3,3);k.disable(k.DEPTH_TEST);k.clear(k.COLOR_BUFFER_BIT);oa.gb(k);k.bindFramebuffer(H,null);Aa.Ra(k);k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,aa);oa.gb(k);I=new Uint8Array(36);k.readPixels(0,0,3,3,k.RGBA,k.UNSIGNED_BYTE,I);y();for(D=0;36>D;++D)if(3!==D%4&&3<Math.abs(I[D]-127))return!1;return!0},Nb:function(k){var I={ea:!1,fa:!1};k.disable(k.BLEND);
k.clearColor(0,0,0,0);k.clear(k.COLOR_BUFFER_BIT);k.RGBA32F&&E.Cb(k,k.RGBA32F,k.FLOAT)&&(I.ea=!0,z=k.RGBA32F);!I.ea&&E.Cb(k,k.RGBA,k.FLOAT)&&(I.ea=!0,z=k.RGBA);var D=E.Rb(k);u=null;k.RGBA16F&&E.Cb(k,k.RGBA16F,D)&&(I.fa=!0,u=k.RGBA16F);!I.fa&&E.Cb(k,k.RGBA,D)&&(I.fa=!0,u=k.RGBA);return I},Pd:function(){var k=qa.instance({width:2});k.qd();var I=Pa.instance({width:2,isFloat:!0,rb:3});k.A();I.A();E.flush();b.checkFramebufferStatus(qa.ee())!==b.FRAMEBUFFER_COMPLETE?(Pa.Qe(),x.Pb=!1):x.Pb=!0;k.remove();
I.remove()},Qd:function(){var k=!1;E.ga()&&(k="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(I){return"undefined"!==typeof b[I]}));x.kd=k},Od:function(){var k=E.Nb(b);Object.assign(x,k);if(!x.ea&&!x.fa)return!1;E.Pd();E.Qd();return!0},Me:function(k,I,D,y,H){b.readPixels(k,I,D,y,b.RGBA,b.UNSIGNED_BYTE,H);return Promise.resolve(H,!1)},kc:function(k,I,D,y,H,K,N){if(!E.Jd())return E.Me(k,I,D,y,H);g.Ha=N||g.Nd;f(H);b.readPixels(k,
I,D,y,b.RGBA,b.UNSIGNED_BYTE,0);g.ua[g.da]=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);E.flush();var aa=!1;return new Promise(function(R,e){function n(){if(!g.ya)return d(),l(),q(),e(),!1;var C=(g.da+1)%g.Ha;switch(b.clientWaitSync(g.ua[C],0,0)){case b.TIMEOUT_EXPIRED:case b.WAIT_FAILED:break;default:return d(),b.deleteSync(g.ua[C]),g.ua[C]=null,b.bindBuffer(g.oa,g.na[C]),b.getBufferSubData(g.oa,0,H),l(),q(),R(H,aa),!0}g.Fb=setTimeout(n,0);return!1}d();g.ac+1<g.Ha?(l(),q(),R(H,!1)):(g.ya=!0,n()||
!K||aa||(aa=!0,K()))})},td:function(){b.viewport(0,0,E.L(),E.aa())},flush:function(){b.flush()},u:function(){d();p();Pa.u();qa.u();oa.u();g.na.forEach(function(k){b.deleteBuffer(k)});g.na.splice(0);Aa.reset();h=!1}};return E}(),Y=oa,Ea=qa,ba=Pa,Ia=function(){function a(D,y,H,K){g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,K?g.NEAREST_MIPMAP_NEAREST:g.LINEAR);var N=null;if(null!==H)try{N=g.getError();if("FUCKING_BIG_ERROR"===N)return!1;g.texImage2D(g.TEXTURE_2D,0,D,4,4,0,g.RGBA,y,H);N=g.getError();
if(N!==g.NO_ERROR)return!1}catch(aa){return!1}K&&g.generateMipmap(g.TEXTURE_2D);g.clear(g.COLOR_BUFFER_BIT);Y.gb(g);N=g.getError();if("FUCKING_BIG_ERROR"===N)return!1;g.readPixels(0,0,2,2,g.RGBA,g.UNSIGNED_BYTE,t);N=g.getError();N===g.INVALID_OPERATION&&"undefined"!==typeof g.PIXEL_PACK_BUFFER&&(g.bindBuffer(g.PIXEL_PACK_BUFFER,null),g.readPixels(0,0,2,2,g.RGBA,g.UNSIGNED_BYTE,t),N=g.getError());if(N!==g.NO_ERROR)return!1;H=!0;for(K=0;16>K;++K)H=H&&4>Math.abs(t[K]-127);H&&(h.jd=y,h.Xc=D);return H}
function c(D,y){return G.ea&&a(D,g.FLOAT,new Float32Array(w),y)?(r=q.Ac,!0):!1}function d(D,y,H){if(!G.fa)return!1;var K=Pa.Md(w),N=da.fb(g);if(N&&N.HALF_FLOAT_OES&&a(D,N.HALF_FLOAT_OES,K,y)||g.HALF_FLOAT&&a(D,g.HALF_FLOAT,K,y))return r=q.Ba,!0;K=new Float32Array(w);if(a(D,g.FLOAT,K,y))return r=q.Ba,!0;g.bindTexture(g.TEXTURE_2D,H);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,2,2,0,g.RGBA,g.UNSIGNED_BYTE,null);g.bindFramebuffer(h.cb,I);Pa.Qc(g,H,2,2,K,!1,!1);g.bindFramebuffer(h.cb,null);g.bindTexture(g.TEXTURE_2D,
H);return a(D,null,null,y)?(r=q.Ba,!0):!1}function f(D,y,H){m=!0;if(d(D,!0,H)||c(y,!0))return!0;m=!1;return d(D,!1,H)||c(y,!1)?!0:!1}function l(D){if(r===q.R){g=D||b;r=q.RGBA8;m=!0;da.Jc(g);G||(G=da.Nb(g));Ea.reset();I=g.createFramebuffer();h.cb=g.DRAW_FRAMEBUFFER||g.FRAMEBUFFER;g.bindFramebuffer(h.cb,null);g.clearColor(0,0,0,0);g.viewport(0,0,2,2);A.R();E=A.Ra(g);D=g.createTexture();g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,D);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.REPEAT);
g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.REPEAT);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);k=D;var y=D=g.RGBA,H=g.RGBA16F,K=g.RGBA32F;K&&(D=K);H&&(y=H);if((H||K)&&f(y,D,k))return p(),!0;D=y=g.RGBA;if(f(y,D,k))return p(),!0;r=q.RGBA8;p();return!1}}function p(){g.deleteProgram(E.sa);g.deleteTexture(k);k=E=null}for(var q={R:-1,Ac:3,Ba:2,RGBA8:0},r=q.R,h={jd:null,Xc:null,cb:null},m=!0,t=new Uint8Array(16),w=Array(64),x=0;4>x;++x)for(var F=0;4>F;++F){var u=0===(F+x)%2?1:0,z=4*
x+F;w[4*z]=u;w[4*z+1]=u;w[4*z+2]=u;w[4*z+3]=u}var g=null,G=null,E=null,k=null,I=null;return{Id:function(D){l(D);return m},Ec:function(D,y){r===q.R&&(typeof("undefined"!==y)&&(G=y),l(D));return r!==q.RGBA8},kg:function(D){l(D);return r===q.Ac},ye:function(D){l(D);return r===q.Ba},Uf:function(D){l(D);return h.jd},de:function(D){l(D);return h.Xc},u:function(){g=null;m=!0;r=q.R;G=null}}}(),dc=function(){return{instance:function(a){function c(){x&&x.remove();x=ba.instance({isFloat:!1,isPot:!1,width:a.size*
a.X[0],height:a.size*a.X[1]})}var d=null,f=!1,l=!1,p=null,q=!1,r=!1,h=null,m="undefined"===typeof a.preprocessing?!1:a.preprocessing,t="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(f=!0,SETTINGS&&void 0!==SETTINGS.Cd&&(a.mask=SETTINGS.Cd+a.mask),d=ba.instance({isFloat:!1,url:a.mask}));var w=!1;a.customInputShader&&(w="s49",A.Bc({name:"_",id:w,g:a.customInputShader,Tg:["uSource"],precision:"lowp"}),A.M(w,[{type:"1i",name:"_",value:0}]));switch(m){case "sobel":h="s38";
q=!0;break;case "meanNormalization":h="s39";q=!0;break;case "grayScale":h="s35";q=!1;break;case "grayScaleTilt":h="s36";r=!0;q=!1;break;case "rgbGrayTilt":h="s37";r=!0;q=!1;break;case "copy":h=w?w:"s0";break;case "inputLightRegulation":h=w?w:"s35";p=mc.instance({Wc:t,hd:a.size,dd:a.nBlurPass,Y:!1});l=!0;break;case "inputMix0":h="none";p=nc.instance({B:t,ka:a.varianceMin,ca:a.blurKernelSizePx,gain:a.gain||1,Y:!1});l=!0;break;case "inputMix1":h="none";p=oc.instance({B:t,ka:a.varianceMin,ca:a.blurKernelSizePx,
gain:a.gain||1,Y:!1});l=!0;break;case "inputCut4":h="none";p=pc.instance({B:t,ka:a.varianceMin,ca:a.blurKernelSizePx,gain:a.gain||1,La:a.isNormalized||!1,jc:a.overlap||0,Y:!1});t*=p.fe();l=!0;break;case "direct":case "none":case "abort":h="abort";break;default:h="s4"}t=Math.ceil(t);r&&A.M(h,[{name:"u29",type:"1f",value:a.tilt}]);f&&(h+="Mask");var x=null;c();var F={L:function(){return a.size},ge:function(){return t},Tb:function(){return F.L()},ke:function(){return l?p.Ja():x},Gb:function(u){a.X=u;
c()},O:function(u){Ea.W();if("abort"===h)return u.j(0),u;"none"!==h&&(A.set(h),q&&A.Z("u30",1/a.size),x.T(),f&&d.j(1),Y.m(!1,!1),x.j(0),u=x);l&&p.process(u)},u:function(){x.remove();f&&d.remove()}};return F}}}(),ec=function(){return{instance:function(a){function c(){if(I.za){l.input&&(l.input.remove(),l.kb.remove());var y=a.size*a.sparsity;k=Math.log(y/a.size)/Math.log(2);l.input=ba.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:y*a.X[0],height:y*a.X[1],Zb:k});l.kb=ba.instance({isFloat:!0,isPot:!0,
width:a.size*a.X[0],height:a.size*a.X[1]})}}function d(){l.ra&&l.ra.remove();l.ra=ba.instance({isFloat:!0,isPot:!q,isLinear:!q&&r.isLinear,width:a.size*a.X[0],height:a.size*a.X[1]})}function f(y){r.buffer.forEach(function(H,K){r.results[K][0]=y[0][H];r.results[K][1]=y[1][H];r.results[K][2]=y[2][H];r.results[K][3]=y[3][H]});return r.results}a.normalize=a.normalize||!1;var l={input:null,bias:null,kb:null,ra:null,ic:null,fc:null,hc:null},p=null,q=!0,r={type:"undef",H:null,isLinear:!1,buffer:[],results:[],
lb:!1},h=-1,m=a.isReorganize?a.isReorganize:!1,t=a.kernelsCount?!0:!1,w=[a.wa?"s31":"s30",a.wa?"s33":"s32","s34"][a.shiftRGBAMode||0],x={isEnabled:!1},F=1/a.size;a.we?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.yb.Tb(),q=!1):"full"===a.connectivityUp&&(a.sparsity=a.yb.Tb());var u={elu:"s18",elu01:"s19",relu:"s17",arctan:"s20",arctan2:"s21",sigmoid:"s16",copy:"s0"}[a.activation],z=a.sparsity*a.sparsity,g=!1,G=a.size,E="";if(a.maxPooling){switch(a.maxPooling.size){case 2:E="s40";break;
case 4:E="s41"}g=!0;G/=a.maxPooling.size;l.fc=ba.instance({isFloat:!0,isPot:!1,width:G})}var k=-1,I=null;q&&d();l.bias=ba.instance(a.bias);var D={L:function(){return a.size},Tb:function(){return G},Tc:function(){return a.classesCount},Ed:function(y){p.j(y)},Fe:function(){a.remap&&a.remap.isEnabled&&(x={isEnabled:!0,Ae:ba.instance(a.remap.maskTexture),Pa:a.remap.layers.map(function(y){return a.parent.ie(y)}),depth:a.remap.depth})},Re:function(){switch(a.connectivityUp){case "direct":I=qc.instance(a.connectivity);
break;case "square":I=rc.instance(a.connectivity);break;case "squareFast":I=sc.instance(a.connectivity,a.activation);break;case "full":I=tc.instance(Object.assign({wa:a.wa,Ka:a.Ka||[1,1]},a.connectivity));break;case "conv":h=a.kernelsCount,I=uc.instance(a.connectivity),m&&(l.ic=ba.instance({width:G,isFloat:!0,isFlipY:!1,isPot:!1}))}c()},O:function(y,H){p=y;I.za?(l.input.T(),t&&l.bias.j(2),I.O(x),l.input.j(0),l.input.Yd(k),l.kb.T(),t?A.set("s0"):(A.set(w),A.Z("u4",z),l.bias.j(1)),l.input.Fd(k,0),Y.m(!1,
!1),A.set(u),l.ra.A(),l.kb.j(0),Y.m(!1,!1)):(l.ra.T(),l.bias.j(1),I.O());if(q)return H=l.ra,g&&(l.fc.T(),H.j(0),A.set(E),A.U("u14",F,F),Y.m(!1,!1),H=l.fc),m&&(l.ic.A(),A.set("s23"),A.U("u18",h,G/h),H.j(0),Y.m(!1,!1),H=l.ic),H.j(0),H;var K=l.ra;if(a.normalize||r.lb)y=a.normalize,A.set(r.lb?"s9":"s8"),A.Z("u10",y?F:1),l.hc.T(),K.j(0),Y.m(!1,!1),K=l.hc;y=null;switch(r.type){case "cpuRGBA2Float":K.Ic(!1);H?y=D.He(K).then(r.H):(K=D.Ie(K),r.H(K));break;case "cpuMeanFloat":K.Ic(!0);if(H)y=K.Ke().then(r.H);
else{K=K.Le();for(var N=0;N<K.length;++N);r.H(K)}break;case "gpuRawAvg":case "gpuRaw":K.j(0);case "none":null!==r.H&&r.H(K)}H&&null===y&&(y=Promise.resolve());return y},Gb:function(y){a.X=y;c();d()},Ve:function(y){y&&(r.type=y.wb||"none",r.H=y.vb||null,r.isLinear=y.ec?!0:!1);d();y="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var H=0,K=0,N=0;H<y;++H)r.buffer.push(K+(a.size-1-N)*a.size),r.results.push([-1,-1,-1,-1]),++K,K===a.size&&(K=0,++N);r.lb="gpuRawAvg"===
r.type||"cpuMeanFloat"===r.type;if(a.normalize||r.lb)l.hc=ba.instance({isFloat:!0,isPot:!0,width:a.size})},He:function(y){return y.Je().then(f)},Ie:function(y){y=y.ld();f(y);return r.results},u:function(){for(var y in l){var H=l[y];H&&H.remove()}I&&(I.u(),I=null)}};a.yb&&D.Re(a.yb);return D}}}(),qc=function(){return{instance:function(a){var c=ba.instance(a.weights);return{za:!0,ib:function(){return 1},u:function(){c.remove()},me:function(){return c},O:function(){A.set("s29");c.j(1);Y.m(!1,!1)}}}}}(),
tc=function(){return{instance:function(a){var c=a.fromLayerSize,d=ba.instance(a.weights),f=a.wa?"s26":"s25";return{za:!0,ib:function(){return c},u:function(){d.remove()},O:function(l){if(l.isEnabled){A.set("s27");l.Ae.j(3);for(var p=Math.min(l.Pa.length,l.depth),q=0;q<p;++q)l.Pa[q].Ed(4+q)}else A.set(f);a.wa&&A.sd("u21",a.Ka);A.Z("u8",a.toLayerSize);A.Z("u9",a.fromLayerSize);d.j(1);Y.m(!1,!1)}}}}}(),rc=function(){return{instance:function(a){for(var c=a.fromLayerSize,d=a.toLayerSize,f=a.toSparsity,
l=f*d,p=l/c,q=c/d,r=0,h=0,m=0,t=Array(f*d*f*d*4),w=Array(f*d*f*d*4),x=Array(c*c),F=0;F<x.length;++F)x[F]=0;F=Math.floor(f/2);for(var u=.5/d,z=.5/c,g=.5/l,G=0;G<d;++G)for(var E=Math.round(G*q),k=0;k<d;++k){var I=Math.round(k*q),D=G/d,y=k/d;D+=u;y+=u;for(var H=0;H<f;++H){var K=E+H-F;0>K&&(K+=c);K>=c&&(K-=c);for(var N=0;N<f;++N){var aa=r/l,R=h/l,e=I+N-F;0>e&&(e+=c);e>=c&&(e-=c);var n=K/c,C=e/c;R=1-R-1/l;n+=z;C+=z;aa+=g;R+=g;var L=G*f+H,Q=k*f+N;Q=d*f-Q-1;L=Q*d*f+L;t[4*L]=aa;t[4*L+1]=R;t[4*L+2]=n;t[4*
L+3]=C;C=x[e*c+K]++;L=C%p;n=K*p+L;e=e*p+(C-L)/p;e=c*p-1-e;e=e*c*p+n;w[4*e]=aa;w[4*e+1]=R;w[4*e+2]=D;w[4*e+3]=y;++r>=l&&(r=0,++h);++m}}}x=null;var pa=ba.instance(a.weights);delete a.weights.data;var Ba=ba.instance({width:l,isFloat:!0,array:new Float32Array(w),isPot:!0});w=null;var Ja=ba.instance({width:l,isFloat:!0,array:new Float32Array(t),isPot:!0});t=null;return{za:!0,ib:function(){return p},u:function(){Ba.remove();Ja.remove();pa.remove()},O:function(){A.set("s24");pa.j(1);Ja.j(2);Y.m(!1,!1)}}}}}(),
uc=function(){return{instance:function(a){var c=a.kernelsCount,d=a.toSparsity,f=d*a.toLayerSize/a.fromLayerSize,l=a.inputScale||[1,1],p=ba.instance(a.weights);return{za:!0,ib:function(){return f},cg:function(){return d},me:function(){return p},u:function(){p.remove()},O:function(){A.set("s28");A.sd("u28",l);A.Z("u26",c);A.Z("u27",d);A.Z("u8",a.toLayerSize);A.Z("u9",a.fromLayerSize);p.j(1);Y.m(!1,!1)}}}}}(),sc=function(){return{instance:function(a,c){var d=a.fromLayerSize,f=a.toLayerSize,l=a.toSparsity,
p=a.stride?a.stride:1,q=l*f/d,r=f<d,h=d/f,m=ba.instance(a.weights),t="s50"+[d.toString(),f.toString(),l.toString(),p.toString(),c].join("_");A.Xd(t)||(a=kc.Zd(c,"gl_FragColor","gl_FragColor"),f=[{type:"1f",name:"u8",value:f},{type:"1f",name:"u32",value:p}],r&&f.push({type:"1f",name:"u9",value:d}),d=[(r?q:l).toFixed(1),a],r&&d.push(h.toFixed(1)),A.pe(r?"s46":"s45",t,d),A.M(t,f.concat([{type:"1i",name:"u6",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u7",value:3}])));return{za:!1,ib:function(){return q},
u:function(){m.remove()},O:function(){A.set(t);m.j(3);Y.m(!1,!1)}}}}}(),mc=function(){return{instance:function(a){var c=a.dd?a.dd:3,d=a.Wc?a.Wc:64,f=a.hd?a.hd:64,l=a.Y?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var p=ba.instance(a),q=ba.instance(a),r=ba.instance(a),h=ba.instance(a),m=ba.instance({isFloat:!0,width:f,isPot:!1,isFlipY:!1}),t=1/d;return{process:function(w){A.set("s42");h.A();Y.m(l,!1);A.set("s43");for(var x=0;x<c;++x)p.A(),A.U("u14",t,0),Y.m(l,!1),r.A(),h.j(0),Y.m(l,!1),q.A(),p.j(0),
A.U("u14",0,t),Y.m(l,!1),h.A(),r.j(0),Y.m(l,!1),x!==c-1&&q.j(0);A.set("s44");m.A();w.j(0);q.j(1);h.j(2);Y.m(l,!1);m.j(0)},Ja:function(){return m}}}}}(),nc=function(){return{instance:function(a){function c(t){return ba.instance({isFloat:t,width:d.B,isPot:!1,isFlipY:!1})}var d=Object.assign({ka:.1,ca:9,B:128,gain:1,Y:!1},a),f=c(!1),l=[c(!1),c(!1),c(!1)],p=[c(!1),c(!1),c(!1)],q=c(!0),r=[f,p[0],p[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.ca-1)/2).toFixed(2)).replace("2.2222",(1/d.B).toFixed(6));var h="uniform sampler2D u34,u35,u36,u37;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u34,vv0).rgb;float c=texture2D(u35,vv0).r,d=texture2D(u36,vv0).r,i=texture2D(u37,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.ka.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),m={u1:0};A.Xa([{id:"s52",
name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",l:m,i:["u1"],precision:"lowp"},{id:"s53",name:"_",g:a,l:m,i:["u1","u33"],precision:"lowp"},{id:"s54",name:"_",g:h,l:{u34:0,u35:1,u36:2,u37:3},i:["u34","u35","u36","u37"],precision:"highp"}]);return{process:function(){A.set("s52");f.T();Y.m(d.Y,!1);A.set("s53");for(var t=0;3>t;++t)A.U("u33",1,0),l[t].A(),r[t].j(0),
Y.m(!1,!1),A.U("u33",0,1),p[t].A(),l[t].j(0),Y.m(!1,!1);A.set("s54");q.A();f.j(0);p[0].j(1);p[1].j(2);p[2].j(3);Y.m(!1,!1);q.j(0)},Ja:function(){return q}}}}}(),oc=function(){return{instance:function(a){function c(m){return ba.instance({isFloat:m,width:d.B,isPot:!1,isFlipY:!1})}var d=Object.assign({ka:.1,ca:9,B:128,gain:1,Y:!1},a),f=c(!1),l=c(!1),p=c(!1),q=c(!0);a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((d.ca-1)/2).toFixed(2)).replace("2.2222",(1/d.B).toFixed(6));var r="uniform sampler2D u0,u38;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u38,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",d.ka.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),h={u1:0};A.Xa([{id:"s55",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",
l:h,i:["u1"],precision:"lowp"},{id:"s56",name:"_",g:a,l:h,i:["u1","u33"],precision:"lowp"},{id:"s57",name:"_",g:r,l:{u0:0,u38:1},i:["u0","u38"],precision:"highp"}]);return{process:function(){A.set("s55");f.T();Y.m(d.Y,!1);A.set("s56");A.U("u33",1,0);l.A();f.j(0);Y.m(!1,!1);A.U("u33",0,1);p.A();l.j(0);Y.m(!1,!1);A.set("s57");q.A();f.j(0);p.j(1);Y.m(!1,!1);q.j(0)},Ja:function(){return q}}}}}(),pc=function(){return{instance:function(a){function c(t){return ba.instance({isFloat:t,width:d.B,isPot:!1,isFlipY:!1})}
var d=Object.assign({ka:.1,ca:9,B:128,gain:1,jc:0,La:!1,Y:!1},a),f=c(!1),l=null,p=null,q=null;d.La&&(l=c(!1),p=c(!1),q=c(!0));a={u1:0};var r=[{id:"s58",name:"_",g:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",
d.jc.toFixed(4)),l:a,i:["u1"],precision:"lowp"}];if(d.La){var h="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",Math.round((d.ca-1)/2).toFixed(2)).replace("2.2222",(1/d.B).toFixed(6)),m="uniform sampler2D u0,u38;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u38,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",
d.ka.toFixed(4)).replace("2.2222",d.gain.toFixed(4));r.push({id:"s59",name:"_",g:h,l:a,i:["u1","u33"],precision:"lowp"},{id:"s60",name:"_",g:m,l:{u0:0,u38:1},i:["u0","u38"],precision:"highp"})}A.Xa(r);return{process:function(){A.set("s58");f.T();Y.m(d.Y,!1);d.La?(A.set("s59"),A.U("u33",1,0),l.A(),f.j(0),Y.m(!1,!1),A.U("u33",0,1),p.A(),l.j(0),Y.m(!1,!1),A.set("s60"),q.A(),f.j(0),p.j(1),Y.m(!1,!1),q.j(0)):f.j(0)},fe:function(){return 2-d.jc},Ja:function(){return d.La?q:f}}}}}(),Cb=function(){function a(z,
g,G,E,k,I,D){if(!F)if(D===I.length)k();else{switch(I[D]){case "A":G();break;case "D":z();break;case "S":g().then(function(y,H){u.vd();a(z,g,G,H?null:E,k,I,++D)}).catch(function(y){console.log("An error occurred in the WebAR loop: ",y);k()});return;case "R":E&&E()}a(z,g,G,E,k,I,++D)}}var c={n:5,$b:1,ze:0,hb:[35,49],eb:[2,200],k:.7,$e:200,De:.05},d=-1,f=null,l=-1,p=-1,q=0,r=-1,h=-1,m=0,t=0,w=c.eb[1],x=Math.log(2),F=!0,u={je:function(){switch(d){case -1:return-1;case 0:return h+f.ze;case 1:return m}},
Mf:function(z){return Math.pow(Math.min(Math.max(r,0),f.n-1)/(f.n-1),z||1)},D:function(z){f=Object.assign({},c,z);r=h=f.$b;d=0;u.reset()},vd:function(z){z=("undefined"===typeof z?Date.now():z)||0;var g=Math.min(Math.max(z-t,f.eb[0]),f.eb[1]);w=g;t=z;var G=-1===l?0:f.k;l=Math.min(Math.max(1E3/g,5),120)*(1-G)+l*G;z-p>f.$e&&5<++q&&(g=f.k,r=r*(1-g)+(l<f.hb[0]?h-1:l>f.hb[1]?h+1:h)*g,Math.abs(r-h)>1-f.De&&(g=Math.min(Math.max(Math.round(r),0),f.n-1),g!==h&&(r=h=g,l=(f.hb[1]-f.hb[0])/2)),p=z)},Cg:function(z,
g,G,E,k,I){F=!1;a(z,g,G,E,k,I,0)},stop:function(){F=!0},Fg:function(z){m=z;d=1},Vg:function(){d=0;u.reset()},reset:function(){w=c.eb[1];p=l=-1;q=0},Rg:function(z,g,G){G=Math.exp(-x*w/G);return(1-G)*z+G*g},Rf:function(){return w}};return u}(),Mb=function(){function a(w,x){var F=w[0]-.5;w=w[1]-.5;var u=x[0]-.5;x=x[1]-.5;return F*F+w*w-(u*u+x*x)}var c={ed:4,xb:[1.5,1.5,2],G:[.1,.1,.1],od:1,B:-1,S:-1,We:2,gd:1,mc:!0,Td:.8},d=null,f=[],l=[],p=[],q=[0],r=[.5,.5,1],h=null,m=0,t=[0,0,0];return{D:function(w){d=
Object.assign({},c,w);f.splice(0);l.splice(0);p.splice(0);m=0;w=d.xb[0]*d.G[0];var x=d.xb[1]*d.G[1],F=1/(1+d.xb[2]*d.G[2]),u=d.od*Math.min(d.B,d.S),z=u/d.B;u/=d.S;var g=.5*d.Td;g*=g;for(var G=0;G<d.ed;++G){var E=[];l.push(E);var k=Math.pow(F,G),I=z*k,D=u*k;k=I*d.gd;p.push(k);var y=I*w,H=D*x;I/=2;D/=2;for(var K=1+(1-I-I)/y,N=1+(1-D-D)/H,aa=0;aa<N;++aa)for(var R=D+aa*H,e=R-.5,n=0;n<K;++n){var C=I+n*y,L=C-.5;L*L+e*e>g||(C=[C,R,k],f.push(C),E.push(C))}d.mc&&E.sort(a);h=f}d.mc&&f.sort(a)},get:function(w){var x=
h.length;if(0===x)return r;for(;w>=q.length;)q.push(0);q[w]>=x&&(q[w]=0);var F=h[Math.floor(q[w])%x];q[w]=(q[w]+1/d.We)%x;if(0===m)return F;t[0]=F[0];t[1]=F[1];t[2]=m;return t},wg:function(w){w>=q.length||(q[w]=Math.floor(Math.random()*h.length))},Gg:function(w){m=w;if(0===m)h=f;else{for(var x=p.length,F=x-1,u=0;u<x;++u)if(p[u]<=w){F=u;break}h=l[F]}},reset:function(){for(var w=f.length/q.length,x=0;x<q.length;++x)q[x]=Math.floor(x*w);m=0;h=f}}}(),fa={Za:512,G:[.05,.05,.15],Oe:{nScaleLevels:3,scale0Factor:.8,
scaleFactor:1,overlapFactors:[2,2,3],scanCenterFirst:!0,scaleXRange:[1/15,.9],lockStabilizeEnabled:!0,rawNNOutputTranslationScalingOffsets:[0,0,0],lockStabilizeDxysRanges:[[.5,1],[.5,1],[.5,1]]},Be:3,vc:.68,ub:10,qb:.03,qa:8,Db:-.02,$a:.02,Ta:.7,sb:20,ab:.3,Va:[.02,10],tb:[1,6],Ce:3},wa=Object.create(fa.Oe),Ab=0,Nb=0,Xa=0,Bb=!1,T={width:-1,Yb:!0,Ma:!1,ob:!1,nd:null,qc:!1,pitchRange:null,G:fa.G},xa={yc:0,pitch:0,lc:0,cc:!0},Sa=null,ya=null,ab=!1,Va=!1,Ga=0,db=null,J=null,vc={aspectRatio:1,Xb:1,va:[1,
1],B:0,S:0,ja:0,ia:0,Ia:"s61",J:{Fa:[0,0],scale:[1,1]}},V={N:null,o:[0,0,0,0]},ia={ma:-2,LOADING:-1,Ca:0,Hb:1,zc:2,Wa:3},ra=ia.ma,Za={ma:-2,LOADING:1,IDLE:0},fb=Za.ma,Ha=null;var Ob=ea=0;var eb=-1;var Z={n:0,fd:0,bc:0,I:-1,$:[0,0]},$a={video:0,zd:1},Na={undefined:0,video:1,Gc:2,Ob:3},P=null,wc={current:$a.video,element:null,N:null,xa:!1,type:Na.undefined,time:-1,ta:null},Wb=!1,ha={distance:0,label:!1,positionScale:[0,0,0,0],detectScore:0,yaw:0,pitch:0,roll:0,NNInputWidth:-1},yb=1,ic={cutShader:null,
thresholdDetectFactor:1,thresholdDetectFactorUnstitch:1,isSkipConfirmation:!1,isKeepTracking:!1,trackingFactors:[2,2,2],secondNeighborFactor:fa.Ta,nLocateAutomoves:fa.ub,locateMoveNoiseAmplitude:fa.qb,nConfirmAutoMoves:fa.qa,nConfirmUnstitchMoves:fa.sb,confirmMoveNoiseAmplitude:fa.$a,thresholdConfirmOffset:fa.Db,tiltPosAngleIfAmbiguousDetection:fa.Va,confirmScoreMinFactorDuringAutoMove:fa.ab},na={},W={Eb:1,ud:1,Oa:!1,mb:!1,wd:null,Ta:fa.Ta,ub:-1,qb:-1,qa:-1,Db:-1,$a:-1,sb:-1,Va:null,ab:-1},Qb=[{type:"1f",
name:"u39",value:0}],ob={VERSION:"1.3.8",init:function(a){function c(d){a.callbackReady&&a.callbackReady(d)}if(ra!==ia.ma)return c("ALREADY_INITIALIZED");ra=ia.LOADING;J=Object.assign({},vc);P=Object.assign({},wc);if("undefined"!==typeof a.canvas)ya=a.canvas,ab=!1;else if("undefined"===typeof a.canvasId)ya=document.createElement("canvas"),ab=!1;else{ya=document.getElementById(a.canvasId);if(!ya)return c("INVALID_CANVASID"),!1;ab=!0}"undefined"!==typeof a.isDebugRender&&(ab=a.isDebugRender);ab&&(ya.style.display=
"block");a.scanSettings&&Object.assign(wa,a.scanSettings);a.canvasSize&&(fa.Za=a.canvasSize);Cb.D({n:fa.tb[1]-fa.tb[0]+1,$b:fa.Ce-fa.tb[0]});Va="undefined"===typeof a.followZRot?!1:a.followZRot;db="undefined"===typeof a.ZRotRange?null:a.ZRotRange;Wb="undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope;-1!==fa.Za&&(ya.width=fa.Za,ya.height=fa.Za);ob.set_source(a.video,a.videoCrop);if(!qb.D({bb:ya,width:ya.width,height:ya.height,debug:!1,dc:c.bind(null,
"GLCONTEXT_LOST"),premultipliedAlpha:!1}))return c("GL_INCOMPATIBLE"),!1;P.current===$a.video&&(Rb(P.element),Ya());hc();wb();ra=ia.Ca;c(!1);return!0},set_source:function(a,c){"undefined"!==typeof a&&a?(P.element=a,P.current=$a.video,P.element.isFakeVideo?(J.ja=P.element.videoWidth,J.ia=P.element.videoHeight,P.type=Na.Ob):"VIDEO"===a.tagName?(J.ja=P.element.videoWidth,J.ia=P.element.videoHeight,P.type=Na.video):(J.ja=P.element.width,J.ia=P.element.height,P.type=Na.Gc),Jb(c)):P.current=$a.zd;-1===
[ia.ma,ia.LOADING].indexOf(ra)&&(P.ta&&P.ta.F&&(P.ta.F=a),Ya(),wb(),P.type===Na.Gc&&P.N.refresh())},set_NN:function(a,c,d){if(fb===Za.LOADING)c&&c("NN_LOADING");else{var f=function(l){fb=Za.IDLE;c&&c(l)};fb=Za.LOADING;"string"===typeof a?pb.get(a,function(l){if(!l)return f("INVALID_NN");var p=null;try{p=JSON.parse(l)}catch(q){return f("INVALID_NN")}Sb(p,f,d)},function(){f("NOTFOUND_NN")}):Sb(a,f,d)}},reset_state:function(){Pb();ra=ia.Ca},destroy:function(){ob.reset_state();Sa&&Sa.u();qb.u();fb=Za.ma;
ra=ia.ma;return Promise.resolve()},detect_async:function(a,c,d){var f,l;return cc(new Ib(new mb(function(p){switch(p.ha){case 1:f=Tb(a,c,d);if(-1===f)return p.return(ha);l=0;case 2:if(!(l<f)){p.ha=4;break}Ub(l,f);var q=Sa.Ee(V.N);p.ha=5;return{value:q};case 5:Ea.W();++l;p.ha=2;break;case 4:return p.return(Vb())}})))},detect:function(a,c,d){a=Tb(a,c,d);if(-1===a)return ha;for(c=0;c<a;++c)Ub(c,a),Sa.O(V.N),Ea.W();return Vb()},get_aspectRatio:function(){return J.B/J.S},set_scanSettings:function(a){Object.assign(wa,
a);Ya()},set_videoCrop:function(a){Jb(a);wb();Ya()}};return ob}();
;return WEBARROCKSOBJECT||window.WEBARROCKSOBJECT;})();